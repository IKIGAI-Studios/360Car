import{A as kC,B as En,C as li,D as Wd,E as Bc,F as r0,G as OC,H as FC,I as G,J as Jt,K as lt,L as i0,M as VC,N as Uc,O as ue,P as dn,Q as Kd,R as s0,S as In,T as ui,U as ls,V as Qd,W as LC,X as Bn,Y as bt,a as A,b as ie,c as e0,d as g,e as CC,f as $d,g as DC,h as TC,i as D,j as Do,k as Hd,l as SC,m as AC,n as ft,o as qd,p as jc,q as t0,r as MC,s as or,t as n0,u as Gd,v as NC,w as RC,x as zd,y as Ze,z as PC}from"./chunk-44ZLHZR4.js";var jC=null;var o0=1,a0=Symbol("SIGNAL");function be(t){let e=jC;return jC=t,e}var BC={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function VF(t){if(!(u0(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===o0)){if(!t.producerMustRecompute(t)&&!c0(t)){t.dirty=!1,t.lastCleanEpoch=o0;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=o0}}function UC(t){return t&&(t.nextProducerIndex=0),be(t)}function $C(t,e){if(be(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(u0(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)l0(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function c0(t){Yd(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(VF(n),r!==n.version))return!0}return!1}function HC(t){if(Yd(t),u0(t))for(let e=0;e<t.producerNode.length;e++)l0(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function l0(t,e){if(LF(t),Yd(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)l0(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Yd(i),i.producerIndexOfThis[r]=e}}function u0(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Yd(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function LF(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function jF(){throw new Error}var BF=jF;function qC(t){BF=t}function K(t){return typeof t=="function"}function To(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Zd=To(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function us(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ze=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(K(r))try{r()}catch(s){e=s instanceof Zd?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{GC(s)}catch(o){e=e??[],o instanceof Zd?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Zd(e)}}add(e){var n;if(e&&e!==this)if(this.closed)GC(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&us(n,e)}remove(e){let{_finalizers:n}=this;n&&us(n,e),e instanceof t&&e._removeParent(this)}};ze.EMPTY=(()=>{let t=new ze;return t.closed=!0,t})();var d0=ze.EMPTY;function Xd(t){return t instanceof ze||t&&"closed"in t&&K(t.remove)&&K(t.add)&&K(t.unsubscribe)}function GC(t){K(t)?t():t.unsubscribe()}var Un={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var So={setTimeout(t,e,...n){let{delegate:r}=So;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=So;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Jd(t){So.setTimeout(()=>{let{onUnhandledError:e}=Un;if(e)e(t);else throw t})}function ds(){}var zC=h0("C",void 0,void 0);function WC(t){return h0("E",void 0,t)}function KC(t){return h0("N",t,void 0)}function h0(t,e,n){return{kind:t,value:e,error:n}}var hs=null;function Ao(t){if(Un.useDeprecatedSynchronousErrorHandling){let e=!hs;if(e&&(hs={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=hs;if(hs=null,n)throw r}}else t()}function QC(t){Un.useDeprecatedSynchronousErrorHandling&&hs&&(hs.errorThrown=!0,hs.error=t)}var fs=class extends ze{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Xd(e)&&e.add(this)):this.destination=HF}static create(e,n,r){return new Lr(e,n,r)}next(e){this.isStopped?p0(KC(e),this):this._next(e)}error(e){this.isStopped?p0(WC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?p0(zC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},UF=Function.prototype.bind;function f0(t,e){return UF.call(t,e)}var g0=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){eh(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){eh(r)}else eh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){eh(n)}}},Lr=class extends fs{constructor(e,n,r){super();let i;if(K(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Un.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&f0(e.next,s),error:e.error&&f0(e.error,s),complete:e.complete&&f0(e.complete,s)}):i=e}this.destination=new g0(i)}};function eh(t){Un.useDeprecatedSynchronousErrorHandling?QC(t):Jd(t)}function $F(t){throw t}function p0(t,e){let{onStoppedNotification:n}=Un;n&&So.setTimeout(()=>n(t,e))}var HF={closed:!0,next:ds,error:$F,complete:ds};var Mo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Et(t){return t}function m0(...t){return _0(t)}function _0(t){return t.length===0?Et:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var se=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=GF(n)?n:new Lr(n,r,i);return Ao(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=YC(r),new r((i,s)=>{let o=new Lr({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Mo](){return this}pipe(...n){return _0(n)(this)}toPromise(n){return n=YC(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function YC(t){var e;return(e=t??Un.Promise)!==null&&e!==void 0?e:Promise}function qF(t){return t&&K(t.next)&&K(t.error)&&K(t.complete)}function GF(t){return t&&t instanceof fs||qF(t)&&Xd(t)}function x0(t){return K(t?.lift)}function X(t){return e=>{if(x0(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Q(t,e,n,r,i){return new y0(t,e,n,r,i)}var y0=class extends fs{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function No(){return X((t,e)=>{let n=null;t._refCount++;let r=Q(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Ro=class extends se{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,x0(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ze;let n=this.getSubject();e.add(this.source.subscribe(Q(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ze.EMPTY)}return e}refCount(){return No()(this)}};var ZC=To(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var $e=(()=>{class t extends se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new th(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new ZC}next(n){Ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ao(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?d0:(this.currentObservers=null,s.push(n),new ze(()=>{this.currentObservers=null,us(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new se;return n.source=this,n}}return t.create=(e,n)=>new th(e,n),t})(),th=class extends $e{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:d0}};var It=class extends $e{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var $c={now(){return($c.delegate||Date).now()},delegate:void 0};var nh=class extends $e{constructor(e=1/0,n=1/0,r=$c){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var rh=class extends ze{constructor(e,n){super()}schedule(e,n=0){return this}};var Hc={setInterval(t,e,...n){let{delegate:r}=Hc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Hc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Po=class extends rh{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Hc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Hc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,us(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ko=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ko.now=$c.now;var Oo=class extends ko{constructor(e,n=ko.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var ps=new Oo(Po);var ih=class extends Po{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var sh=class extends Oo{};var v0=new sh(ih);var Lt=new se(t=>t.complete());function XC(t){return t&&K(t.schedule)}function w0(t){return t[t.length-1]}function Fo(t){return K(w0(t))?t.pop():void 0}function ar(t){return XC(w0(t))?t.pop():void 0}function JC(t,e){return typeof w0(t)=="number"?t.pop():e}var oh=t=>t&&typeof t.length=="number"&&typeof t!="function";function ah(t){return K(t?.then)}function ch(t){return K(t[Mo])}function lh(t){return Symbol.asyncIterator&&K(t?.[Symbol.asyncIterator])}function uh(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function zF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var dh=zF();function hh(t){return K(t?.[dh])}function fh(t){return DC(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield $d(n.read());if(i)return yield $d(void 0);yield yield $d(r)}}finally{n.releaseLock()}})}function ph(t){return K(t?.getReader)}function Se(t){if(t instanceof se)return t;if(t!=null){if(ch(t))return WF(t);if(oh(t))return KF(t);if(ah(t))return QF(t);if(lh(t))return e1(t);if(hh(t))return YF(t);if(ph(t))return ZF(t)}throw uh(t)}function WF(t){return new se(e=>{let n=t[Mo]();if(K(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function KF(t){return new se(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function QF(t){return new se(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Jd)})}function YF(t){return new se(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function e1(t){return new se(e=>{XF(t,e).catch(n=>e.error(n))})}function ZF(t){return e1(fh(t))}function XF(t,e){var n,r,i,s;return CC(this,void 0,void 0,function*(){try{for(n=TC(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function en(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Cn(t,e=0){return X((n,r)=>{n.subscribe(Q(r,i=>en(r,t,()=>r.next(i),e),()=>en(r,t,()=>r.complete(),e),i=>en(r,t,()=>r.error(i),e)))})}function $n(t,e=0){return X((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function t1(t,e){return Se(t).pipe($n(e),Cn(e))}function n1(t,e){return Se(t).pipe($n(e),Cn(e))}function r1(t,e){return new se(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function i1(t,e){return new se(n=>{let r;return en(n,e,()=>{r=t[dh](),en(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>K(r?.return)&&r.return()})}function gh(t,e){if(!t)throw new Error("Iterable cannot be null");return new se(n=>{en(n,e,()=>{let r=t[Symbol.asyncIterator]();en(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function s1(t,e){return gh(fh(t),e)}function o1(t,e){if(t!=null){if(ch(t))return t1(t,e);if(oh(t))return r1(t,e);if(ah(t))return n1(t,e);if(lh(t))return gh(t,e);if(hh(t))return i1(t,e);if(ph(t))return s1(t,e)}throw uh(t)}function xe(t,e){return e?o1(t,e):Se(t)}function B(...t){let e=ar(t);return xe(t,e)}function Vo(t,e){let n=K(t)?t:()=>t,r=i=>i.error(n());return new se(e?i=>e.schedule(r,0,i):r)}function b0(t){return!!t&&(t instanceof se||K(t.lift)&&K(t.subscribe))}var jr=To(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function j(t,e){return X((n,r)=>{let i=0;n.subscribe(Q(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:JF}=Array;function e4(t,e){return JF(e)?t(...e):t(e)}function mh(t){return j(e=>e4(t,e))}var{isArray:t4}=Array,{getPrototypeOf:n4,prototype:r4,keys:i4}=Object;function _h(t){if(t.length===1){let e=t[0];if(t4(e))return{args:e,keys:null};if(s4(e)){let n=i4(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function s4(t){return t&&typeof t=="object"&&n4(t)===r4}function xh(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function qc(...t){let e=ar(t),n=Fo(t),{args:r,keys:i}=_h(t);if(r.length===0)return xe([],e);let s=new se(o4(r,e,i?o=>xh(i,o):Et));return n?s.pipe(mh(n)):s}function o4(t,e,n=Et){return r=>{a1(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)a1(e,()=>{let l=xe(t[c],e),u=!1;l.subscribe(Q(r,d=>{s[c]=d,u||(u=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function a1(t,e,n){t?en(n,t,e):e()}function c1(t,e,n,r,i,s,o,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=m=>l<r?p(m):c.push(m),p=m=>{s&&e.next(m),l++;let y=!1;Se(n(m,u++)).subscribe(Q(e,C=>{i?.(C),s?f(C):e.next(C)},()=>{y=!0},void 0,()=>{if(y)try{for(l--;c.length&&l<r;){let C=c.shift();o?en(e,o,()=>p(C)):p(C)}h()}catch(C){e.error(C)}}))};return t.subscribe(Q(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Xe(t,e,n=1/0){return K(e)?Xe((r,i)=>j((s,o)=>e(r,s,i,o))(Se(t(r,i))),n):(typeof e=="number"&&(n=e),X((r,i)=>c1(r,i,t,n)))}function di(t=1/0){return Xe(Et,t)}function l1(){return di(1)}function Lo(...t){return l1()(xe(t,ar(t)))}function yh(t){return new se(e=>{Se(t()).subscribe(e)})}function E0(...t){let e=Fo(t),{args:n,keys:r}=_h(t),i=new se(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let d=!1;Se(n[u]).subscribe(Q(s,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(r?xh(r,a):a),s.complete())}))}});return e?i.pipe(mh(e)):i}function jo(...t){let e=ar(t),n=JC(t,1/0),r=t;return r.length?r.length===1?Se(r[0]):di(n)(xe(r,e)):Lt}function Ct(t,e){return X((n,r)=>{let i=0;n.subscribe(Q(r,s=>t.call(e,s,i++)&&r.next(s)))})}function hi(t){return X((e,n)=>{let r=null,i=!1,s;r=e.subscribe(Q(n,void 0,void 0,o=>{s=Se(t(o,hi(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function u1(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(Q(o,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function gs(t,e){return K(e)?Xe(t,e,1):Xe(t,1)}function fi(t){return X((e,n)=>{let r=!1;e.subscribe(Q(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Br(t){return t<=0?()=>Lt:X((e,n)=>{let r=0;e.subscribe(Q(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function I0(t){return j(()=>t)}function Gc(t,e=Et){return t=t??a4,X((n,r)=>{let i,s=!0;n.subscribe(Q(r,o=>{let a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function a4(t,e){return t===e}function vh(t=c4){return X((e,n)=>{let r=!1;e.subscribe(Q(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function c4(){return new jr}function zc(t){return X((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Dn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ct((i,s)=>t(i,s,r)):Et,Br(1),n?fi(e):vh(()=>new jr))}function Bo(t){return t<=0?()=>Lt:X((e,n)=>{let r=[];e.subscribe(Q(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function C0(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ct((i,s)=>t(i,s,r)):Et,Bo(1),n?fi(e):vh(()=>new jr))}function Wc(){return X((t,e)=>{let n,r=!1;t.subscribe(Q(e,i=>{let s=n;n=i,r&&e.next([s,i]),r=!0}))})}function cr(t,e){return X(u1(t,e,arguments.length>=2,!0))}function Kc(t={}){let{connector:e=()=>new $e,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,c,l=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=c=void 0,u=d=!1},p=()=>{let m=o;f(),m?.unsubscribe()};return X((m,y)=>{l++,!d&&!u&&h();let C=c=c??e();y.add(()=>{l--,l===0&&!d&&!u&&(a=D0(p,i))}),C.subscribe(y),!o&&l>0&&(o=new Lr({next:F=>C.next(F),error:F=>{d=!0,h(),a=D0(f,n,F),C.error(F)},complete:()=>{u=!0,h(),a=D0(f,r),C.complete()}}),Se(m).subscribe(o))})(s)}}function D0(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Lr({next:()=>{r.unsubscribe(),t()}});return Se(e(...n)).subscribe(r)}function wh(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,Kc({connector:()=>new nh(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function T0(t){return X((e,n)=>{let r=!1,i=0;e.subscribe(Q(n,s=>(r||(r=!t(s,i++)))&&n.next(s)))})}function ms(...t){let e=ar(t);return X((n,r)=>{(e?Lo(t,n,e):Lo(t,n)).subscribe(r)})}function Ve(t,e){return X((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(Q(r,c=>{i?.unsubscribe();let l=0,u=s++;Se(t(c,u)).subscribe(i=Q(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function bh(t,e){return K(e)?Ve(()=>t,e):Ve(()=>t)}function S0(t){return X((e,n)=>{Se(t).subscribe(Q(n,()=>n.complete(),ds)),!n.closed&&e.subscribe(n)})}function ut(t,e,n){let r=K(t)||e||n?{next:t,error:e,complete:n}:t;return r?X((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Q(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Et}function A0(...t){let e=Fo(t);return X((n,r)=>{let i=t.length,s=new Array(i),o=t.map(()=>!1),a=!1;for(let c=0;c<i;c++)Se(t[c]).subscribe(Q(r,l=>{s[c]=l,!a&&!o[c]&&(o[c]=!0,(a=o.every(Et))&&(o=null))},ds));n.subscribe(Q(r,c=>{if(a){let l=[c,...s];r.next(e?e(...l):l)}}))})}var Y1="https://g.co/ng/security#xss",$=class extends Error{constructor(e,n){super(N_(e,n)),this.code=e}};function N_(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function al(t){return{toString:t}.toString()}var Eh="__parameters__";function l4(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Z1(t,e,n){return al(()=>{let r=l4(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(Eh)?c[Eh]:Object.defineProperty(c,Eh,{value:[]})[Eh];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Bt=globalThis;function Ae(t){for(let e in t)if(t[e]===Ae)return e;throw Error("Could not find renamed property on target object.")}function u4(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ut(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Ut).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function d1(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var d4=Ae({__forward_ref__:Ae});function vi(t){return t.__forward_ref__=vi,t.toString=function(){return Ut(this())},t}function jt(t){return X1(t)?t():t}function X1(t){return typeof t=="function"&&t.hasOwnProperty(d4)&&t.__forward_ref__===vi}function V(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function et(t){return{providers:t.providers||[],imports:t.imports||[]}}function nf(t){return h1(t,eD)||h1(t,tD)}function J1(t){return nf(t)!==null}function h1(t,e){return t.hasOwnProperty(e)?t[e]:null}function h4(t){let e=t&&(t[eD]||t[tD]);return e||null}function f1(t){return t&&(t.hasOwnProperty(p1)||t.hasOwnProperty(f4))?t[p1]:null}var eD=Ae({\u0275prov:Ae}),p1=Ae({\u0275inj:Ae}),tD=Ae({ngInjectableDef:Ae}),f4=Ae({ngInjectorDef:Ae}),O=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=V({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function nD(t){return t&&!!t.\u0275providers}var p4=Ae({\u0275cmp:Ae}),g4=Ae({\u0275dir:Ae}),m4=Ae({\u0275pipe:Ae}),_4=Ae({\u0275mod:Ae}),Ph=Ae({\u0275fac:Ae}),Qc=Ae({__NG_ELEMENT_ID__:Ae}),g1=Ae({__NG_ENV_ID__:Ae});function rf(t){return typeof t=="string"?t:t==null?"":String(t)}function x4(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():rf(t)}function y4(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new $(-200,t)}function R_(t,e){throw new $(-201,!1)}var ce=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ce||{}),q0;function rD(){return q0}function Tn(t){let e=q0;return q0=t,e}function iD(t,e,n){let r=nf(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ce.Optional)return null;if(e!==void 0)return e;R_(t,"Injector")}var v4={},Zc=v4,G0="__NG_DI_FLAG__",kh="ngTempTokenPath",w4="ngTokenPath",b4=/\n/gm,E4="\u0275",m1="__source",Go;function I4(){return Go}function pi(t){let e=Go;return Go=t,e}function C4(t,e=ce.Default){if(Go===void 0)throw new $(-203,!1);return Go===null?iD(t,void 0,e):Go.get(t,e&ce.Optional?null:void 0,e)}function b(t,e=ce.Default){return(rD()||C4)(jt(t),e)}function P(t,e=ce.Default){return b(t,sf(e))}function sf(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function z0(t){let e=[];for(let n=0;n<t.length;n++){let r=jt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new $(900,!1);let i,s=ce.Default;for(let o=0;o<r.length;o++){let a=r[o],c=D4(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(b(i,s))}else e.push(b(r))}return e}function sD(t,e){return t[G0]=e,t.prototype[G0]=e,t}function D4(t){return t[G0]}function T4(t,e,n,r){let i=t[kh];throw e[m1]&&i.unshift(e[m1]),t.message=S4(`
`+t.message,i,n,r),t[w4]=i,t[kh]=null,t}function S4(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==E4?t.slice(2):t;let i=Ut(e);if(Array.isArray(e))i=e.map(Ut).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Ut(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(b4,`
  `)}`}var na=sD(Z1("Optional"),8);var P_=sD(Z1("SkipSelf"),4);function Wo(t,e){let n=t.hasOwnProperty(Ph);return n?t[Ph]:null}function k_(t,e){t.forEach(n=>Array.isArray(n)?k_(n,e):e(n))}function oD(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Oh(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function A4(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function M4(t,e,n){let r=cl(t,e);return r>=0?t[r|1]=n:(r=~r,A4(t,r,e,n)),r}function M0(t,e){let n=cl(t,e);if(n>=0)return t[n|1]}function cl(t,e){return N4(t,e,1)}function N4(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Ko={},Sn=[],Qo=new O(""),aD=new O("",-1),cD=new O(""),Fh=class{get(e,n=Zc){if(n===Zc){let r=new Error(`NullInjectorError: No provider for ${Ut(e)}!`);throw r.name="NullInjectorError",r}return n}},lD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(lD||{}),dr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(dr||{}),Mt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Mt||{});function R4(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function W0(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];P4(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function uD(t){return t===3||t===4||t===6}function P4(t){return t.charCodeAt(0)===64}function Xc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?_1(t,n,i,null,e[++r]):_1(t,n,i,null,null))}}return t}function _1(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var dD="ng-template";function k4(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&R4(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(O_(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function O_(t){return t.type===4&&t.value!==dD}function O4(t,e,n){let r=t.type===4&&!n?dD:t.value;return e===r}function F4(t,e,n){let r=4,i=t.attrs,s=i!==null?j4(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Hn(r)&&!Hn(c))return!1;if(o&&Hn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!O4(t,c,n)||c===""&&e.length===1){if(Hn(r))return!1;o=!0}}else if(r&8){if(i===null||!k4(t,i,c,n)){if(Hn(r))return!1;o=!0}}else{let l=e[++a],u=V4(c,i,O_(t),n);if(u===-1){if(Hn(r))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Hn(r))return!1;o=!0}}}}return Hn(r)||o}function Hn(t){return(t&1)===0}function V4(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return B4(e,t)}function L4(t,e,n=!1){for(let r=0;r<e.length;r++)if(F4(t,e[r],n))return!0;return!1}function j4(t){for(let e=0;e<t.length;e++){let n=t[e];if(uD(n))return e}return t.length}function B4(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function x1(t,e){return t?":not("+e.trim()+")":e}function U4(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Hn(o)&&(e+=x1(s,i),i=""),r=o,s=s||!Hn(r);n++}return i!==""&&(e+=x1(s,i)),e}function $4(t){return t.map(U4).join(",")}function H4(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Hn(i))break;i=s}r++}return{attrs:e,classes:n}}function tn(t){return al(()=>{let e=mD(t),n=ie(A({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===lD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||dr.Emulated,styles:t.styles||Sn,_:null,schemas:t.schemas||null,tView:null,id:""});_D(n);let r=t.dependencies;return n.directiveDefs=v1(r,!1),n.pipeDefs=v1(r,!0),n.id=z4(n),n})}function q4(t){return mi(t)||hD(t)}function G4(t){return t!==null}function tt(t){return al(()=>({type:t.type,bootstrap:t.bootstrap||Sn,declarations:t.declarations||Sn,imports:t.imports||Sn,exports:t.exports||Sn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function y1(t,e){if(t==null)return Ko;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Mt.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Mt.None?[r,a]:r,e[s]=o):n[s]=r}return n}function pt(t){return al(()=>{let e=mD(t);return _D(e),e})}function mi(t){return t[p4]||null}function hD(t){return t[g4]||null}function fD(t){return t[m4]||null}function pD(t){let e=mi(t)||hD(t)||fD(t);return e!==null?e.standalone:!1}function gD(t,e){let n=t[_4]||null;if(!n&&e===!0)throw new Error(`Type ${Ut(t)} does not have '\u0275mod' property.`);return n}function mD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ko,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Sn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:y1(t.inputs,e),outputs:y1(t.outputs),debugInfo:null}}function _D(t){t.features?.forEach(e=>e(t))}function v1(t,e){if(!t)return null;let n=e?fD:q4;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(G4)}function z4(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function W4(...t){return{\u0275providers:xD(!0,t),\u0275fromNgModule:!0}}function xD(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return k_(e,o=>{let a=o;K0(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&yD(i,s),n}function yD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];F_(i,s=>{e(s,r)})}}function K0(t,e,n,r){if(t=jt(t),!t)return!1;let i=null,s=f1(t),o=!s&&mi(t);if(!s&&!o){let c=t.ngModule;if(s=f1(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)K0(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{k_(s.imports,u=>{K0(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&yD(l,e)}if(!a){let l=Wo(i)||(()=>new i);e({provide:i,useFactory:l,deps:Sn},i),e({provide:cD,useValue:i,multi:!0},i),e({provide:Qo,useValue:()=>b(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;F_(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function F_(t,e){for(let n of t)nD(n)&&(n=n.\u0275providers),Array.isArray(n)?F_(n,e):e(n)}var K4=Ae({provide:String,useValue:Ae});function vD(t){return t!==null&&typeof t=="object"&&K4 in t}function Q4(t){return!!(t&&t.useExisting)}function Y4(t){return!!(t&&t.useFactory)}function Yo(t){return typeof t=="function"}function Z4(t){return!!t.useClass}var of=new O(""),Sh={},X4={},N0;function V_(){return N0===void 0&&(N0=new Fh),N0}var hn=class{},Jc=class extends hn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Y0(e,o=>this.processProvider(o)),this.records.set(aD,Uo(void 0,this)),i.has("environment")&&this.records.set(hn,Uo(void 0,this));let s=this.records.get(of);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(cD,Sn,ce.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=be(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),be(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=pi(this),r=Tn(void 0),i;try{return e()}finally{pi(n),Tn(r)}}get(e,n=Zc,r=ce.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(g1))return e[g1](this);r=sf(r);let i,s=pi(this),o=Tn(void 0);try{if(!(r&ce.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=r5(e)&&nf(e);l&&this.injectableDefInScope(l)?c=Uo(Q0(e),Sh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ce.Self?V_():this.parent;return n=r&ce.Optional&&n===Zc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[kh]=a[kh]||[]).unshift(Ut(e)),s)throw a;return T4(a,e,"R3InjectorError",this.source)}else throw a}finally{Tn(o),pi(s)}}resolveInjectorInitializers(){let e=be(null),n=pi(this),r=Tn(void 0),i;try{let s=this.get(Qo,Sn,ce.Self);for(let o of s)o()}finally{pi(n),Tn(r),be(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Ut(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $(205,!1)}processProvider(e){e=jt(e);let n=Yo(e)?e:jt(e&&e.provide),r=e5(e);if(!Yo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Uo(void 0,Sh,!0),i.factory=()=>z0(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=be(null);try{return n.value===Sh&&(n.value=X4,n.value=n.factory()),typeof n.value=="object"&&n.value&&n5(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{be(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=jt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Q0(t){let e=nf(t),n=e!==null?e.factory:Wo(t);if(n!==null)return n;if(t instanceof O)throw new $(204,!1);if(t instanceof Function)return J4(t);throw new $(204,!1)}function J4(t){if(t.length>0)throw new $(204,!1);let n=h4(t);return n!==null?()=>n.factory(t):()=>new t}function e5(t){if(vD(t))return Uo(void 0,t.useValue);{let e=wD(t);return Uo(e,Sh)}}function wD(t,e,n){let r;if(Yo(t)){let i=jt(t);return Wo(i)||Q0(i)}else if(vD(t))r=()=>jt(t.useValue);else if(Y4(t))r=()=>t.useFactory(...z0(t.deps||[]));else if(Q4(t))r=()=>b(jt(t.useExisting));else{let i=jt(t&&(t.useClass||t.provide));if(t5(t))r=()=>new i(...z0(t.deps));else return Wo(i)||Q0(i)}return r}function Uo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function t5(t){return!!t.deps}function n5(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function r5(t){return typeof t=="function"||typeof t=="object"&&t instanceof O}function Y0(t,e){for(let n of t)Array.isArray(n)?Y0(n,e):n&&nD(n)?Y0(n.\u0275providers,e):e(n)}function Hr(t,e){t instanceof Jc&&t.assertNotDestroyed();let n,r=pi(t),i=Tn(void 0);try{return e()}finally{pi(r),Tn(i)}}function bD(){return rD()!==void 0||I4()!=null}function i5(t){if(!bD())throw new $(-203,!1)}function s5(t){let e=Bt.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function o5(t){return typeof t=="function"}var qr=0,pe=1,z=2,Nt=3,qn=4,Wn=5,Vh=6,el=7,Gn=8,Zo=9,zn=10,Je=11,tl=12,w1=13,ra=14,hr=15,af=16,$o=17,Xo=18,cf=19,ED=20,gi=21,R0=22,ys=23,_i=25,ID=1;var vs=7,Lh=8,jh=9,An=10,L_=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(L_||{});function _s(t){return Array.isArray(t)&&typeof t[ID]=="object"}function Gr(t){return Array.isArray(t)&&t[ID]===!0}function CD(t){return(t.flags&4)!==0}function lf(t){return t.componentOffset>-1}function j_(t){return(t.flags&1)===1}function xi(t){return!!t.template}function a5(t){return(t[z]&512)!==0}var Z0=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function DD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Ds(){return TD}function TD(t){return t.type.prototype.ngOnChanges&&(t.setInput=l5),c5}Ds.ngInherit=!0;function c5(){let t=AD(this),e=t?.current;if(e){let n=t.previous;if(n===Ko)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function l5(t,e,n,r,i){let s=this.declaredInputs[r],o=AD(t)||u5(t,{previous:Ko,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Z0(l&&l.currentValue,n,c===Ko),DD(t,e,i,n)}var SD="__ngSimpleChanges__";function AD(t){return t[SD]||null}function u5(t,e){return t[SD]=e}var b1=null;var lr=function(t,e,n){b1?.(t,e,n)},d5="svg",h5="math",f5=!1;function p5(){return f5}function fr(t){for(;Array.isArray(t);)t=t[qr];return t}function MD(t,e){return fr(e[t])}function Mn(t,e){return fr(e[t.index])}function ND(t,e){return t.data[e]}function wi(t,e){let n=e[t];return _s(n)?n:n[qr]}function B_(t){return(t[z]&128)===128}function g5(t){return Gr(t[Nt])}function Bh(t,e){return e==null?null:t[e]}function RD(t){t[$o]=0}function m5(t){t[z]&1024||(t[z]|=1024,B_(t)&&nl(t))}function _5(t,e){for(;t>0;)e=e[ra],t--;return e}function U_(t){return!!(t[z]&9216||t[ys]?.dirty)}function X0(t){t[zn].changeDetectionScheduler?.notify(1),U_(t)?nl(t):t[z]&64&&(p5()?(t[z]|=1024,nl(t)):t[zn].changeDetectionScheduler?.notify())}function nl(t){t[zn].changeDetectionScheduler?.notify();let e=rl(t);for(;e!==null&&!(e[z]&8192||(e[z]|=8192,!B_(e)));)e=rl(e)}function PD(t,e){if((t[z]&256)===256)throw new $(911,!1);t[gi]===null&&(t[gi]=[]),t[gi].push(e)}function x5(t,e){if(t[gi]===null)return;let n=t[gi].indexOf(e);n!==-1&&t[gi].splice(n,1)}function rl(t){let e=t[Nt];return Gr(e)?e[Nt]:e}var de={lFrame:BD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function y5(){return de.lFrame.elementDepthCount}function v5(){de.lFrame.elementDepthCount++}function w5(){de.lFrame.elementDepthCount--}function kD(){return de.bindingsEnabled}function b5(){return de.skipHydrationRootTNode!==null}function E5(t){return de.skipHydrationRootTNode===t}function I5(){de.skipHydrationRootTNode=null}function Me(){return de.lFrame.lView}function nn(){return de.lFrame.tView}function $t(t){return de.lFrame.contextLView=t,t[Gn]}function Ht(t){return de.lFrame.contextLView=null,t}function rn(){let t=OD();for(;t!==null&&t.type===64;)t=t.parent;return t}function OD(){return de.lFrame.currentTNode}function C5(){let t=de.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ll(t,e){let n=de.lFrame;n.currentTNode=t,n.isParent=e}function FD(){return de.lFrame.isParent}function D5(){de.lFrame.isParent=!1}function T5(){let t=de.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function S5(t){return de.lFrame.bindingIndex=t}function uf(){return de.lFrame.bindingIndex++}function A5(t){let e=de.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function M5(){return de.lFrame.inI18n}function N5(t,e){let n=de.lFrame;n.bindingIndex=n.bindingRootIndex=t,J0(e)}function R5(){return de.lFrame.currentDirectiveIndex}function J0(t){de.lFrame.currentDirectiveIndex=t}function P5(t){let e=de.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function VD(t){de.lFrame.currentQueryIndex=t}function k5(t){let e=t[pe];return e.type===2?e.declTNode:e.type===1?t[Wn]:null}function LD(t,e,n){if(n&ce.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&ce.Host);)if(i=k5(s),i===null||(s=s[ra],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=de.lFrame=jD();return r.currentTNode=e,r.lView=t,!0}function $_(t){let e=jD(),n=t[pe];de.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function jD(){let t=de.lFrame,e=t===null?null:t.child;return e===null?BD(t):e}function BD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function UD(){let t=de.lFrame;return de.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var $D=UD;function H_(){let t=UD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function O5(t){return(de.lFrame.contextLView=_5(t,de.lFrame.contextLView))[Gn]}function ia(){return de.lFrame.selectedIndex}function ws(t){de.lFrame.selectedIndex=t}function df(){let t=de.lFrame;return ND(t.tView,t.selectedIndex)}function F5(){return de.lFrame.currentNamespace}var HD=!0;function q_(){return HD}function G_(t){HD=t}function V5(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=TD(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function z_(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Ah(t,e,n){qD(t,e,3,n)}function Mh(t,e,n,r){(t[z]&3)===n&&qD(t,e,n,r)}function P0(t,e){let n=t[z];(n&3)===e&&(n&=16383,n+=1,t[z]=n)}function qD(t,e,n,r){let i=r!==void 0?t[$o]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[$o]+=65536),(a<s||s==-1)&&(L5(t,n,e,c),t[$o]=(t[$o]&4294901760)+c+2),c++}function E1(t,e){lr(4,t,e);let n=be(null);try{e.call(t)}finally{be(n),lr(5,t,e)}}function L5(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[z]>>14<t[$o]>>16&&(t[z]&3)===e&&(t[z]+=16384,E1(a,s)):E1(a,s)}var zo=-1,bs=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function j5(t){return t instanceof bs}function B5(t){return(t.flags&8)!==0}function U5(t){return(t.flags&16)!==0}function GD(t){return t!==zo}function Uh(t){return t&32767}function $5(t){return t>>16}function $h(t,e){let n=$5(t),r=e;for(;n>0;)r=r[ra],n--;return r}var e_=!0;function I1(t){let e=e_;return e_=t,e}var H5=256,zD=H5-1,WD=5,q5=0,ur={};function G5(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Qc)&&(r=n[Qc]),r==null&&(r=n[Qc]=q5++);let i=r&zD,s=1<<i;e.data[t+(i>>WD)]|=s}function Hh(t,e){let n=KD(t,e);if(n!==-1)return n;let r=e[pe];r.firstCreatePass&&(t.injectorIndex=e.length,k0(r.data,t),k0(e,null),k0(r.blueprint,null));let i=W_(t,e),s=t.injectorIndex;if(GD(i)){let o=Uh(i),a=$h(i,e),c=a[pe].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function k0(t,e){t.push(0,0,0,0,0,0,0,0,e)}function KD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function W_(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=JD(i),r===null)return zo;if(n++,i=i[ra],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return zo}function t_(t,e,n){G5(t,e,n)}function z5(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(uD(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function QD(t,e,n){if(n&ce.Optional||t!==void 0)return t;R_(e,"NodeInjector")}function YD(t,e,n,r){if(n&ce.Optional&&r===void 0&&(r=null),!(n&(ce.Self|ce.Host))){let i=t[Zo],s=Tn(void 0);try{return i?i.get(e,r,n&ce.Optional):iD(e,r,n&ce.Optional)}finally{Tn(s)}}return QD(r,e,n)}function ZD(t,e,n,r=ce.Default,i){if(t!==null){if(e[z]&2048&&!(r&ce.Self)){let o=Z5(t,e,n,r,ur);if(o!==ur)return o}let s=XD(t,e,n,r,ur);if(s!==ur)return s}return YD(e,n,r,i)}function XD(t,e,n,r,i){let s=Q5(n);if(typeof s=="function"){if(!LD(e,t,r))return r&ce.Host?QD(i,n,r):YD(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&ce.Optional))R_(n);else return o}finally{$D()}}else if(typeof s=="number"){let o=null,a=KD(t,e),c=zo,l=r&ce.Host?e[hr][Wn]:null;for((a===-1||r&ce.SkipSelf)&&(c=a===-1?W_(t,e):e[a+8],c===zo||!D1(r,!1)?a=-1:(o=e[pe],a=Uh(c),e=$h(c,e)));a!==-1;){let u=e[pe];if(C1(s,a,u.data)){let d=W5(a,e,n,o,r,l);if(d!==ur)return d}c=e[a+8],c!==zo&&D1(r,e[pe].data[a+8]===l)&&C1(s,a,e)?(o=u,a=Uh(c),e=$h(c,e)):a=-1}}return i}function W5(t,e,n,r,i,s){let o=e[pe],a=o.data[t+8],c=r==null?lf(a)&&e_:r!=o&&(a.type&3)!==0,l=i&ce.Host&&s===a,u=K5(a,o,n,c,l);return u!==null?Jo(e,o,u,a):ur}function K5(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,u=s>>20,d=r?a:a+u,h=i?a+u:l;for(let f=d;f<h;f++){let p=o[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(i){let f=o[c];if(f&&xi(f)&&f.type===n)return c}return null}function Jo(t,e,n,r){let i=t[n],s=e.data;if(j5(i)){let o=i;o.resolving&&y4(x4(s[n]));let a=I1(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?Tn(o.injectImpl):null,u=LD(t,r,ce.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&V5(n,s[n],e)}finally{l!==null&&Tn(l),I1(a),o.resolving=!1,$D()}}return i}function Q5(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Qc)?t[Qc]:void 0;return typeof e=="number"?e>=0?e&zD:Y5:e}function C1(t,e,n){let r=1<<t;return!!(n[e+(t>>WD)]&r)}function D1(t,e){return!(t&ce.Self)&&!(t&ce.Host&&e)}var xs=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return ZD(this._tNode,this._lView,e,sf(r),n)}};function Y5(){return new xs(rn(),Me())}function bi(t){return al(()=>{let e=t.prototype.constructor,n=e[Ph]||n_(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Ph]||n_(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function n_(t){return X1(t)?()=>{let e=n_(jt(t));return e&&e()}:Wo(t)}function Z5(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[z]&2048&&!(o[z]&512);){let a=XD(s,o,n,r|ce.Self,ur);if(a!==ur)return a;let c=s.parent;if(!c){let l=o[ED];if(l){let u=l.get(n,ur,r);if(u!==ur)return u}c=JD(o),o=o[ra]}s=c}return i}function JD(t){let e=t[pe],n=e.type;return n===2?e.declTNode:n===1?t[Wn]:null}function K_(t){return z5(rn(),t)}function T1(t,e=null,n=null,r){let i=eT(t,e,n,r);return i.resolveInjectorInitializers(),i}function eT(t,e=null,n=null,r,i=new Set){let s=[n||Sn,W4(t)];return r=r||(typeof t=="object"?void 0:Ut(t)),new Jc(s,e||V_(),r||null,i)}var Kn=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return T1({name:""},i,r,"");{let s=r.name??"";return T1({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=Zc,e.NULL=new Fh,e.\u0275prov=V({token:e,providedIn:"any",factory:()=>b(aD)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var X5="ngOriginalError";function O0(t){return t[X5]}var pr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&O0(e);for(;n&&O0(n);)n=O0(n);return n||null}},tT=new O("",{providedIn:"root",factory:()=>P(pr).handleError.bind(void 0)}),Q_=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=J5,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),r_=class extends Q_{constructor(e){super(),this._lView=e}onDestroy(e){return PD(this._lView,e),()=>x5(this._lView,e)}};function J5(){return new r_(Me())}function e3(){return hf(rn(),Me())}function hf(t,e){return new Qn(Mn(t,e))}var Qn=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=e3;let t=e;return t})();var i_=class extends $e{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,bD()&&(this.destroyRef=P(Q_,{optional:!0})??void 0)}emit(e){let n=be(null);try{super.next(e)}finally{be(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=F0(s),i&&(i=F0(i)),o&&(o=F0(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof ze&&e.add(a),a}};function F0(t){return e=>{setTimeout(t,void 0,e)}}var dt=i_;function nT(t){return(t.flags&128)===128}var s_;function rT(t){s_=t}function t3(){if(s_!==void 0)return s_;if(typeof document<"u")return document;throw new $(210,!1)}var ff=new O("",{providedIn:"root",factory:()=>n3}),n3="ng",Y_=new O(""),Rt=new O("",{providedIn:"platform",factory:()=>"unknown"});var Z_=new O("",{providedIn:"root",factory:()=>t3().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var r3="h",i3="b";var s3=()=>null;function X_(t,e,n=!1){return s3(t,e,n)}var iT=!1,o3=new O("",{providedIn:"root",factory:()=>iT});var Ih;function a3(){if(Ih===void 0&&(Ih=null,Bt.trustedTypes))try{Ih=Bt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Ih}function S1(t){return a3()?.createScriptURL(t)||t}var qh=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Y1})`}};function ul(t){return t instanceof qh?t.changingThisBreaksApplicationSecurity:t}function J_(t,e){let n=c3(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Y1})`)}return n===e}function c3(t){return t instanceof qh&&t.getTypeName()||null}var l3=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function sT(t){return t=String(t),t.match(l3)?t:"unsafe:"+t}var pf=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(pf||{});function u3(t){let e=aT();return e?e.sanitize(pf.URL,t)||"":J_(t,"URL")?ul(t):sT(rf(t))}function d3(t){let e=aT();if(e)return S1(e.sanitize(pf.RESOURCE_URL,t)||"");if(J_(t,"ResourceURL"))return S1(ul(t));throw new $(904,!1)}function h3(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?d3:u3}function oT(t,e,n){return h3(e,n)(t)}function aT(){let t=Me();return t&&t[zn].sanitizer}var cT=new Map,f3=0;function p3(){return f3++}function g3(t){cT.set(t[cf],t)}function m3(t){cT.delete(t[cf])}var A1="__ngContext__";function Es(t,e){_s(e)?(t[A1]=e[cf],g3(e)):t[A1]=e}function lT(t){return t instanceof Function?t():t}function _3(t){return(t??P(Kn)).get(Rt)==="browser"}var Ur=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ur||{}),x3;function ex(t,e){return x3(t,e)}function Ho(t,e,n,r,i){if(r!=null){let s,o=!1;Gr(r)?s=r:_s(r)&&(o=!0,r=r[qr]);let a=fr(r);t===0&&n!==null?i==null?pT(e,n,a):Gh(e,n,a,i||null,!0):t===1&&n!==null?Gh(e,n,a,i||null,!0):t===2?O3(e,a,o):t===3&&e.destroyNode(a),s!=null&&V3(e,t,s,n,i)}}function y3(t,e){return t.createText(e)}function v3(t,e,n){t.setValue(e,n)}function uT(t,e,n){return t.createElement(e,n)}function w3(t,e){dT(t,e),e[qr]=null,e[Wn]=null}function b3(t,e,n,r,i,s){r[qr]=i,r[Wn]=e,gf(t,r,n,1,i,s)}function dT(t,e){e[zn].changeDetectionScheduler?.notify(1),gf(t,e,e[Je],2,null,null)}function E3(t){let e=t[tl];if(!e)return V0(t[pe],t);for(;e;){let n=null;if(_s(e))n=e[tl];else{let r=e[An];r&&(n=r)}if(!n){for(;e&&!e[qn]&&e!==t;)_s(e)&&V0(e[pe],e),e=e[Nt];e===null&&(e=t),_s(e)&&V0(e[pe],e),n=e&&e[qn]}e=n}}function I3(t,e,n,r){let i=An+r,s=n.length;r>0&&(n[i-1][qn]=e),r<s-An?(e[qn]=n[i],oD(n,An+r,e)):(n.push(e),e[qn]=null),e[Nt]=n;let o=e[af];o!==null&&n!==o&&C3(o,e);let a=e[Xo];a!==null&&a.insertView(t),X0(e),e[z]|=128}function C3(t,e){let n=t[jh],i=e[Nt][Nt][hr];e[hr]!==i&&(t[z]|=L_.HasTransplantedViews),n===null?t[jh]=[e]:n.push(e)}function hT(t,e){let n=t[jh],r=n.indexOf(e);n.splice(r,1)}function o_(t,e){if(t.length<=An)return;let n=An+e,r=t[n];if(r){let i=r[af];i!==null&&i!==t&&hT(i,r),e>0&&(t[n-1][qn]=r[qn]);let s=Oh(t,An+e);w3(r[pe],r);let o=s[Xo];o!==null&&o.detachView(s[pe]),r[Nt]=null,r[qn]=null,r[z]&=-129}return r}function fT(t,e){if(!(e[z]&256)){let n=e[Je];n.destroyNode&&gf(t,e,n,3,null,null),E3(e)}}function V0(t,e){if(e[z]&256)return;let n=be(null);try{e[z]&=-129,e[z]|=256,e[ys]&&HC(e[ys]),T3(t,e),D3(t,e),e[pe].type===1&&e[Je].destroy();let r=e[af];if(r!==null&&Gr(e[Nt])){r!==e[Nt]&&hT(r,e);let i=e[Xo];i!==null&&i.detachView(t)}m3(e)}finally{be(n)}}function D3(t,e){let n=t.cleanup,r=e[el];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[el]=null);let i=e[gi];if(i!==null){e[gi]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function T3(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof bs)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];lr(4,a,c);try{c.call(a)}finally{lr(5,a,c)}}else{lr(4,i,s);try{s.call(i)}finally{lr(5,i,s)}}}}}function S3(t,e,n){return A3(t,e.parent,n)}function A3(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[qr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===dr.None||s===dr.Emulated)return null}return Mn(r,n)}}function Gh(t,e,n,r,i){t.insertBefore(e,n,r,i)}function pT(t,e,n){t.appendChild(e,n)}function M1(t,e,n,r,i){r!==null?Gh(t,e,n,r,i):pT(t,e,n)}function M3(t,e,n,r){t.removeChild(e,n,r)}function tx(t,e){return t.parentNode(e)}function N3(t,e){return t.nextSibling(e)}function R3(t,e,n){return k3(t,e,n)}function P3(t,e,n){return t.type&40?Mn(t,n):null}var k3=P3,N1;function nx(t,e,n,r){let i=S3(t,r,e),s=e[Je],o=r.parent||e[Wn],a=R3(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)M1(s,i,n[c],a,!1);else M1(s,i,n,a,!1);N1!==void 0&&N1(s,r,e,n,i)}function Nh(t,e){if(e!==null){let n=e.type;if(n&3)return Mn(e,t);if(n&4)return a_(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Nh(t,r);{let i=t[e.index];return Gr(i)?a_(-1,i):fr(i)}}else{if(n&32)return ex(e,t)()||fr(t[e.index]);{let r=gT(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=rl(t[hr]);return Nh(i,r)}else return Nh(t,e.next)}}}return null}function gT(t,e){if(e!==null){let r=t[hr][Wn],i=e.projection;return r.projection[i]}return null}function a_(t,e){let n=An+t+1;if(n<e.length){let r=e[n],i=r[pe].firstChild;if(i!==null)return Nh(r,i)}return e[vs]}function O3(t,e,n){let r=tx(t,e);r&&M3(t,r,e,n)}function rx(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Es(fr(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)rx(t,e,n.child,r,i,s,!1),Ho(e,t,i,a,s);else if(c&32){let l=ex(n,r),u;for(;u=l();)Ho(e,t,i,u,s);Ho(e,t,i,a,s)}else c&16?F3(t,e,r,n,i,s):Ho(e,t,i,a,s);n=o?n.projectionNext:n.next}}function gf(t,e,n,r,i,s){rx(n,r,t.firstChild,e,i,s,!1)}function F3(t,e,n,r,i,s){let o=n[hr],c=o[Wn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Ho(e,t,i,u,s)}else{let l=c,u=o[Nt];nT(r)&&(l.flags|=128),rx(t,e,l,u,i,s,!0)}}function V3(t,e,n,r,i){let s=n[vs],o=fr(n);s!==o&&Ho(e,t,r,s,i);for(let a=An;a<n.length;a++){let c=n[a];gf(c[pe],c,t,e,r,s)}}function L3(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Ur.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ur.Important),t.setStyle(n,r,i,s))}}function j3(t,e,n){t.setAttribute(e,"style",n)}function mT(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function _T(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&W0(t,e,r),i!==null&&mT(t,e,i),s!==null&&j3(t,e,s)}var Ei={};function q(t=1){xT(nn(),Me(),ia()+t,!1)}function xT(t,e,n,r){if(!r)if((e[z]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Ah(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Mh(e,s,0,n)}ws(n)}function te(t,e=ce.Default){let n=Me();if(n===null)return b(t,e);let r=rn();return ZD(r,n,jt(t),e)}function yT(){let t="invalid";throw new Error(t)}function vT(t,e,n,r,i,s){let o=be(null);try{let a=null;i&Mt.SignalBased&&(a=e[r][a0]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Mt.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):DD(e,a,r,s)}finally{be(o)}}function B3(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ws(~i);else{let s=i,o=n[++r],a=n[++r];N5(o,s);let c=e[s];a(2,c)}}}finally{ws(-1)}}function mf(t,e,n,r,i,s,o,a,c,l,u){let d=e.blueprint.slice();return d[qr]=i,d[z]=r|4|128|8|64,(l!==null||t&&t[z]&2048)&&(d[z]|=2048),RD(d),d[Nt]=d[ra]=t,d[Gn]=n,d[zn]=o||t&&t[zn],d[Je]=a||t&&t[Je],d[Zo]=c||t&&t[Zo]||null,d[Wn]=s,d[cf]=p3(),d[Vh]=u,d[ED]=l,d[hr]=e.type==2?t[hr]:d,d}function _f(t,e,n,r,i){let s=t.data[e];if(s===null)s=U3(t,e,n,r,i),M5()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=C5();s.injectorIndex=o===null?-1:o.injectorIndex}return ll(s,!0),s}function U3(t,e,n,r,i){let s=OD(),o=FD(),a=o?s:s&&s.parent,c=t.data[e]=z3(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function wT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function bT(t,e,n,r,i){let s=ia(),o=r&2;try{ws(-1),o&&e.length>_i&&xT(t,e,_i,!1),lr(o?2:0,i),n(r,i)}finally{ws(s),lr(o?3:1,i)}}function ET(t,e,n){if(CD(e)){let r=be(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{be(r)}}}function IT(t,e,n){kD()&&(X3(t,e,n,Mn(n,e)),(n.flags&64)===64&&AT(t,e,n))}function CT(t,e,n=Mn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function DT(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=ix(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function ix(t,e,n,r,i,s,o,a,c,l,u){let d=_i+r,h=d+i,f=$3(d,h),p=typeof l=="function"?l():l;return f[pe]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function $3(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ei);return n}function H3(t,e,n,r){let s=r.get(o3,iT)||n===dr.ShadowDom,o=t.selectRootElement(e,s);return q3(o),o}function q3(t){G3(t)}var G3=()=>null;function z3(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return b5()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function R1(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Mt.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?P1(r,n,l,a,c):P1(r,n,l,a)}return r}function P1(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function W3(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=s[u],h=n?n.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;c=R1(0,d.inputs,u,c,f),l=R1(1,d.outputs,u,l,p);let m=c!==null&&o!==null&&!O_(e)?lV(c,u,o):null;a.push(m)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function K3(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function sx(t,e,n,r,i,s,o,a){let c=Mn(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(ox(t,n,u,r,i),lf(e)&&Q3(n,e.index)):e.type&3?(r=K3(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function Q3(t,e){let n=wi(e,t);n[z]&16||(n[z]|=64)}function TT(t,e,n,r){if(kD()){let i=r===null?null:{"":-1},s=eV(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&ST(t,e,n,o,i,a),i&&tV(n,r,i)}n.mergedAttrs=Xc(n.mergedAttrs,n.attrs)}function ST(t,e,n,r,i,s){for(let l=0;l<r.length;l++)t_(Hh(n,e),t,r[l].type);rV(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=wT(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=Xc(n.mergedAttrs,u.hostAttrs),iV(t,n,e,c,u),nV(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}W3(t,n,s)}function Y3(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;Z3(o)!=a&&o.push(a),o.push(n,r,s)}}function Z3(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function X3(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;lf(n)&&sV(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Hh(n,e),Es(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=Jo(e,t,a,n);if(Es(l,e),o!==null&&cV(e,a-i,l,c,n,o),xi(c)){let u=wi(n.index,e);u[Gn]=Jo(e,t,a,n)}}}function AT(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=R5();try{ws(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];J0(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&J3(c,l)}}finally{ws(-1),J0(o)}}function J3(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function eV(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(L4(e,o.selectors,!1))if(r||(r=[]),xi(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;c_(t,e,c)}else r.unshift(o),c_(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function c_(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function tV(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new $(-301,!1);r.push(e[i],s)}}}function nV(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;xi(e)&&(n[""]=t)}}function rV(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function iV(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Wo(i.type,!0)),o=new bs(s,xi(i),te);t.blueprint[r]=o,n[r]=o,Y3(t,e,r,wT(t,n,i.hostVars,Ei),i)}function sV(t,e,n){let r=Mn(e,t),i=DT(n),s=t[zn].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=xf(t,mf(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function oV(t,e,n,r,i,s){let o=Mn(t,e);aV(e[Je],o,s,t.value,n,r,i)}function aV(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?rf(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function cV(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];vT(r,n,c,l,u,d)}}function lV(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function MT(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function NT(t,e){let n=t.contentQueries;if(n!==null){let r=be(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];VD(s),a.contentQueries(2,e[o],o)}}}finally{be(r)}}}function xf(t,e){return t[tl]?t[w1][qn]=e:t[tl]=e,t[w1]=e,e}function l_(t,e,n){VD(0);let r=be(null);try{e(t,n)}finally{be(r)}}function uV(t){return t[el]||(t[el]=[])}function dV(t){return t.cleanup||(t.cleanup=[])}function RT(t,e){let n=t[Zo],r=n?n.get(pr,null):null;r&&r.handleError(e)}function ox(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],u=t.data[o];vT(u,l,r,a,c,i)}}function hV(t,e,n){let r=MD(e,t);v3(t[Je],r,n)}function fV(t,e){let n=wi(e,t),r=n[pe];pV(r,n);let i=n[qr];i!==null&&n[Vh]===null&&(n[Vh]=X_(i,n[Zo])),ax(r,n,n[Gn])}function pV(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function ax(t,e,n){$_(e);try{let r=t.viewQuery;r!==null&&l_(1,r,n);let i=t.template;i!==null&&bT(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Xo]?.finishViewCreation(t),t.staticContentQueries&&NT(t,e),t.staticViewQueries&&l_(2,t.viewQuery,n);let s=t.components;s!==null&&gV(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[z]&=-5,H_()}}function gV(t,e){for(let n=0;n<e.length;n++)fV(t,e[n])}function mV(t,e,n,r){let i=be(null);try{let s=e.tView,a=t[z]&4096?4096:16,c=mf(t,s,n,a,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),l=t[e.index];c[af]=l;let u=t[Xo];return u!==null&&(c[Xo]=u.createEmbeddedView(s)),ax(s,c,n),c}finally{be(i)}}function k1(t,e){return!e||e.firstChild===null||nT(t)}function _V(t,e,n,r=!0){let i=e[pe];if(I3(i,e,t,n),r){let o=a_(n,t),a=e[Je],c=tx(a,t[vs]);c!==null&&b3(i,t[Wn],a,e,c,o)}let s=e[Vh];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function zh(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(fr(s)),Gr(s)&&xV(s,r);let o=n.type;if(o&8)zh(t,e,n.child,r);else if(o&32){let a=ex(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=gT(e,n);if(Array.isArray(a))r.push(...a);else{let c=rl(e[hr]);zh(c[pe],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function xV(t,e){for(let n=An;n<t.length;n++){let r=t[n],i=r[pe].firstChild;i!==null&&zh(r[pe],r,i,e)}t[vs]!==t[qr]&&e.push(t[vs])}var PT=[];function yV(t){return t[ys]??vV(t)}function vV(t){let e=PT.pop()??Object.create(bV);return e.lView=t,e}function wV(t){t.lView[ys]!==t&&(t.lView=null,PT.push(t))}var bV=ie(A({},BC),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{nl(t.lView)},consumerOnSignalRead(){this.lView[ys]=this}});function kT(t){return FT(t[tl])}function OT(t){return FT(t[qn])}function FT(t){for(;t!==null&&!Gr(t);)t=t[qn];return t}var VT=100;function LT(t,e=!0,n=0){let r=t[zn],i=r.rendererFactory,s=!1;s||i.begin?.();try{EV(t,n)}catch(o){throw e&&RT(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function EV(t,e){u_(t,e);let n=0;for(;U_(t);){if(n===VT)throw new $(103,!1);n++,u_(t,1)}}function IV(t,e,n,r){let i=e[z];if((i&256)===256)return;let s=!1;!s&&e[zn].inlineEffectRunner?.flush(),$_(e);let o=null,a=null;!s&&CV(t)&&(a=yV(e),o=UC(a));try{RD(e),S5(t.bindingStartIndex),n!==null&&bT(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&Ah(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Mh(e,d,0,null),P0(e,0)}if(DV(e),jT(e,0),t.contentQueries!==null&&NT(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&Ah(e,d)}else{let d=t.contentHooks;d!==null&&Mh(e,d,1),P0(e,1)}B3(t,e);let l=t.components;l!==null&&UT(e,l,0);let u=t.viewQuery;if(u!==null&&l_(2,u,r),!s)if(c){let d=t.viewCheckHooks;d!==null&&Ah(e,d)}else{let d=t.viewHooks;d!==null&&Mh(e,d,2),P0(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[R0]){for(let d of e[R0])d();e[R0]=null}s||(e[z]&=-73)}catch(c){throw nl(e),c}finally{a!==null&&($C(a,o),wV(a)),H_()}}function CV(t){return t.type!==2}function jT(t,e){for(let n=kT(t);n!==null;n=OT(n))for(let r=An;r<n.length;r++){let i=n[r];BT(i,e)}}function DV(t){for(let e=kT(t);e!==null;e=OT(e)){if(!(e[z]&L_.HasTransplantedViews))continue;let n=e[jh];for(let r=0;r<n.length;r++){let i=n[r],s=i[Nt];m5(i)}}}function TV(t,e,n){let r=wi(e,t);BT(r,n)}function BT(t,e){B_(t)&&u_(t,e)}function u_(t,e){let r=t[pe],i=t[z],s=t[ys],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&c0(s)),s&&(s.dirty=!1),t[z]&=-9217,o)IV(r,t,r.template,t[Gn]);else if(i&8192){jT(t,1);let a=r.components;a!==null&&UT(t,a,1)}}function UT(t,e,n){for(let r=0;r<e.length;r++)TV(t,e[r],n)}function cx(t){for(t[zn].changeDetectionScheduler?.notify();t;){t[z]|=64;let e=rl(t);if(a5(t)&&!e)return t;t=e}return null}var Is=class{get rootNodes(){let e=this._lView,n=e[pe];return zh(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Gn]}set context(e){this._lView[Gn]=e}get destroyed(){return(this._lView[z]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Nt];if(Gr(e)){let n=e[Lh],r=n?n.indexOf(this):-1;r>-1&&(o_(e,r),Oh(n,r))}this._attachedToViewContainer=!1}fT(this._lView[pe],this._lView)}onDestroy(e){PD(this._lView,e)}markForCheck(){cx(this._cdRefInjectingView||this._lView)}detach(){this._lView[z]&=-129}reattach(){X0(this._lView),this._lView[z]|=128}detectChanges(){this._lView[z]|=1024,LT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,dT(this._lView[pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e,X0(this._lView)}},yf=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=MV;let t=e;return t})(),SV=yf,AV=class extends SV{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=mV(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new Is(i)}};function MV(){return NV(rn(),Me())}function NV(t,e){return t.type&4?new AV(e,t,hf(t,e)):null}var hJ=new RegExp(`^(\\d+)*(${i3}|${r3})*(.*)`);var RV=()=>null;function O1(t,e){return RV(t,e)}var Wh=class{},d_=class{},Kh=class{};function PV(t){let e=Error(`No component factory found for ${Ut(t)}.`);return e[kV]=t,e}var kV="ngComponent";var h_=class{resolveComponentFactory(e){throw PV(e)}},vf=(()=>{let e=class e{};e.NULL=new h_;let t=e;return t})(),il=class{},gr=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>OV();let t=e;return t})();function OV(){let t=Me(),e=rn(),n=wi(e.index,t);return(_s(n)?n:t)[Je]}var FV=(()=>{let e=class e{};e.\u0275prov=V({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),L0={};var F1=new Set;function lx(t){F1.has(t)||(F1.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function V1(...t){}function VV(){let t=typeof Bt.requestAnimationFrame=="function",e=Bt[t?"requestAnimationFrame":"setTimeout"],n=Bt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var he=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new dt(!1),this.onMicrotaskEmpty=new dt(!1),this.onStable=new dt(!1),this.onError=new dt(!1),typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=VV().nativeRequestAnimationFrame,BV(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new $(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,LV,V1,V1);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},LV={};function ux(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function jV(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Bt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,f_(t),t.isCheckStableRunning=!0,ux(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),f_(t))}function BV(t){let e=()=>{jV(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(UV(a))return n.invokeTask(i,s,o,a);try{return L1(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),j1(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return L1(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),j1(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,f_(t),ux(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function f_(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function L1(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function j1(t){t._nesting--,ux(t)}var p_=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new dt,this.onMicrotaskEmpty=new dt,this.onStable=new dt,this.onError=new dt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function UV(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function $V(t="zone.js",e){return t==="noop"?new p_:t==="zone.js"?new he(e):t}var qo=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(qo||{}),HV={destroy(){}};function dx(t,e){!e&&i5(dx);let n=e?.injector??P(Kn);if(!_3(n))return HV;lx("NgAfterNextRender");let r=n.get(hx),i=r.handler??=new m_,s=e?.phase??qo.MixedReadWrite,o=()=>{i.unregister(c),a()},a=n.get(Q_).onDestroy(o),c=Hr(n,()=>new g_(s,()=>{o(),t()}));return i.register(c),{destroy:o}}var g_=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=P(he),this.errorHandler=P(pr,{optional:!0}),P(Wh,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},m_=class{constructor(){this.executingCallbacks=!1,this.buckets={[qo.EarlyRead]:new Set,[qo.Write]:new Set,[qo.MixedReadWrite]:new Set,[qo.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},hx=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=V({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function __(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=d1(i,a);else if(s==2){let c=a,l=e[++o];r=d1(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Qh=class extends vf{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=mi(e);return new ea(n,this.ngModule)}};function B1(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function qV(t){let e=t.toLowerCase();return e==="svg"?d5:e==="math"?h5:null}var x_=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=sf(r);let i=this.injector.get(e,L0,r);return i!==L0||n===L0?i:this.parentInjector.get(e,n,r)}},ea=class extends Kh{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=B1(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return B1(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=$4(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=be(null);try{i=i||this.ngModule;let o=i instanceof hn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new x_(e,o):e,c=a.get(il,null);if(c===null)throw new $(407,!1);let l=a.get(FV,null),u=a.get(hx,null),d=a.get(Wh,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},f=c.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",m=r?H3(f,r,this.componentDef.encapsulation,a):uT(f,p,qV(p)),y=512;this.componentDef.signals?y|=4096:this.componentDef.onPush||(y|=16);let C=null;m!==null&&(C=X_(m,a,!0));let F=ix(0,null,null,1,0,null,null,null,null,null,null),T=mf(null,F,null,y,null,null,h,f,a,null,C);$_(T);let H,W;try{let Z=this.componentDef,Te,Xt=null;Z.findHostDirectiveDefs?(Te=[],Xt=new Map,Z.findHostDirectiveDefs(Z,Te,Xt),Te.push(Z)):Te=[Z];let Jm=GV(T,m),Ud=zV(Jm,m,Z,Te,T,h,f);W=ND(F,_i),m&&QV(f,Z,m,r),n!==void 0&&YV(W,this.ngContentSelectors,n),H=KV(Ud,Z,Te,Xt,T,[ZV]),ax(F,T,null)}finally{H_()}return new y_(this.componentType,H,hf(W,T),T,W)}finally{be(s)}}},y_=class extends d_{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Is(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;ox(s[pe],s,i,e,n),this.previousInputValues.set(e,n);let o=wi(this._tNode.index,s);cx(o)}}get injector(){return new xs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function GV(t,e){let n=t[pe],r=_i;return t[r]=e,_f(n,r,2,"#host",null)}function zV(t,e,n,r,i,s,o){let a=i[pe];WV(r,t,e,o);let c=null;e!==null&&(c=X_(e,i[Zo]));let l=s.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=mf(i,DT(n),null,u,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&c_(a,t,r.length-1),xf(i,d),i[t.index]=d}function WV(t,e,n,r){for(let i of t)e.mergedAttrs=Xc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(__(e,e.mergedAttrs,!0),n!==null&&_T(r,n,e))}function KV(t,e,n,r,i,s){let o=rn(),a=i[pe],c=Mn(o,i);ST(a,i,o,n,null,r);for(let u=0;u<n.length;u++){let d=o.directiveStart+u,h=Jo(i,a,d,o);Es(h,i)}AT(a,i,o),c&&Es(c,i);let l=Jo(i,a,o.directiveStart+o.componentOffset,o);if(t[Gn]=i[Gn]=l,s!==null)for(let u of s)u(l,e);return ET(a,o,i),l}function QV(t,e,n,r){if(r)W0(t,n,["ng-version","17.3.0"]);else{let{attrs:i,classes:s}=H4(e.selectors[0]);i&&W0(t,n,i),s&&s.length>0&&mT(t,n,s.join(" "))}}function YV(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function ZV(){let t=rn();z_(Me()[pe],t)}var sa=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=XV;let t=e;return t})();function XV(){let t=rn();return eL(t,Me())}var JV=sa,$T=class extends JV{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return hf(this._hostTNode,this._hostLView)}get injector(){return new xs(this._hostTNode,this._hostLView)}get parentInjector(){let e=W_(this._hostTNode,this._hostLView);if(GD(e)){let n=$h(e,this._hostLView),r=Uh(e),i=n[pe].data[r+8];return new xs(i,n)}else return new xs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=U1(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-An}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=O1(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,k1(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!o5(e),a;if(o)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let c=o?e:new ea(mi(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let m=(o?l:this.parentInjector).get(hn,null);m&&(s=m)}let u=mi(c.componentType??{}),d=O1(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,i,h,s);return this.insertImpl(f.hostView,a,k1(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(g5(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Nt],l=new $T(c,c[Wn],c[Nt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return _V(o,i,s,r),e.attachToViewContainerRef(),oD(j0(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=U1(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=o_(this._lContainer,n);r&&(Oh(j0(this._lContainer),n),fT(r[pe],r))}detach(e){let n=this._adjustIndex(e,-1),r=o_(this._lContainer,n);return r&&Oh(j0(this._lContainer),n)!=null?new Is(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function U1(t){return t[Lh]}function j0(t){return t[Lh]||(t[Lh]=[])}function eL(t,e){let n,r=e[t.index];return Gr(r)?n=r:(n=MT(r,e,null,t),e[t.index]=n,xf(e,n)),nL(n,e,t,r),new $T(n,t,e)}function tL(t,e){let n=t[Je],r=n.createComment(""),i=Mn(e,t),s=tx(n,i);return Gh(n,s,r,N3(n,i),!1),r}var nL=sL,rL=()=>!1;function iL(t,e,n){return rL(t,e,n)}function sL(t,e,n,r){if(t[vs])return;let i;n.type&8?i=fr(r):i=tL(e,n),t[vs]=i}function oL(t){return typeof t=="function"&&t[a0]!==void 0}function HT(t){return oL(t)&&typeof t.set=="function"}function aL(t){let e=[],n=new Map;function r(i){let s=n.get(i);if(!s){let o=t(i);n.set(i,s=o.then(dL))}return s}return Yh.forEach((i,s)=>{let o=[];i.templateUrl&&o.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,u=i.styleUrls;i.styleUrls.forEach((d,h)=>{a.push(""),o.push(r(d).then(f=>{a[l+h]=f,u.splice(u.indexOf(d),1),u.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&o.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(o).then(()=>hL(s));e.push(c)}),lL(),Promise.all(e).then(()=>{})}var Yh=new Map,cL=new Set;function lL(){let t=Yh;return Yh=new Map,t}function uL(){return Yh.size===0}function dL(t){return typeof t=="string"?t:t.text()}function hL(t){cL.delete(t)}function fL(t){return Object.getPrototypeOf(t.prototype).constructor}function zr(t){let e=fL(t.type),n=!0,r=[t];for(;e;){let i;if(xi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Ch(t.inputs),o.inputTransforms=Ch(t.inputTransforms),o.declaredInputs=Ch(t.declaredInputs),o.outputs=Ch(t.outputs);let a=i.hostBindings;a&&xL(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&mL(t,c),l&&_L(t,l),pL(t,i),u4(t.outputs,i.outputs),xi(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===zr&&(n=!1)}}e=Object.getPrototypeOf(e)}gL(r)}function pL(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function gL(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Xc(i.hostAttrs,n=Xc(n,i.hostAttrs))}}function Ch(t){return t===Ko?{}:t===Sn?[]:t}function mL(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function _L(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function xL(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function fx(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var yi=class{},sl=class{};var Zh=class extends yi{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Qh(this);let i=gD(e);this._bootstrapComponents=lT(i.bootstrap),this._r3Injector=eT(e,n,[{provide:yi,useValue:this},{provide:vf,useValue:this.componentFactoryResolver},...r],Ut(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Xh=class extends sl{constructor(e){super(),this.moduleType=e}create(e){return new Zh(this.moduleType,e,[])}};function yL(t,e,n){return new Zh(t,e,n)}var v_=class extends yi{constructor(e){super(),this.componentFactoryResolver=new Qh(this),this.instance=null;let n=new Jc([...e.providers,{provide:yi,useValue:this},{provide:vf,useValue:this.componentFactoryResolver}],e.parent||V_(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function wf(t,e,n=null){return new v_({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var bf=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new It(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function qT(t){return wL(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function vL(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function wL(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function bL(t,e,n){return t[e]=n}function oa(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function EL(t){return(t.flags&32)===32}function IL(t,e,n,r,i,s,o,a,c){let l=e.consts,u=_f(e,t,4,o||null,Bh(l,a));TT(e,n,u,Bh(l,c)),z_(e,u);let d=u.tView=ix(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function sn(t,e,n,r,i,s,o,a){let c=Me(),l=nn(),u=t+_i,d=l.firstCreatePass?IL(u,l,c,e,n,r,i,s,o):l.data[u];ll(d,!1);let h=CL(l,c,d,t);q_()&&nx(l,c,h,d),Es(h,c);let f=MT(h,c,h,d);return c[u]=f,xf(c,f),iL(f,d,c),j_(d)&&IT(l,c,d),o!=null&&CT(c,d,a),sn}var CL=DL;function DL(t,e,n,r){return G_(!0),e[Je].createComment("")}function Ef(t,e,n,r){let i=Me(),s=uf();if(oa(i,s,e)){let o=nn(),a=df();oV(a,i,t,e,n,r)}return Ef}function GT(t,e,n,r){return oa(t,uf(),n)?e+rf(n)+r:Ei}function Dh(t,e){return t<<17|e<<2}function Cs(t){return t>>17&32767}function TL(t){return(t&2)==2}function SL(t,e){return t&131071|e<<17}function w_(t){return t|2}function ta(t){return(t&131068)>>2}function B0(t,e){return t&-131069|e<<2}function AL(t){return(t&1)===1}function b_(t){return t|1}function ML(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Cs(o),c=ta(o);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||cl(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let h=Cs(t[a+1]);t[r+1]=Dh(h,a),h!==0&&(t[h+1]=B0(t[h+1],r)),t[a+1]=SL(t[a+1],r)}else t[r+1]=Dh(a,0),a!==0&&(t[a+1]=B0(t[a+1],r)),a=r;else t[r+1]=Dh(c,0),a===0?a=r:t[c+1]=B0(t[c+1],r),c=r;l&&(t[r+1]=w_(t[r+1])),$1(t,u,r,!0),$1(t,u,r,!1),NL(e,u,t,r,s),o=Dh(a,c),s?e.classBindings=o:e.styleBindings=o}function NL(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&cl(s,e)>=0&&(n[r+1]=b_(n[r+1]))}function $1(t,e,n,r){let i=t[n+1],s=e===null,o=r?Cs(i):ta(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];RL(c,e)&&(a=!0,t[o+1]=r?b_(l):w_(l)),o=r?Cs(l):ta(l)}a&&(t[n+1]=r?w_(i):b_(i))}function RL(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?cl(t,e)>=0:!1}function ye(t,e,n){let r=Me(),i=uf();if(oa(r,i,e)){let s=nn(),o=df();sx(s,o,r,t,e,r[Je],n,!1)}return ye}function H1(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";ox(t,n,s[o],o,r)}function px(t,e){return PL(t,e,null,!0),px}function PL(t,e,n,r){let i=Me(),s=nn(),o=A5(2);if(s.firstUpdatePass&&OL(s,t,o,r),e!==Ei&&oa(i,o,e)){let a=s.data[ia()];BL(s,a,i,i[Je],t,i[o+1]=UL(e,n),r,o)}}function kL(t,e){return e>=t.expandoStartIndex}function OL(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[ia()],o=kL(t,n);$L(s,r)&&e===null&&!o&&(e=!1),e=FL(i,s,e,r),ML(i,s,e,n,o,r)}}function FL(t,e,n,r){let i=P5(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=U0(null,t,e,n,r),n=ol(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=U0(i,t,e,n,r),s===null){let c=VL(t,e,r);c!==void 0&&Array.isArray(c)&&(c=U0(null,t,e,c[1],r),c=ol(c,e.attrs,r),LL(t,e,r,c))}else s=jL(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function VL(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ta(r)!==0)return t[Cs(r)]}function LL(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Cs(i)]=r}function jL(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=ol(r,o,n)}return ol(r,e.attrs,n)}function U0(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=ol(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ol(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),M4(t,o,n?!0:e[++s]))}return t===void 0?null:t}function BL(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=AL(l)?q1(c,e,n,i,ta(l),o):void 0;if(!Jh(u)){Jh(s)||TL(l)&&(s=q1(c,null,n,i,a,o));let d=MD(ia(),n);L3(r,o,d,i,s)}}function q1(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[i+1];h===Ei&&(h=d?Sn:void 0);let f=d?M0(h,r):u===r?h:void 0;if(l&&!Jh(f)&&(f=M0(c,r)),Jh(f)&&(a=f,o))return a;let p=t[i+1];i=o?Cs(p):ta(p)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=M0(c,r))}return a}function Jh(t){return t!==void 0}function UL(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Ut(ul(t)))),t}function $L(t,e){return(t.flags&(e?8:16))!==0}function HL(t,e,n,r,i,s){let o=e.consts,a=Bh(o,i),c=_f(e,t,2,r,a);return TT(e,n,c,Bh(o,s)),c.attrs!==null&&__(c,c.attrs,!1),c.mergedAttrs!==null&&__(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function v(t,e,n,r){let i=Me(),s=nn(),o=_i+t,a=i[Je],c=s.firstCreatePass?HL(o,s,i,e,n,r):s.data[o],l=qL(s,i,c,a,e,t);i[o]=l;let u=j_(c);return ll(c,!0),_T(a,l,c),!EL(c)&&q_()&&nx(s,i,l,c),y5()===0&&Es(l,i),v5(),u&&(IT(s,i,c),ET(s,c,i)),r!==null&&CT(i,c),v}function I(){let t=rn();FD()?D5():(t=t.parent,ll(t,!1));let e=t;E5(e)&&I5(),w5();let n=nn();return n.firstCreatePass&&(z_(n,t),CD(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&B5(e)&&H1(n,e,Me(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&U5(e)&&H1(n,e,Me(),e.stylesWithoutHost,!1),I}function on(t,e,n,r){return v(t,e,n,r),I(),on}var qL=(t,e,n,r,i,s)=>(G_(!0),uT(r,i,F5()));function qt(){return Me()}var ef="en-US";var GL=ef;function zL(t){typeof t=="string"&&(GL=t.toLowerCase().replace(/_/g,"-"))}function Ie(t,e,n,r){let i=Me(),s=nn(),o=rn();return zT(s,i,i[Je],o,t,e,r),Ie}function WL(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[el],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function zT(t,e,n,r,i,s,o){let a=j_(r),l=t.firstCreatePass&&dV(t),u=e[Gn],d=uV(e),h=!0;if(r.type&3||o){let m=Mn(r,e),y=o?o(m):m,C=d.length,F=o?H=>o(fr(H[r.index])):r.index,T=null;if(!o&&a&&(T=WL(t,e,i,r.index)),T!==null){let H=T.__ngLastListenerFn__||T;H.__ngNextListenerFn__=s,T.__ngLastListenerFn__=s,h=!1}else{s=z1(r,e,u,s,!1);let H=n.listen(y,i,s);d.push(s,H),l&&l.push(i,F,C,C+1)}}else s=z1(r,e,u,s,!1);let f=r.outputs,p;if(h&&f!==null&&(p=f[i])){let m=p.length;if(m)for(let y=0;y<m;y+=2){let C=p[y],F=p[y+1],W=e[C][F].subscribe(s),Z=d.length;d.push(s,W),l&&l.push(i,r.index,Z,-(Z+1))}}}function G1(t,e,n,r){let i=be(null);try{return lr(6,e,n),n(r)!==!1}catch(s){return RT(t,s),!1}finally{lr(7,e,n),be(i)}}function z1(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?wi(t.index,e):e;cx(a);let c=G1(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)c=G1(e,n,l,o)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function nt(t=1){return O5(t)}function Ts(t,e,n){return WT(t,"",e,"",n),Ts}function WT(t,e,n,r,i){let s=Me(),o=GT(s,e,n,r);if(o!==Ei){let a=nn(),c=df();sx(a,c,s,t,o,s[Je],i,!1)}return WT}function S(t,e=""){let n=Me(),r=nn(),i=t+_i,s=r.firstCreatePass?_f(r,i,1,e,null):r.data[i],o=KL(r,n,s,e,t);n[i]=o,q_()&&nx(r,n,o,s),ll(s,!1)}var KL=(t,e,n,r,i)=>(G_(!0),y3(e[Je],r));function Dt(t){return dl("",t,""),Dt}function dl(t,e,n){let r=Me(),i=GT(r,t,e,n);return i!==Ei&&hV(r,ia(),i),dl}function an(t,e,n){HT(e)&&(e=e());let r=Me(),i=uf();if(oa(r,i,e)){let s=nn(),o=df();sx(s,o,r,t,e,r[Je],n,!1)}return an}function fn(t,e){let n=HT(t);return n&&t.set(e),n}function cn(t,e){let n=Me(),r=nn(),i=rn();return zT(r,n,n[Je],i,t,e),cn}function QL(t,e,n){let r=nn();if(r.firstCreatePass){let i=xi(t);E_(n,r.data,r.blueprint,i,!0),E_(e,r.data,r.blueprint,i,!1)}}function E_(t,e,n,r,i){if(t=jt(t),Array.isArray(t))for(let s=0;s<t.length;s++)E_(t[s],e,n,r,i);else{let s=nn(),o=Me(),a=rn(),c=Yo(t)?t:jt(t.provide),l=wD(t),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Yo(t)||!t.multi){let f=new bs(l,i,te),p=H0(c,e,i?u:u+h,d);p===-1?(t_(Hh(a,o),s,c),$0(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[p]=f,o[p]=f)}else{let f=H0(c,e,u+h,d),p=H0(c,e,u,u+h),m=f>=0&&n[f],y=p>=0&&n[p];if(i&&!y||!i&&!m){t_(Hh(a,o),s,c);let C=XL(i?ZL:YL,n.length,i,r,l);!i&&y&&(n[p].providerFactory=C),$0(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(C),o.push(C)}else{let C=KT(n[i?p:f],l,!i&&r);$0(s,t,f>-1?f:p,C)}!i&&r&&y&&n[p].componentProviders++}}}function $0(t,e,n,r){let i=Yo(e),s=Z4(e);if(i||s){let c=(s?jt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function KT(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function H0(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function YL(t,e,n,r){return I_(this.multi,[])}function ZL(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Jo(n,n[pe],this.providerFactory.index,r);s=a.slice(0,o),I_(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],I_(i,s);return s}function I_(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function XL(t,e,n,r,i){let s=new bs(t,n,te);return s.multi=[],s.index=e,s.componentProviders=0,KT(s,i,r&&!n),s}function aa(t,e=[]){return n=>{n.providersResolver=(r,i)=>QL(r,i?i(t):t,e)}}var JL=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=xD(!1,r.type),s=i.length>0?wf([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=V({token:e,providedIn:"environment",factory:()=>new e(b(hn))});let t=e;return t})();function QT(t){lx("NgStandalone"),t.getStandaloneInjector=e=>e.get(JL).getOrCreateStandaloneInjector(t)}function Ii(t,e,n,r){return t9(Me(),T5(),t,e,n,r)}function e9(t,e){let n=t[e];return n===Ei?void 0:n}function t9(t,e,n,r,i,s){let o=e+n;return oa(t,o,i)?bL(t,o+1,s?r.call(s,i):r(i)):e9(t,o+1)}var Th=null;function n9(t){Th!==null&&(t.defaultEncapsulation!==Th.defaultEncapsulation||t.preserveWhitespaces!==Th.preserveWhitespaces)||(Th=t)}var $r=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},YT=new $r("17.3.0"),If=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var gx=new O(""),hl=new O(""),Cf=(()=>{let e=class e{constructor(r,i,s){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,mx||(r9(s),s.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),r()},i)),this._callbacks.push({doneCb:r,timeoutId:o,updateCb:s})}whenStable(r,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,s){return[]}};e.\u0275fac=function(i){return new(i||e)(b(he),b(Df),b(hl))},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})(),Df=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return mx?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function r9(t){mx=t}var mx;function Ss(t){return!!t&&typeof t.then=="function"}function ZT(t){return!!t&&typeof t.subscribe=="function"}var Tf=new O(""),XT=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=P(Tf,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Ss(o))r.push(o);else if(ZT(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),_x=new O("");function i9(){qC(()=>{throw new $(600,!1)})}function s9(t){return t.isBoundToModule}function o9(t,e,n){try{let r=n();return Ss(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function JT(t,e){return Array.isArray(e)?e.reduce(JT,t):A(A({},t),e)}var ca=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=P(tT),this.afterRenderEffectManager=P(hx),this.externalTestViews=new Set,this.beforeRender=new $e,this.afterTick=new $e,this.componentTypes=[],this.components=[],this.isStable=P(bf).hasPendingTasks.pipe(j(r=>!r)),this._injector=P(hn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Kh;if(!this._injector.get(XT).done){let f=!s&&pD(r),p=!1;throw new $(405,p)}let a;s?a=r:a=this._injector.get(vf).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=s9(a)?void 0:this._injector.get(yi),l=i||a.selector,u=a.create(Kn.NULL,[],l,c),d=u.location.nativeElement,h=u.injector.get(gx,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Rh(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new $(101,!1);let i=be(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,be(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===VT)throw new $(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:c}of this._views)a9(a,o,c)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>C_(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>C_(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Rh(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(_x,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Rh(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new $(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Rh(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function a9(t,e,n){!e&&!C_(t)||c9(t,n,e)}function C_(t){return U_(t)}function c9(t,e,n){let r;n?(r=0,t[z]|=1024):t[z]&64?r=0:r=1,LT(t,e,r)}var D_=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Sf=(()=>{let e=class e{compileModuleSync(r){return new Xh(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=gD(r),o=lT(s.declarations).reduce((a,c)=>{let l=mi(c);return l&&a.push(new ea(l)),a},[]);return new D_(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),l9=new O("");function u9(t,e,n){let r=new Xh(n);return Promise.resolve(r)}function W1(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var d9=(()=>{let e=class e{constructor(){this.zone=P(he),this.applicationRef=P(ca)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function h9(t){return[{provide:he,useFactory:t},{provide:Qo,multi:!0,useFactory:()=>{let e=P(d9,{optional:!0});return()=>e.initialize()}},{provide:Qo,multi:!0,useFactory:()=>{let e=P(g9);return()=>{e.initialize()}}},{provide:tT,useFactory:f9}]}function f9(){let t=P(he),e=P(pr);return n=>t.runOutsideAngular(()=>e.handleError(n))}function p9(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var g9=(()=>{let e=class e{constructor(){this.subscription=new ze,this.initialized=!1,this.zone=P(he),this.pendingTasks=P(bf)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{he.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function m9(){return typeof $localize<"u"&&$localize.locale||ef}var xx=new O("",{providedIn:"root",factory:()=>P(xx,ce.Optional|ce.SkipSelf)||m9()});var eS=new O(""),tS=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let s=$V(i?.ngZone,p9({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return s.run(()=>{let o=yL(r.moduleType,this.injector,h9(()=>s)),a=o.injector.get(pr,null);return s.runOutsideAngular(()=>{let c=s.onError.subscribe({next:l=>{a.handleError(l)}});o.onDestroy(()=>{Rh(this._modules,o),c.unsubscribe()})}),o9(a,s,()=>{let c=o.injector.get(XT);return c.runInitializers(),c.donePromise.then(()=>{let l=o.injector.get(xx,ef);return zL(l||ef),this._moduleDoBootstrap(o),o})})})}bootstrapModule(r,i=[]){let s=JT({},i);return u9(this.injector,s,r).then(o=>this.bootstrapModuleFactory(o,s))}_moduleDoBootstrap(r){let i=r.injector.get(ca);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(s=>i.bootstrap(s));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new $(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(eS,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(b(Kn))},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Yc=null,nS=new O("");function _9(t){if(Yc&&!Yc.get(nS,!1))throw new $(400,!1);i9(),Yc=t;let e=t.get(tS);return v9(t),e}function yx(t,e,n=[]){let r=`Platform: ${e}`,i=new O(r);return(s=[])=>{let o=rS();if(!o||o.injector.get(nS,!1)){let a=[...n,...s,{provide:i,useValue:!0}];t?t(a):_9(x9(a,r))}return y9(i)}}function x9(t=[],e){return Kn.create({name:e,providers:[{provide:of,useValue:"platform"},{provide:eS,useValue:new Set([()=>Yc=null])},...t]})}function y9(t){let e=rS();if(!e)throw new $(401,!1);return e}function rS(){return Yc?.get(tS)??null}function v9(t){t.get(Y_,null)?.forEach(n=>n())}function vx(){return!1}var As=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=w9;let t=e;return t})();function w9(t){return b9(rn(),Me(),(t&16)===16)}function b9(t,e,n){if(lf(t)&&!n){let r=wi(t.index,e);return new Is(r,r)}else if(t.type&47){let r=e[hr];return new Is(r,e)}return null}var T_=class{constructor(){}supports(e){return qT(e)}create(e){return new S_(e)}},E9=(t,e)=>e,S_=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||E9}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<K1(r,i,s)?n:r,a=K1(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,u=c-i;if(l!=u){for(let h=0;h<l;h++){let f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<l&&(s[h]=f+1)}let d=o.previousIndex;s[d]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!qT(e))throw new $(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,vL(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new A_(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new tf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new tf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},A_=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},M_=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},tf=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new M_,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function K1(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Q1(){return new wx([new T_])}var wx=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||Q1()),deps:[[e,new P_,new na]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new $(901,!1)}};e.\u0275prov=V({token:e,providedIn:"root",factory:Q1});let t=e;return t})();var iS=yx(null,"core",[]),sS=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(b(ca))},e.\u0275mod=tt({type:e}),e.\u0275inj=et({});let t=e;return t})();function Ms(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function oS(t){let e=mi(t);if(!e)return null;let n=new ea(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var hS=null;function mr(){return hS}function fS(t){hS??=t}var Af=class{};var ln=new O(""),Tx=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:()=>P(I9),providedIn:"platform"});let t=e;return t})(),pS=new O(""),I9=(()=>{let e=class e extends Tx{constructor(){super(),this._doc=P(ln),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return mr().getBaseHref(this._doc)}onPopState(r){let i=mr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=mr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Sx(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function aS(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Wr(t){return t&&t[0]!=="?"?"?"+t:t}var Kr=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:()=>P(Ax),providedIn:"root"});let t=e;return t})(),gS=new O(""),Ax=(()=>{let e=class e extends Kr{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??P(ln).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Sx(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Wr(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Wr(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Wr(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(b(Tx),b(gS,8))},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),mS=(()=>{let e=class e extends Kr{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Sx(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Wr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Wr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(b(Tx),b(gS,8))},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})(),la=(()=>{let e=class e{constructor(r){this._subject=new dt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=T9(aS(cS(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Wr(i))}normalize(r){return e.stripTrailingSlash(D9(this._basePath,cS(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Wr(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Wr(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Wr,e.joinWithSlash=Sx,e.stripTrailingSlash=aS,e.\u0275fac=function(i){return new(i||e)(b(Kr))},e.\u0275prov=V({token:e,factory:()=>C9(),providedIn:"root"});let t=e;return t})();function C9(){return new la(b(Kr))}function D9(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function cS(t){return t.replace(/\/index.html$/,"")}function T9(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function _S(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var bx=/\s+/,lS=[],xS=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=lS,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(bx):lS}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(bx):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(bx).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(te(Qn),te(gr))},e.\u0275dir=pt({type:e,selectors:[["","ngClass",""]],inputs:{klass:[Mt.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var Ex=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ua=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new Ex(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),uS(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);uS(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(te(sa),te(yf),te(wx))},e.\u0275dir=pt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function uS(t,e){t.context.$implicit=e.item}var da=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Ix,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){dS("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){dS("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(te(sa),te(yf))},e.\u0275dir=pt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Ix=class{constructor(){this.$implicit=null,this.ngIf=null}};function dS(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Ut(e)}'.`)}var yS=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=tt({type:e}),e.\u0275inj=et({});let t=e;return t})(),Mx="browser",S9="server";function A9(t){return t===Mx}function Ns(t){return t===S9}var vS=(()=>{let e=class e{};e.\u0275prov=V({token:e,providedIn:"root",factory:()=>A9(P(Rt))?new Cx(P(ln),window):new Dx});let t=e;return t})(),Cx=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=M9(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function M9(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Dx=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Mf=class{};var Px=class extends Af{constructor(){super(...arguments),this.supportsDOMEvents=!0}},kx=class t extends Px{static makeCurrent(){fS(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=R9();return n==null?null:P9(n)}resetBaseElement(){fl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return _S(document.cookie,e)}},fl=null;function R9(){return fl=fl||document.querySelector("base"),fl?fl.getAttribute("href"):null}function P9(t){return new URL(t,document.baseURI).pathname}var Ox=class{addToWindow(e){Bt.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new $(5103,!1);return s},Bt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Bt.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=Bt.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};Bt.frameworkStabilizers||(Bt.frameworkStabilizers=[]),Bt.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?mr().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},k9=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})(),Fx=new O(""),IS=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new $(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(b(Fx),b(he))},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})(),Rf=class{constructor(e){this._doc=e}},Nx="ng-app-id",CS=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ns(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Nx}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Nx),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Nx,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(b(ln),b(ff),b(Z_,8),b(Rt))},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})(),Rx={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Lx=/%COMP%/g,DS="%COMP%",O9=`_nghost-${DS}`,F9=`_ngcontent-${DS}`,V9=!0,L9=new O("",{providedIn:"root",factory:()=>V9});function j9(t){return F9.replace(Lx,t)}function B9(t){return O9.replace(Lx,t)}function TS(t,e){return e.map(n=>n.replace(Lx,t))}var wS=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Ns(c),this.defaultRenderer=new pl(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===dr.ShadowDom&&(i=ie(A({},i),{encapsulation:dr.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Pf?s.applyToHost(r):s instanceof gl&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case dr.Emulated:o=new Pf(l,u,i,this.appId,d,a,c,h);break;case dr.ShadowDom:return new Vx(l,u,r,i,a,c,this.nonce,h);default:o=new gl(l,u,i,d,a,c,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(b(IS),b(CS),b(ff),b(L9),b(ln),b(Rt),b(he),b(Z_))},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})(),pl=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Rx[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(bS(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(bS(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Rx[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Rx[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ur.DashCase|Ur.Important)?e.style.setProperty(n,r,i&Ur.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ur.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=mr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function bS(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Vx=class extends pl{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=TS(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},gl=class extends pl{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?TS(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Pf=class extends gl{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=j9(l),this.hostAttr=B9(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},U9=(()=>{let e=class e extends Rf{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(b(ln))},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})(),ES=["alt","control","meta","shift"],$9={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},H9={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},q9=(()=>{let e=class e extends Rf{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>mr().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),ES.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=$9[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),ES.forEach(a=>{if(a!==s){let c=H9[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(b(ln))},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})();function G9(){kx.makeCurrent()}function z9(){return new pr}function W9(){return rT(document),document}var K9=[{provide:Rt,useValue:Mx},{provide:Y_,useValue:G9,multi:!0},{provide:ln,useFactory:W9,deps:[]}],SS=yx(iS,"browser",K9),Q9=new O(""),Y9=[{provide:hl,useClass:Ox,deps:[]},{provide:gx,useClass:Cf,deps:[he,Df,hl]},{provide:Cf,useClass:Cf,deps:[he,Df,hl]}],Z9=[{provide:of,useValue:"root"},{provide:pr,useFactory:z9,deps:[]},{provide:Fx,useClass:U9,multi:!0,deps:[ln,he,Rt]},{provide:Fx,useClass:q9,multi:!0,deps:[ln]},wS,CS,IS,{provide:il,useExisting:wS},{provide:Mf,useClass:k9,deps:[]},[]],AS=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:ff,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(b(Q9,12))},e.\u0275mod=tt({type:e}),e.\u0275inj=et({providers:[...Z9,...Y9],imports:[yS,sS]});let t=e;return t})();var MS=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(b(ln))},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var re="primary",Ml=Symbol("RouteTitle"),Hx=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ma(t){return new Hx(t)}function X9(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function J9(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!_r(t[n],e[n]))return!1;return!0}function _r(t,e){let n=t?qx(t):void 0,r=e?qx(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!BS(t[i],e[i]))return!1;return!0}function qx(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function BS(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function US(t){return t.length>0?t[t.length-1]:null}function Ai(t){return b0(t)?t:Ss(t)?xe(Promise.resolve(t)):B(t)}var e8={exact:HS,subset:qS},$S={exact:t8,subset:n8,ignored:()=>!0};function RS(t,e,n){return e8[n.paths](t.root,e.root,n.matrixParams)&&$S[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function t8(t,e){return _r(t,e)}function HS(t,e,n){if(!Ps(t.segments,e.segments)||!Ff(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!HS(t.children[r],e.children[r],n))return!1;return!0}function n8(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>BS(t[n],e[n]))}function qS(t,e,n){return GS(t,e,e.segments,n)}function GS(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ps(i,n)||e.hasChildren()||!Ff(i,n,r))}else if(t.segments.length===n.length){if(!Ps(t.segments,n)||!Ff(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!qS(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Ps(t.segments,i)||!Ff(t.segments,i,r)||!t.children[re]?!1:GS(t.children[re],e,s,r)}}function Ff(t,e,n){return e.every((r,i)=>$S[n](t[i].parameters,r.parameters))}var Ci=class{constructor(e=new Ee([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ma(this.queryParams),this._queryParamMap}toString(){return s8.serialize(this)}},Ee=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vf(this)}},Rs=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ma(this.parameters),this._parameterMap}toString(){return WS(this)}};function r8(t,e){return Ps(t,e)&&t.every((n,r)=>_r(n.parameters,e[r].parameters))}function Ps(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function i8(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===re&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==re&&(n=n.concat(e(i,r)))}),n}var Nl=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:()=>new bl,providedIn:"root"});let t=e;return t})(),bl=class{parse(e){let n=new zx(e);return new Ci(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ml(e.root,!0)}`,r=c8(e.queryParams),i=typeof e.fragment=="string"?`#${o8(e.fragment)}`:"";return`${n}${r}${i}`}},s8=new bl;function Vf(t){return t.segments.map(e=>WS(e)).join("/")}function ml(t,e){if(!t.hasChildren())return Vf(t);if(e){let n=t.children[re]?ml(t.children[re],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==re&&r.push(`${i}:${ml(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=i8(t,(r,i)=>i===re?[ml(t.children[re],!1)]:[`${i}:${ml(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[re]!=null?`${Vf(t)}/${n[0]}`:`${Vf(t)}/(${n.join("//")})`}}function zS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function kf(t){return zS(t).replace(/%3B/gi,";")}function o8(t){return encodeURI(t)}function Gx(t){return zS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Lf(t){return decodeURIComponent(t)}function PS(t){return Lf(t.replace(/\+/g,"%20"))}function WS(t){return`${Gx(t.path)}${a8(t.parameters)}`}function a8(t){return Object.entries(t).map(([e,n])=>`;${Gx(e)}=${Gx(n)}`).join("")}function c8(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${kf(n)}=${kf(i)}`).join("&"):`${kf(n)}=${kf(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var l8=/^[^\/()?;#]+/;function jx(t){let e=t.match(l8);return e?e[0]:""}var u8=/^[^\/()?;=#]+/;function d8(t){let e=t.match(u8);return e?e[0]:""}var h8=/^[^=?&#]+/;function f8(t){let e=t.match(h8);return e?e[0]:""}var p8=/^[^&#]+/;function g8(t){let e=t.match(p8);return e?e[0]:""}var zx=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[re]=new Ee(e,n)),r}parseSegment(){let e=jx(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new Rs(Lf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=d8(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=jx(this.remaining);i&&(r=i,this.capture(r))}e[Lf(n)]=Lf(r)}parseQueryParam(e){let n=f8(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=g8(this.remaining);o&&(r=o,this.capture(r))}let i=PS(n),s=PS(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=jx(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new $(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=re);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[re]:new Ee([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function KS(t){return t.segments.length>0?new Ee([],{[re]:t}):t}function QS(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=QS(i);if(r===re&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Ee(t.segments,e);return m8(n)}function m8(t){if(t.numberOfChildren===1&&t.children[re]){let e=t.children[re];return new Ee(t.segments.concat(e.segments),e.children)}return t}function _a(t){return t instanceof Ci}function _8(t,e,n=null,r=null){let i=YS(t);return ZS(i,e,n,r)}function YS(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new Ee(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=KS(r);return e??i}function ZS(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Bx(i,i,i,n,r);let s=x8(e);if(s.toRoot())return Bx(i,i,new Ee([],{}),n,r);let o=y8(s,i,t),a=o.processChildren?yl(o.segmentGroup,o.index,s.commands):JS(o.segmentGroup,o.index,s.commands);return Bx(i,o.segmentGroup,a,n,r)}function jf(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function El(t){return typeof t=="object"&&t!=null&&t.outlets}function Bx(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;t===e?o=n:o=XS(t,e,n);let a=KS(QS(o));return new Ci(a,s,i)}function XS(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=XS(s,e,n)}),new Ee(t.segments,r)}var Bf=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&jf(r[0]))throw new $(4003,!1);let i=r.find(El);if(i&&i!==US(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function x8(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Bf(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Bf(n,e,r)}var pa=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function y8(t,e,n){if(t.isAbsolute)return new pa(e,!0,0);if(!n)return new pa(e,!1,NaN);if(n.parent===null)return new pa(n,!0,0);let r=jf(t.commands[0])?0:1,i=n.segments.length-1+r;return v8(n,i,t.numberOfDoubleDots)}function v8(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new pa(r,!1,i-s)}function w8(t){return El(t[0])?t[0].outlets:{[re]:t}}function JS(t,e,n){if(t??=new Ee([],{}),t.segments.length===0&&t.hasChildren())return yl(t,e,n);let r=b8(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Ee(t.segments.slice(0,r.pathIndex),{});return s.children[re]=new Ee(t.segments.slice(r.pathIndex),t.children),yl(s,0,i)}else return r.match&&i.length===0?new Ee(t.segments,{}):r.match&&!t.hasChildren()?Wx(t,e,n):r.match?yl(t,0,i):Wx(t,e,n)}function yl(t,e,n){if(n.length===0)return new Ee(t.segments,{});{let r=w8(n),i={};if(Object.keys(r).some(s=>s!==re)&&t.children[re]&&t.numberOfChildren===1&&t.children[re].segments.length===0){let s=yl(t.children[re],e,n);return new Ee(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=JS(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ee(t.segments,i)}}function b8(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(El(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!OS(c,l,o))return s;r+=2}else{if(!OS(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Wx(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(El(s)){let c=E8(s.outlets);return new Ee(r,c)}if(i===0&&jf(n[0])){let c=t.segments[e];r.push(new Rs(c.path,kS(n[0]))),i++;continue}let o=El(s)?s.outlets[re]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&jf(a)?(r.push(new Rs(o,kS(a))),i+=2):(r.push(new Rs(o,{})),i++)}return new Ee(r,{})}function E8(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Wx(new Ee([],{}),0,r))}),e}function kS(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function OS(t,e,n){return t==n.path&&_r(e,n.parameters)}var vl="imperative",gt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(gt||{}),Nn=class{constructor(e,n){this.id=e,this.url=n}},xa=class extends Nn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=gt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},xr=class extends Nn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=gt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},gn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(gn||{}),Uf=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Uf||{}),Di=class extends Nn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=gt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ti=class extends Nn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=gt.NavigationSkipped}},Il=class extends Nn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=gt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},$f=class extends Nn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=gt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kx=class extends Nn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=gt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qx=class extends Nn{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=gt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Yx=class extends Nn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=gt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zx=class extends Nn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=gt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xx=class{constructor(e){this.route=e,this.type=gt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Jx=class{constructor(e){this.route=e,this.type=gt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ey=class{constructor(e){this.snapshot=e,this.type=gt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ty=class{constructor(e){this.snapshot=e,this.type=gt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ny=class{constructor(e){this.snapshot=e,this.type=gt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ry=class{constructor(e){this.snapshot=e,this.type=gt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hf=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=gt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Cl=class{},Dl=class{constructor(e){this.url=e}};var iy=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Rl,this.attachRef=null}},Rl=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new iy,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=sy(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=sy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=oy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return oy(e,this._root).map(n=>n.value)}};function sy(t,e){if(t===e.value)return e;for(let n of e.children){let r=sy(t,n);if(r)return r}return null}function oy(t,e){if(t===e.value)return[e];for(let n of e.children){let r=oy(t,n);if(r.length)return r.unshift(e),r}return[]}var pn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function fa(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Gf=class extends qf{constructor(e,n){super(e),this.snapshot=n,my(this,e)}toString(){return this.snapshot.toString()}};function e2(t){let e=I8(t),n=new It([new Rs("",{})]),r=new It({}),i=new It({}),s=new It({}),o=new It(""),a=new ks(n,r,s,o,i,re,t,e.root);return a.snapshot=e.root,new Gf(new pn(a,[]),e)}function I8(t){let e={},n={},r={},i="",s=new Tl([],e,r,i,n,re,t,null,{});return new zf("",new pn(s,[]))}var ks=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(j(l=>l[Ml]))??B(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(j(e=>ma(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(j(e=>ma(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function gy(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:A(A({},e.params),t.params),data:A(A({},e.data),t.data),resolve:A(A(A(A({},t.data),e.data),i?.data),t._resolvedData)}:r={params:A({},t.params),data:A({},t.data),resolve:A(A({},t.data),t._resolvedData??{})},i&&n2(i)&&(r.resolve[Ml]=i.title),r}var Tl=class{get title(){return this.data?.[Ml]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ma(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ma(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},zf=class extends qf{constructor(e,n){super(n),this.url=e,my(this,n)}toString(){return t2(this._root)}};function my(t,e){e.value._routerState=t,e.children.forEach(n=>my(t,n))}function t2(t){let e=t.children.length>0?` { ${t.children.map(t2).join(", ")} } `:"";return`${t.value}${e}`}function Ux(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,_r(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),_r(e.params,n.params)||t.paramsSubject.next(n.params),J9(e.url,n.url)||t.urlSubject.next(n.url),_r(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function ay(t,e){let n=_r(t.params,e.params)&&r8(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||ay(t.parent,e.parent))}function n2(t){return typeof t.title=="string"||t.title===null}var _y=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=re,this.activateEvents=new dt,this.deactivateEvents=new dt,this.attachEvents=new dt,this.detachEvents=new dt,this.parentContexts=P(Rl),this.location=P(sa),this.changeDetector=P(As),this.environmentInjector=P(hn),this.inputBinder=P(Zf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new cy(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=pt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ds]});let t=e;return t})(),cy=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===ks?this.route:e===Rl?this.childContexts:this.parent.get(e,n)}},Zf=new O(""),FS=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=qc([i.queryParams,i.params,i.data]).pipe(Ve(([o,a,c],l)=>(c=A(A(A({},o),a),c),l===0?B(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=oS(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})();function C8(t,e,n){let r=Sl(t,e._root,n?n._root:void 0);return new Gf(r,e)}function Sl(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=D8(t,e,n);return new pn(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Sl(t,a)),o}}let r=T8(e.value),i=e.children.map(s=>Sl(t,s));return new pn(r,i)}}function D8(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Sl(t,r,i);return Sl(t,r)})}function T8(t){return new ks(new It(t.url),new It(t.params),new It(t.queryParams),new It(t.fragment),new It(t.data),t.outlet,t.component,t)}var r2="ngNavigationCancelingError";function i2(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=_a(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=s2(!1,gn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function s2(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[r2]=!0,n.cancellationCode=e,n}function S8(t){return o2(t)&&_a(t.url)}function o2(t){return!!t&&t[r2]}var A8=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=tn({type:e,selectors:[["ng-component"]],standalone:!0,features:[QT],decls:1,vars:0,template:function(i,s){i&1&&on(0,"router-outlet")},dependencies:[_y],encapsulation:2});let t=e;return t})();function M8(t,e){return t.providers&&!t._injector&&(t._injector=wf(t.providers,e,`Route: ${t.path}`)),t._injector??e}function xy(t){let e=t.children&&t.children.map(xy),n=e?ie(A({},t),{children:e}):A({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==re&&(n.component=A8),n}function yr(t){return t.outlet||re}function N8(t,e){let n=t.filter(r=>yr(r)===e);return n.push(...t.filter(r=>yr(r)!==e)),n}function Pl(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var R8=(t,e,n,r)=>j(i=>(new ly(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),ly=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Ux(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=fa(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=fa(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=fa(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=fa(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new ry(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ty(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Ux(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Ux(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Pl(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Wf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ga=class{constructor(e,n){this.component=e,this.route=n}};function P8(t,e,n){let r=t._root,i=e?e._root:null;return _l(r,i,n,[r.value])}function k8(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function va(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!J1(t)?t:e.get(t):r}function _l(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=fa(e);return t.children.forEach(o=>{O8(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>wl(a,n.getContext(o),i)),i}function O8(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=F8(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Wf(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?_l(t,e,a?a.children:null,r,i):_l(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ga(a.outlet.component,o))}else o&&wl(e,a,i),i.canActivateChecks.push(new Wf(r)),s.component?_l(t,null,a?a.children:null,r,i):_l(t,null,n,r,i);return i}function F8(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ps(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ps(t.url,e.url)||!_r(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ay(t,e)||!_r(t.queryParams,e.queryParams);case"paramsChange":default:return!ay(t,e)}}function wl(t,e,n){let r=fa(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?wl(o,e.children.getContext(s),n):wl(o,null,n):wl(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ga(e.outlet.component,i)):n.canDeactivateChecks.push(new ga(null,i)):n.canDeactivateChecks.push(new ga(null,i))}function kl(t){return typeof t=="function"}function V8(t){return typeof t=="boolean"}function L8(t){return t&&kl(t.canLoad)}function j8(t){return t&&kl(t.canActivate)}function B8(t){return t&&kl(t.canActivateChild)}function U8(t){return t&&kl(t.canDeactivate)}function $8(t){return t&&kl(t.canMatch)}function a2(t){return t instanceof jr||t?.name==="EmptyError"}var Of=Symbol("INITIAL_VALUE");function ya(){return Ve(t=>qc(t.map(e=>e.pipe(Br(1),ms(Of)))).pipe(j(e=>{for(let n of e)if(n!==!0){if(n===Of)return Of;if(n===!1||n instanceof Ci)return n}return!0}),Ct(e=>e!==Of),Br(1)))}function H8(t,e){return Xe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?B(ie(A({},n),{guardsResult:!0})):q8(o,r,i,t).pipe(Xe(a=>a&&V8(a)?G8(r,s,t,e):B(a)),j(a=>ie(A({},n),{guardsResult:a})))})}function q8(t,e,n,r){return xe(t).pipe(Xe(i=>Y8(i.component,i.route,n,e,r)),Dn(i=>i!==!0,!0))}function G8(t,e,n,r){return xe(e).pipe(gs(i=>Lo(W8(i.route.parent,r),z8(i.route,r),Q8(t,i.path,n),K8(t,i.route,n))),Dn(i=>i!==!0,!0))}function z8(t,e){return t!==null&&e&&e(new ny(t)),B(!0)}function W8(t,e){return t!==null&&e&&e(new ey(t)),B(!0)}function K8(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return B(!0);let i=r.map(s=>yh(()=>{let o=Pl(e)??n,a=va(s,o),c=j8(a)?a.canActivate(e,t):Hr(o,()=>a(e,t));return Ai(c).pipe(Dn())}));return B(i).pipe(ya())}function Q8(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>k8(o)).filter(o=>o!==null).map(o=>yh(()=>{let a=o.guards.map(c=>{let l=Pl(o.node)??n,u=va(c,l),d=B8(u)?u.canActivateChild(r,t):Hr(l,()=>u(r,t));return Ai(d).pipe(Dn())});return B(a).pipe(ya())}));return B(s).pipe(ya())}function Y8(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return B(!0);let o=s.map(a=>{let c=Pl(e)??i,l=va(a,c),u=U8(l)?l.canDeactivate(t,e,n,r):Hr(c,()=>l(t,e,n,r));return Ai(u).pipe(Dn())});return B(o).pipe(ya())}function Z8(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return B(!0);let s=i.map(o=>{let a=va(o,t),c=L8(a)?a.canLoad(e,n):Hr(t,()=>a(e,n));return Ai(c)});return B(s).pipe(ya(),c2(r))}function c2(t){return m0(ut(e=>{if(_a(e))throw i2(t,e)}),j(e=>e===!0))}function X8(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return B(!0);let s=i.map(o=>{let a=va(o,t),c=$8(a)?a.canMatch(e,n):Hr(t,()=>a(e,n));return Ai(c)});return B(s).pipe(ya(),c2(r))}var Al=class{constructor(e){this.segmentGroup=e||null}},Kf=class extends Error{constructor(e){super(),this.urlTree=e}};function ha(t){return Vo(new Al(t))}function J8(t){return Vo(new $(4e3,!1))}function e6(t){return Vo(s2(!1,gn.GuardRejected))}var uy=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return B(r);if(i.numberOfChildren>1||!i.children[re])return J8(e.redirectTo);i=i.children[re]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Kf(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Ci(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Ee(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},dy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function t6(t,e,n,r,i){let s=yy(t,e,n);return s.matched?(r=M8(e,r),X8(r,e,n,i).pipe(j(o=>o===!0?s:A({},dy)))):B(s)}function yy(t,e,n){if(e.path==="**")return n6(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?A({},dy):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||X9)(n,t,e);if(!i)return A({},dy);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?A(A({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function n6(t){return{matched:!0,parameters:t.length>0?US(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function VS(t,e,n,r){return n.length>0&&s6(t,n,r)?{segmentGroup:new Ee(e,i6(r,new Ee(n,t.children))),slicedSegments:[]}:n.length===0&&o6(t,n,r)?{segmentGroup:new Ee(t.segments,r6(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ee(t.segments,t.children),slicedSegments:n}}function r6(t,e,n,r){let i={};for(let s of n)if(Xf(t,e,s)&&!r[yr(s)]){let o=new Ee([],{});i[yr(s)]=o}return A(A({},r),i)}function i6(t,e){let n={};n[re]=e;for(let r of t)if(r.path===""&&yr(r)!==re){let i=new Ee([],{});n[yr(r)]=i}return n}function s6(t,e,n){return n.some(r=>Xf(t,e,r)&&yr(r)!==re)}function o6(t,e,n){return n.some(r=>Xf(t,e,r))}function Xf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function a6(t,e,n,r){return yr(t)!==r&&(r===re||!Xf(e,n,t))?!1:yy(e,t,n).matched}function c6(t,e,n){return e.length===0&&!t.children[n]}var hy=class{};function l6(t,e,n,r,i,s,o="emptyOnly"){return new fy(t,e,n,r,i,o,s).recognize()}var u6=31,fy=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new uy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}recognize(){let e=VS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(j(n=>{let r=new Tl([],Object.freeze({}),Object.freeze(A({},this.urlTree.queryParams)),this.urlTree.fragment,{},re,this.rootComponentType,null,{}),i=new pn(r,n),s=new zf("",i),o=_8(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,re).pipe(hi(r=>{if(r instanceof Kf)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Al?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=gy(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(j(s=>s instanceof pn?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return xe(i).pipe(gs(s=>{let o=r.children[s],a=N8(n,s);return this.processSegmentGroup(e,a,o,s)}),cr((s,o)=>(s.push(...o),s)),fi(null),C0(),Xe(s=>{if(s===null)return ha(r);let o=l2(s);return d6(o),B(o)}))}processSegment(e,n,r,i,s,o){return xe(n).pipe(gs(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(hi(c=>{if(c instanceof Al)return B(null);throw c}))),Dn(a=>!!a),hi(a=>{if(a2(a))return c6(r,i,s)?B(new hy):ha(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return a6(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):ha(i):ha(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=yy(n,i,s);if(!a)return ha(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>u6&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,d).pipe(Xe(h=>this.processSegment(e,r,n,h.concat(u),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=t6(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(Ve(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ve(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new Tl(u,h,Object.freeze(A({},this.urlTree.queryParams)),this.urlTree.fragment,f6(r),yr(r),r.component??r._loadedComponent??null,r,p6(r)),{segmentGroup:p,slicedSegments:m}=VS(n,u,d,c);if(m.length===0&&p.hasChildren())return this.processChildren(l,c,p).pipe(j(C=>C===null?null:new pn(f,C)));if(c.length===0&&m.length===0)return B(new pn(f,[]));let y=yr(r)===s;return this.processSegment(l,c,p,m,y?re:s,!0).pipe(j(C=>new pn(f,C instanceof pn?[C]:[])))}))):ha(n)))}getChildConfig(e,n,r){return n.children?B({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?B({routes:n._loadedRoutes,injector:n._loadedInjector}):Z8(e,n,r,this.urlSerializer).pipe(Xe(i=>i?this.configLoader.loadChildren(e,n).pipe(ut(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):e6(n))):B({routes:[],injector:e})}};function d6(t){t.sort((e,n)=>e.value.outlet===re?-1:n.value.outlet===re?1:e.value.outlet.localeCompare(n.value.outlet))}function h6(t){let e=t.value.routeConfig;return e&&e.path===""}function l2(t){let e=[],n=new Set;for(let r of t){if(!h6(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=l2(r.children);e.push(new pn(r.value,i))}return e.filter(r=>!n.has(r))}function f6(t){return t.data||{}}function p6(t){return t.resolve||{}}function g6(t,e,n,r,i,s){return Xe(o=>l6(t,e,n,r,o.extractedUrl,i,s).pipe(j(({state:a,tree:c})=>ie(A({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function m6(t,e){return Xe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return B(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of u2(c))o.add(l);let a=0;return xe(o).pipe(gs(c=>s.has(c)?_6(c,r,t,e):(c.data=gy(c,c.parent,t).resolve,B(void 0))),ut(()=>a++),Bo(1),Xe(c=>a===o.size?B(n):Lt))})}function u2(t){let e=t.children.map(n=>u2(n)).flat();return[t,...e]}function _6(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!n2(i)&&(s[Ml]=i.title),x6(s,t,e,r).pipe(j(o=>(t._resolvedData=o,t.data=gy(t,t.parent,n).resolve,null)))}function x6(t,e,n,r){let i=qx(t);if(i.length===0)return B({});let s={};return xe(i).pipe(Xe(o=>y6(t[o],e,n,r).pipe(Dn(),ut(a=>{s[o]=a}))),Bo(1),I0(s),hi(o=>a2(o)?Lt:Vo(o)))}function y6(t,e,n,r){let i=Pl(e)??r,s=va(t,i),o=s.resolve?s.resolve(e,n):Hr(i,()=>s(e,n));return Ai(o)}function $x(t){return Ve(e=>{let n=t(e);return n?xe(n).pipe(j(()=>e)):B(e)})}var d2=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===re);return i}getResolvedTitleForRoute(r){return r.data[Ml]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:()=>P(v6),providedIn:"root"});let t=e;return t})(),v6=(()=>{let e=class e extends d2{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(b(MS))},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ol=new O("",{providedIn:"root",factory:()=>({})}),Qf=new O(""),vy=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=P(Sf)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return B(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ai(r.loadComponent()).pipe(j(h2),ut(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),zc(()=>{this.componentLoaders.delete(r)})),s=new Ro(i,()=>new $e).pipe(No());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return B({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=w6(i,this.compiler,r,this.onLoadEndListener).pipe(zc(()=>{this.childrenLoaders.delete(i)})),a=new Ro(o,()=>new $e).pipe(No());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function w6(t,e,n,r){return Ai(t.loadChildren()).pipe(j(h2),Xe(i=>i instanceof sl||Array.isArray(i)?B(i):xe(e.compileModuleAsync(i))),j(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Qf,[],{optional:!0,self:!0}).flat()),{routes:o.map(xy),injector:s}}))}function b6(t){return t&&typeof t=="object"&&"default"in t}function h2(t){return b6(t)?t.default:t}var wy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:()=>P(E6),providedIn:"root"});let t=e;return t})(),E6=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),f2=new O(""),p2=new O("");function I6(t,e,n){let r=t.get(p2),i=t.get(ln);return t.get(he).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),C6(t))),{onViewTransitionCreated:c}=r;return c&&Hr(t,()=>c({transition:a,from:e,to:n})),o})}function C6(t){return new Promise(e=>{dx(e,{injector:t})})}var by=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new $e,this.transitionAbortSubject=new $e,this.configLoader=P(vy),this.environmentInjector=P(hn),this.urlSerializer=P(Nl),this.rootContexts=P(Rl),this.location=P(la),this.inputBindingEnabled=P(Zf,{optional:!0})!==null,this.titleStrategy=P(d2),this.options=P(Ol,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=P(wy),this.createViewTransition=P(f2,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>B(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Xx(s)),i=s=>this.events.next(new Jx(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ie(A(A({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new It({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:vl,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ct(o=>o.id!==0),j(o=>ie(A({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ve(o=>{let a=!1,c=!1;return B(o).pipe(Ve(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",gn.SupersededByNewNavigation),Lt;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ie(A({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new Ti(l.id,this.urlSerializer.serialize(l.rawUrl),h,Uf.IgnoredSameUrlNavigation)),l.resolve(null),Lt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return B(l).pipe(Ve(h=>{let f=this.transitions?.getValue();return this.events.next(new xa(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?Lt:Promise.resolve(h)}),g6(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ut(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=ie(A({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new $f(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:m,extras:y}=l,C=new xa(h,this.urlSerializer.serialize(f),p,m);this.events.next(C);let F=e2(this.rootComponentType).snapshot;return this.currentTransition=o=ie(A({},l),{targetSnapshot:F,urlAfterRedirects:f,extras:ie(A({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,B(o)}else{let h="";return this.events.next(new Ti(l.id,this.urlSerializer.serialize(l.extractedUrl),h,Uf.IgnoredByUrlHandlingStrategy)),l.resolve(null),Lt}}),ut(l=>{let u=new Kx(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),j(l=>(this.currentTransition=o=ie(A({},l),{guards:P8(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),H8(this.environmentInjector,l=>this.events.next(l)),ut(l=>{if(o.guardsResult=l.guardsResult,_a(l.guardsResult))throw i2(this.urlSerializer,l.guardsResult);let u=new Qx(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),Ct(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",gn.GuardRejected),!1)),$x(l=>{if(l.guards.canActivateChecks.length)return B(l).pipe(ut(u=>{let d=new Yx(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Ve(u=>{let d=!1;return B(u).pipe(m6(this.paramsInheritanceStrategy,this.environmentInjector),ut({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",gn.NoDataFromResolver)}}))}),ut(u=>{let d=new Zx(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),$x(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(ut(f=>{d.component=f}),j(()=>{})));for(let f of d.children)h.push(...u(f));return h};return qc(u(l.targetSnapshot.root)).pipe(fi(null),Br(1))}),$x(()=>this.afterPreactivation()),Ve(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?xe(d).pipe(j(()=>o)):B(o)}),j(l=>{let u=C8(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=ie(A({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),ut(()=>{this.events.next(new Cl)}),R8(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Br(1),ut({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new xr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),S0(this.transitionAbortSubject.pipe(ut(l=>{throw l}))),zc(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",gn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),hi(l=>{if(c=!0,o2(l))this.events.next(new Di(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),S8(l)?this.events.next(new Dl(l.url)):o.resolve(!1);else{this.events.next(new Il(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return Lt}))}))}cancelNavigationTransition(r,i,s){let o=new Di(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function D6(t){return t!==vl}var T6=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:()=>P(S6),providedIn:"root"});let t=e;return t})(),py=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},S6=(()=>{let e=class e extends py{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=bi(e)))(s||e)}})(),e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),g2=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:()=>P(A6),providedIn:"root"});let t=e;return t})(),A6=(()=>{let e=class e extends g2{constructor(){super(...arguments),this.location=P(la),this.urlSerializer=P(Nl),this.options=P(Ol,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=P(wy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ci,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=e2(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof xa)this.stateMemento=this.createStateMemento();else if(r instanceof Ti)this.rawUrlTree=i.initialUrl;else if(r instanceof $f){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Cl?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Di&&(r.code===gn.GuardRejected||r.code===gn.NoDataFromResolver)?this.restoreHistory(i):r instanceof Il?this.restoreHistory(i,!0):r instanceof xr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=A(A({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=A(A({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=bi(e)))(s||e)}})(),e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),xl=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(xl||{});function m2(t,e){t.events.pipe(Ct(n=>n instanceof xr||n instanceof Di||n instanceof Il||n instanceof Ti),j(n=>n instanceof xr||n instanceof Ti?xl.COMPLETE:(n instanceof Di?n.code===gn.Redirect||n.code===gn.SupersededByNewNavigation:!1)?xl.REDIRECTING:xl.FAILED),Ct(n=>n!==xl.REDIRECTING),Br(1)).subscribe(()=>{e()})}function M6(t){throw t}var N6={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},R6={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Si=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=P(If),this.stateManager=P(g2),this.options=P(Ol,{optional:!0})||{},this.pendingTasks=P(bf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=P(by),this.urlSerializer=P(Nl),this.location=P(la),this.urlHandlingStrategy=P(wy),this._events=new $e,this.errorHandler=this.options.errorHandler||M6,this.navigated=!1,this.routeReuseStrategy=P(T6),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=P(Qf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!P(Zf,{optional:!0}),this.eventsSubscription=new ze,this.isNgZoneEnabled=P(he)instanceof he&&he.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Di&&i.code!==gn.Redirect&&i.code!==gn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof xr)this.navigated=!0;else if(i instanceof Dl){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||D6(s.source)};this.scheduleNavigation(a,vl,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}k6(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),vl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=A({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(xy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=A(A({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=YS(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return ZS(h,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=_a(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,vl,null,i)}navigate(r,i={skipLocationChange:!1}){return P6(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=A({},N6):i===!1?s=A({},R6):s=i,_a(r))return RS(this.currentUrlTree,r,s);let o=this.parseUrl(r);return RS(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,f)=>{c=h,l=f});let d=this.pendingTasks.add();return m2(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function P6(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new $(4008,!1)}function k6(t){return!(t instanceof Cl)&&!(t instanceof Dl)}var _2=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new $e,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(u=>{u instanceof xr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:oT(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(te(Si),te(ks),K_("tabindex"),te(gr),te(Qn),te(Kr))},e.\u0275dir=pt({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&Ie("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&Ef("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Mt.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Ms],skipLocationChange:[Mt.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Ms],replaceUrl:[Mt.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Ms],routerLink:"routerLink"},standalone:!0,features:[fx,Ds]});let t=e;return t})();var Yf=class{};var O6=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Ct(r=>r instanceof xr),gs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=wf(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return xe(s).pipe(di())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=B(null);let o=s.pipe(Xe(a=>a===null?B(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return xe([o,a]).pipe(di())}else return o})}};e.\u0275fac=function(i){return new(i||e)(b(Si),b(Sf),b(hn),b(Yf),b(vy))},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),x2=new O(""),F6=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof xa?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof xr?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Ti&&r.code===Uf.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Hf&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Hf(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){yT()},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})();function V6(t){return t.routerState.root}function Fl(t,e){return{\u0275kind:t,\u0275providers:e}}function L6(){let t=P(Kn);return e=>{let n=t.get(ca);if(e!==n.components[0])return;let r=t.get(Si),i=t.get(y2);t.get(Ey)===1&&r.initialNavigation(),t.get(v2,null,ce.Optional)?.setUpPreloading(),t.get(x2,null,ce.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var y2=new O("",{factory:()=>new $e}),Ey=new O("",{providedIn:"root",factory:()=>1});function j6(){return Fl(2,[{provide:Ey,useValue:0},{provide:Tf,multi:!0,deps:[Kn],useFactory:e=>{let n=e.get(pS,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(Si),s=e.get(y2);m2(i,()=>{r(!0)}),e.get(by).afterPreactivation=()=>(r(!0),s.closed?B(void 0):s),i.initialNavigation()}))}}])}function B6(){return Fl(3,[{provide:Tf,multi:!0,useFactory:()=>{let e=P(Si);return()=>{e.setUpLocationChangeListener()}}},{provide:Ey,useValue:2}])}var v2=new O("");function U6(t){return Fl(0,[{provide:v2,useExisting:O6},{provide:Yf,useExisting:t}])}function $6(){return Fl(8,[FS,{provide:Zf,useExisting:FS}])}function H6(t){let e=[{provide:f2,useValue:I6},{provide:p2,useValue:A({skipNextTransition:!!t?.skipInitialTransition},t)}];return Fl(9,e)}var LS=new O("ROUTER_FORROOT_GUARD"),q6=[la,{provide:Nl,useClass:bl},Si,Rl,{provide:ks,useFactory:V6,deps:[Si]},vy,[]],Iy=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[q6,[],{provide:Qf,multi:!0,useValue:r},{provide:LS,useFactory:K6,deps:[[Si,new na,new P_]]},{provide:Ol,useValue:i||{}},i?.useHash?z6():W6(),G6(),i?.preloadingStrategy?U6(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?Q6(i):[],i?.bindToComponentInputs?$6().\u0275providers:[],i?.enableViewTransitions?H6().\u0275providers:[],Y6()]}}static forChild(r){return{ngModule:e,providers:[{provide:Qf,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(b(LS,8))},e.\u0275mod=tt({type:e}),e.\u0275inj=et({});let t=e;return t})();function G6(){return{provide:x2,useFactory:()=>{let t=P(vS),e=P(he),n=P(Ol),r=P(by),i=P(Nl);return n.scrollOffset&&t.setOffset(n.scrollOffset),new F6(i,r,t,e,n)}}}function z6(){return{provide:Kr,useClass:mS}}function W6(){return{provide:Kr,useClass:Ax}}function K6(t){return"guarded"}function Q6(t){return[t.initialNavigation==="disabled"?B6().\u0275providers:[],t.initialNavigation==="enabledBlocking"?j6().\u0275providers:[]]}var jS=new O("");function Y6(){return[{provide:jS,useFactory:L6},{provide:_x,multi:!0,useExisting:jS}]}var Cy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=tn({type:e,selectors:[["app-home"]],decls:20,vars:0,consts:[[1,"page"],[2,"text-align","center","margin-bottom","2rem"],[1,"row",2,"align-items","start"],[1,"column"]],template:function(i,s){i&1&&(v(0,"div",0)(1,"h1",1),S(2,"Evaluaci\xF3n Tercer Parcial"),I(),v(3,"h2",1),S(4,"Desarrollo Web Profesional"),I(),v(5,"div",2)(6,"div",3)(7,"h3"),S(8,"Integrantes:"),I(),v(9,"p"),S(10,"Diosdado Rodr\xEDguez Miguel \xC1ngel"),I(),v(11,"p"),S(12,"Hern\xE1ndez \xC1vila Fernanda Montserrat"),I(),v(13,"p"),S(14,"Pinz\xF3n Huerta Erick"),I()(),v(15,"div",3)(16,"h3"),S(17,"Descripci\xF3n:"),I(),v(18,"p"),S(19,"Aplicaci\xF3n Web de venta de coches con CRUD de clientes y coches hecha con Angular."),I()()()())}});let t=e;return t})();var wa=class{constructor(e){this.id="",this.marca="",this.modelo="",this.precio=0,this.kilometros=0,this.vendido=!1,this.transmision="",this.transacciones=[],this.due\u00F1oActual="",this.marca=e.marca,this.modelo=e.modelo,this.precio=e.precio,this.kilometros=e.kilometros,this.vendido=e.vendido,this.transmision=e.transmision,this.due\u00F1oActual=e.due\u00F1oActual}};var Yn=function(t){return t[t.create=0]="create",t[t.select=1]="select",t}(Yn||{});function w2(t){return/^[a-zA-ZÀ-ÖØ-öø-ÿ]+(?:\s+[a-zA-ZÀ-ÖØ-öø-ÿ]+)*$/.test(t)}function Dy(t){return/^[1-9][0-9]*$/.test(t)}function b2(t){return/^[a-zA-Z0-9À-ÖØ-öø-ÿ]+(?:\s*[a-zA-Z0-9À-ÖØ-öø-ÿ]+)*$/.test(t)}var Os=class{constructor(e){this.id="",this.fecha="",this.precio=0,this.metodoPago="",this.coche="",this.cliente="",this.tipo="",this.fecha=e.fecha,this.precio=e.precio,this.metodoPago=e.metodoPago,this.coche=e.coche,this.cliente=e.cliente,this.tipo=e.tipo}};var X6="firebase",J6="10.10.0";Bn(X6,J6,"app");var Fs=new $r("ANGULARFIRE2_VERSION");var e7=(t,e)=>{let n=e?[e]:LC(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Qr=class{constructor(){return e7(t7)}},t7="app-check";function Ty(){}var Jf=class{zone;delegate;constructor(e,n=v0){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Sy=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ty,{},Ty,Ty)),n.pipe(ut({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ba=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Jf(Zone.current)),this.insideAngular=n.run(()=>new Jf(Zone.current,ps)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(b(he))};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function n7(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function We(t){return r7(n7())(t)}function r7(t){return function(n){return n=n.lift(new Sy(t.ngZone)),n.pipe($n(t.outsideAngular),Cn(t.insideAngular))}}var i7=new Map,s7={activated:!1,tokenObservers:[]},o7={initialized:!1,enabled:!1};function Zn(t){return i7.get(t)||Object.assign({},s7)}function A2(){return o7}var a7="https://content-firebaseappcheck.googleapis.com/v1";var c7="exchangeDebugToken",E2={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},zee=24*60*60*1e3;var Ny=class{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return g(this,null,function*(){this.stop();try{this.pending=new ft,this.pending.promise.catch(n=>{}),yield l7(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new ft,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function l7(t){return new Promise(e=>{setTimeout(e,t)})}var u7={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Mi=new RC("appCheck","AppCheck",u7);function M2(t){if(!Zn(t).activated)throw Mi.create("use-before-activation",{appName:t.name})}function N2(r,i){return g(this,arguments,function*({url:t,body:e},n){let s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let f=yield o.getHeartbeatsHeader();f&&(s["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:s},c;try{c=yield fetch(t,a)}catch(f){throw Mi.create("fetch-network-error",{originalErrorMessage:f?.message})}if(c.status!==200)throw Mi.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(f){throw Mi.create("fetch-parse-error",{originalErrorMessage:f?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Mi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let d=Number(u[1])*1e3,h=Date.now();return{token:l.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function R2(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${a7}/projects/${n}/apps/${r}:${c7}?key=${i}`,body:{debug_token:e}}}var d7="firebase-app-check-database",h7=1,Ry="firebase-app-check-store";var ep=null;function f7(){return ep||(ep=new Promise((t,e)=>{try{let n=indexedDB.open(d7,h7);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Mi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Ry,{keyPath:"compositeKey"})}}}catch(n){e(Mi.create("storage-open",{originalErrorMessage:n?.message}))}}),ep)}function p7(t,e){return g7(m7(t),e)}function g7(t,e){return g(this,null,function*(){let r=(yield f7()).transaction(Ry,"readwrite"),s=r.objectStore(Ry).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var l;a(Mi.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function m7(t){return`${t.options.appId}-${t.name}`}var Py=new ui("@firebase/app-check");function My(t,e){return Gd()?p7(t,e).catch(n=>{Py.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function P2(){return A2().enabled}function k2(){return g(this,null,function*(){let t=A2();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var _7={error:"UNKNOWN_ERROR"};function x7(t){return Hd.encodeString(JSON.stringify(t),!1)}function ky(t,e=!1){return g(this,null,function*(){let n=t.app;M2(n);let r=Zn(n),i=r.token,s;if(i&&!Vl(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(Vl(c)?i=c:yield My(n,void 0))}if(!e&&i&&Vl(i))return{token:i.token};let o=!1;if(P2()){r.exchangeTokenPromise||(r.exchangeTokenPromise=N2(R2(n,yield k2()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let c=yield r.exchangeTokenPromise;return yield My(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield Zn(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Py.warn(c.message):Py.error(c),s=c}let a;return i?s?Vl(i)?a={token:i.token,internalError:s}:a=C2(s):(a={token:i.token},r.token=i,yield My(n,i)):a=C2(s),o&&b7(n,a),a})}function y7(t){return g(this,null,function*(){let e=t.app;M2(e);let{provider:n}=Zn(e);if(P2()){let r=yield k2(),{token:i}=yield N2(R2(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function v7(t,e,n,r){let{app:i}=t,s=Zn(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Vl(s.token)){let a=s.token;Promise.resolve().then(()=>{n({token:a.token}),I2(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>I2(t))}function O2(t,e){let n=Zn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function I2(t){let{app:e}=t,n=Zn(e),r=n.tokenRefresher;r||(r=w7(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function w7(t){let{app:e}=t;return new Ny(()=>g(this,null,function*(){let n=Zn(e),r;if(n.token?r=yield ky(t,!0):r=yield ky(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Zn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},E2.RETRIAL_MIN_WAIT,E2.RETRIAL_MAX_WAIT)}function b7(t,e){let n=Zn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Vl(t){return t.expireTimeMillis-Date.now()>0}function C2(t){return{token:x7(_7),error:t}}var Oy=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Zn(this.app);for(let n of e)O2(this.app,n.next);return Promise.resolve()}};function E7(t,e){return new Oy(t,e)}function I7(t){return{getToken:e=>ky(t,e),getLimitedUseToken:()=>y7(t),addTokenListener:e=>v7(t,"INTERNAL",e),removeTokenListener:e=>O2(t.app,e)}}var C7="@firebase/app-check",D7="0.8.3";var T7="app-check",D2="app-check-internal";function S7(){ls(new dn(T7,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return E7(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(D2).initialize()})),ls(new dn(D2,t=>{let e=t.getProvider("app-check").getImmediate();return I7(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Bn(C7,D7)}S7();var A7=["localhost","0.0.0.0","127.0.0.1"],ite=typeof window<"u"&&A7.includes(window.location.hostname);var M7="firebase",N7="10.10.0";bt.registerVersion(M7,N7,"app-compat");var R7=["ngOnDestroy"],V2=(t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(R7.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let c=a?.[s];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>n.run(()=>l)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,l)=>o.then(u=>{let d=u?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,d),d})})})});var tp=class{constructor(e){return e}},Ni=new O("angularfire2.app.options"),Ri=new O("angularfire2.app.name");function Vs(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let o=bt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>bt.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){let a=!!module.hot;P7("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new tp(o)}var P7=(t,...e)=>{vx()&&typeof console<"u"&&console[t](...e)},k7={provide:tp,useFactory:Vs,deps:[Ni,he,[new na,Ri]]},L2=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Ni,useValue:n},{provide:Ri,useValue:r}]}}constructor(n){bt.registerVersion("angularfire",Fs.full,"core"),bt.registerVersion("angularfire",Fs.full,"app-compat"),bt.registerVersion("angular",YT.full,n.toString())}static \u0275fac=function(r){return new(r||t)(b(Rt))};static \u0275mod=tt({type:t});static \u0275inj=et({providers:[k7]})}return t})();function Ea(t,e,n,r,i){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return O7(i,o)||(F2("error",`${e} was already initialized on the ${n} Firebase App with different settings.${F7?" You may need to reload as Firebase is not HMR aware.":""}`),F2("warn",{is:i,was:o})),s;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function O7(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var F7=typeof module<"u"&&!!module.hot,F2=(t,...e)=>{vx()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Ll=new O("angularfire2.auth.use-emulator"),jl=new O("angularfire2.auth.settings"),Bl=new O("angularfire2.auth.tenant-id"),Ul=new O("angularfire2.auth.langugage-code"),$l=new O("angularfire2.auth.use-device-language"),Hl=new O("angularfire.auth.persistence"),ql=(t,e,n,r,i,s,o,a)=>Ea(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(let[l,u]of Object.entries(o))c.settings[l]=u;return a&&c.setPersistence(a),c},[n,r,i,s,o,a]),np=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,c,l,u,d,h,f){let p=new $e,m=B(void 0).pipe(Cn(o.outsideAngular),Ve(()=>s.runOutsideAngular(()=>import("./chunk-EA5I5XF3.js"))),j(()=>Vs(n,s,r)),j(y=>ql(y,s,a,l,u,d,c,h)),wh({bufferSize:1,refCount:!1}));if(Ns(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=B(null);else{m.pipe(Dn()).subscribe();let y=m.pipe(Ve(T=>T.getRedirectResult().then(H=>H,()=>null)),We,wh({bufferSize:1,refCount:!1})),C=m.pipe(Ve(T=>new se(H=>({unsubscribe:s.runOutsideAngular(()=>T.onAuthStateChanged(W=>H.next(W),W=>H.error(W),()=>H.complete()))})))),F=m.pipe(Ve(T=>new se(H=>({unsubscribe:s.runOutsideAngular(()=>T.onIdTokenChanged(W=>H.next(W),W=>H.error(W),()=>H.complete()))}))));this.authState=y.pipe(bh(C),$n(o.outsideAngular),Cn(o.insideAngular)),this.user=y.pipe(bh(F),$n(o.outsideAngular),Cn(o.insideAngular)),this.idToken=this.user.pipe(Ve(T=>T?xe(T.getIdToken()):B(null))),this.idTokenResult=this.user.pipe(Ve(T=>T?xe(T.getIdTokenResult()):B(null))),this.credential=jo(y,p,this.authState.pipe(Ct(T=>!T))).pipe(j(T=>T?.user?T:null),$n(o.outsideAngular),Cn(o.insideAngular))}return V2(this,m,s,{spy:{apply:(y,C,F)=>{(y.startsWith("signIn")||y.startsWith("createUser"))&&F.then(T=>p.next(T))}}})}static \u0275fac=function(r){return new(r||t)(b(Ni),b(Ri,8),b(Rt),b(he),b(ba),b(Ll,8),b(jl,8),b(Bl,8),b(Ul,8),b($l,8),b(Hl,8),b(Qr,8))};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var V7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Jn={},R,iv=iv||{},Y=V7||self;function mp(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function iu(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function L7(t){return Object.prototype.hasOwnProperty.call(t,Vy)&&t[Vy]||(t[Vy]=++j7)}var Vy="closure_uid_"+(1e9*Math.random()>>>0),j7=0;function B7(t,e,n){return t.call.apply(t.bind,arguments)}function U7(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Pt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Pt=B7:Pt=U7,Pt.apply(null,arguments)}function rp(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function _t(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Pi(){this.s=this.s,this.o=this.o}var $7=0;Pi.prototype.s=!1;Pi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),$7!=0)&&L7(this)};Pi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var X2=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function sv(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function B2(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(mp(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function kt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}kt.prototype.h=function(){this.defaultPrevented=!0};var H7=function(){if(!Y.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};Y.addEventListener("test",n,e),Y.removeEventListener("test",n,e)}catch{}return t}();function Yl(t){return/^[\s\xa0]*$/.test(t)}function _p(){var t=Y.navigator;return t&&(t=t.userAgent)?t:""}function vr(t){return _p().indexOf(t)!=-1}function ov(t){return ov[" "](t),t}ov[" "]=function(){};function q7(t,e){var n=Rj;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var G7=vr("Opera"),Ta=vr("Trident")||vr("MSIE"),J2=vr("Edge"),$y=J2||Ta,eA=vr("Gecko")&&!(_p().toLowerCase().indexOf("webkit")!=-1&&!vr("Edge"))&&!(vr("Trident")||vr("MSIE"))&&!vr("Edge"),z7=_p().toLowerCase().indexOf("webkit")!=-1&&!vr("Edge");function tA(){var t=Y.document;return t?t.documentMode:void 0}var Hy;e:{if(ip="",sp=function(){var t=_p();if(eA)return/rv:([^\);]+)(\)|;)/.exec(t);if(J2)return/Edge\/([\d\.]+)/.exec(t);if(Ta)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(z7)return/WebKit\/(\S+)/.exec(t);if(G7)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),sp&&(ip=sp?sp[1]:""),Ta&&(op=tA(),op!=null&&op>parseFloat(ip))){Hy=String(op);break e}Hy=ip}var ip,sp,op,qy;Y.document&&Ta?(Ly=tA(),qy=Ly||parseInt(Hy,10)||void 0):qy=void 0;var Ly,W7=qy;function Zl(t,e){if(kt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(eA){e:{try{ov(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:K7[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Zl.$.h.call(this)}}_t(Zl,kt);var K7={2:"touch",3:"pen",4:"mouse"};Zl.prototype.h=function(){Zl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var su="closure_listenable_"+(1e6*Math.random()|0),Q7=0;function Y7(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++Q7,this.fa=this.ia=!1}function xp(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function av(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function Z7(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function nA(t){let e={};for(let n in t)e[n]=t[n];return e}var U2="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rA(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<U2.length;s++)n=U2[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function yp(t){this.src=t,this.g={},this.h=0}yp.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=zy(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new Y7(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Gy(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=X2(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(xp(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function zy(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var cv="closure_lm_"+(1e6*Math.random()|0),jy={};function iA(t,e,n,r,i){if(r&&r.once)return oA(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)iA(t,e[s],n,r,i);return null}return n=dv(n),t&&t[su]?t.O(e,n,iu(r)?!!r.capture:!!r,i):sA(t,e,n,!1,r,i)}function sA(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=iu(i)?!!i.capture:!!i,a=uv(t);if(a||(t[cv]=a=new yp(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=X7(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)H7||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(cA(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function X7(){function t(n){return e.call(t.src,t.listener,n)}let e=J7;return t}function oA(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)oA(t,e[s],n,r,i);return null}return n=dv(n),t&&t[su]?t.P(e,n,iu(r)?!!r.capture:!!r,i):sA(t,e,n,!0,r,i)}function aA(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)aA(t,e[s],n,r,i);else r=iu(r)?!!r.capture:!!r,n=dv(n),t&&t[su]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=zy(s,n,r,i),-1<n&&(xp(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=uv(t))&&(e=t.g[e.toString()],t=-1,e&&(t=zy(e,n,r,i)),(n=-1<t?e[t]:null)&&lv(n))}function lv(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[su])Gy(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(cA(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=uv(e))?(Gy(n,t),n.h==0&&(n.src=null,e[cv]=null)):xp(t)}}}function cA(t){return t in jy?jy[t]:jy[t]="on"+t}function J7(t,e){if(t.fa)t=!0;else{e=new Zl(e,this);var n=t.listener,r=t.la||t.src;t.ia&&lv(t),t=n.call(r,e)}return t}function uv(t){return t=t[cv],t instanceof yp?t:null}var By="__closure_events_fn_"+(1e9*Math.random()>>>0);function dv(t){return typeof t=="function"?t:(t[By]||(t[By]=function(e){return t.handleEvent(e)}),t[By])}function mt(){Pi.call(this),this.i=new yp(this),this.S=this,this.J=null}_t(mt,Pi);mt.prototype[su]=!0;mt.prototype.removeEventListener=function(t,e,n,r){aA(this,t,e,n,r)};function St(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new kt(e,t);else if(e instanceof kt)e.target=e.target||t;else{var i=e;e=new kt(r,t),rA(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=ap(o,r,!0,e)&&i}if(o=e.g=t,i=ap(o,r,!0,e)&&i,i=ap(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=ap(o,r,!1,e)&&i}mt.prototype.N=function(){if(mt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)xp(n[r]);delete t.g[e],t.h--}}this.J=null};mt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};mt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function ap(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Gy(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var hv=Y.JSON.stringify,Wy=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function ej(){var t=fv;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Ky=class{constructor(){this.h=this.g=null}add(e,n){let r=lA.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},lA=new Wy(()=>new Qy,t=>t.reset()),Qy=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function tj(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function nj(t){Y.setTimeout(()=>{throw t},0)}var Xl,Jl=!1,fv=new Ky,uA=()=>{let t=Y.Promise.resolve(void 0);Xl=()=>{t.then(rj)}},rj=()=>{for(var t;t=ej();){try{t.h.call(t.g)}catch(n){nj(n)}var e=lA;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Jl=!1};function vp(t,e){mt.call(this),this.h=t||1,this.g=e||Y,this.j=Pt(this.qb,this),this.l=Date.now()}_t(vp,mt);R=vp.prototype;R.ga=!1;R.T=null;R.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),St(this,"tick"),this.ga&&(pv(this),this.start()))}};R.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function pv(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}R.N=function(){vp.$.N.call(this),pv(this),delete this.g};function gv(t,e,n){if(typeof t=="function")n&&(t=Pt(t,n));else if(t&&typeof t.handleEvent=="function")t=Pt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Y.setTimeout(t,e||0)}function dA(t){t.g=gv(()=>{t.g=null,t.i&&(t.i=!1,dA(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var Yy=class extends Pi{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:dA(this)}N(){super.N(),this.g&&(Y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function eu(t){Pi.call(this),this.h=t,this.g={}}_t(eu,Pi);var $2=[];function hA(t,e,n,r){Array.isArray(n)||(n&&($2[0]=n.toString()),n=$2);for(var i=0;i<n.length;i++){var s=iA(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function fA(t){av(t.g,function(e,n){this.g.hasOwnProperty(n)&&lv(e)},t),t.g={}}eu.prototype.N=function(){eu.$.N.call(this),fA(this)};eu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function wp(){this.g=!0}wp.prototype.Ea=function(){this.g=!1};function ij(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var d=u.split("_");o=2<=d.length&&d[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function sj(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Ca(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+aj(t,n)+(r?" "+r:"")})}function oj(t,e){t.info(function(){return"TIMEOUT: "+e})}wp.prototype.info=function(){};function aj(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return hv(n)}catch{return e}}var Us={},H2=null;function bp(){return H2=H2||new mt}Us.Ta="serverreachability";function pA(t){kt.call(this,Us.Ta,t)}_t(pA,kt);function tu(t){let e=bp();St(e,new pA(e))}Us.STAT_EVENT="statevent";function gA(t,e){kt.call(this,Us.STAT_EVENT,t),this.stat=e}_t(gA,kt);function Gt(t){let e=bp();St(e,new gA(e,t))}Us.Ua="timingevent";function mA(t,e){kt.call(this,Us.Ua,t),this.size=e}_t(mA,kt);function ou(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Y.setTimeout(function(){t()},e)}var Ep={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},_A={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function mv(){}mv.prototype.h=null;function q2(t){return t.h||(t.h=t.i())}function xA(){}var au={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function _v(){kt.call(this,"d")}_t(_v,kt);function xv(){kt.call(this,"c")}_t(xv,kt);var Zy;function Ip(){}_t(Ip,mv);Ip.prototype.g=function(){return new XMLHttpRequest};Ip.prototype.i=function(){return{}};Zy=new Ip;function cu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new eu(this),this.P=cj,t=$y?125:void 0,this.V=new vp(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new yA}function yA(){this.i=null,this.g="",this.h=!1}var cj=45e3,vA={},Xy={};R=cu.prototype;R.setTimeout=function(t){this.P=t};function Jy(t,e,n){t.L=1,t.A=Dp(Zr(e)),t.u=n,t.S=!0,wA(t,null)}function wA(t,e){t.G=Date.now(),lu(t),t.B=Zr(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),AA(n.i,"t",r),t.o=0,n=t.l.J,t.h=new yA,t.g=YA(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Yy(Pt(t.Pa,t,t.g),t.O)),hA(t.U,t.g,"readystatechange",t.nb),e=t.I?nA(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),tu(),ij(t.j,t.v,t.B,t.m,t.W,t.u)}R.nb=function(t){t=t.target;let e=this.M;e&&wr(t)==3?e.l():this.Pa(t)};R.Pa=function(t){try{if(t==this.g)e:{let u=wr(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>u)&&(u!=3||$y||this.g&&(this.h.h||this.g.ja()||K2(this.g)))){this.J||u!=4||e==7||(e==8||0>=d?tu(3):tu(2)),Cp(this);var n=this.g.da();this.ca=n;t:if(bA(this)){var r=K2(this.g);t="";var i=r.length,s=wr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ls(this),Ql(this);var o="";break t}this.h.i=new Y.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,sj(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yl(a)){var l=a;break t}}l=null}if(n=l)Ca(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ev(this,n);else{this.i=!1,this.s=3,Gt(12),Ls(this),Ql(this);break e}}this.S?(EA(this,u,o),$y&&this.i&&u==3&&(hA(this.U,this.V,"tick",this.mb),this.V.start())):(Ca(this.j,this.m,o,null),ev(this,o)),u==4&&Ls(this),this.i&&!this.J&&(u==4?zA(this.l,this):(this.i=!1,lu(this)))}else Aj(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Gt(12)):(this.s=0,Gt(13)),Ls(this),Ql(this)}}}catch{}finally{}};function bA(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function EA(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=lj(t,n),i==Xy){e==4&&(t.s=4,Gt(14),r=!1),Ca(t.j,t.m,null,"[Incomplete Response]");break}else if(i==vA){t.s=4,Gt(15),Ca(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ca(t.j,t.m,i,null),ev(t,i);bA(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Gt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Iv(e),e.M=!0,Gt(11))):(Ca(t.j,t.m,n,"[Invalid Chunked Response]"),Ls(t),Ql(t))}R.mb=function(){if(this.g){var t=wr(this.g),e=this.g.ja();this.o<e.length&&(Cp(this),EA(this,t,e),this.i&&t!=4&&lu(this))}};function lj(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Xy:(n=Number(e.substring(n,r)),isNaN(n)?vA:(r+=1,r+n>e.length?Xy:(e=e.slice(r,r+n),t.o=r+n,e)))}R.cancel=function(){this.J=!0,Ls(this)};function lu(t){t.Y=Date.now()+t.P,IA(t,t.P)}function IA(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=ou(Pt(t.lb,t),e)}function Cp(t){t.C&&(Y.clearTimeout(t.C),t.C=null)}R.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(oj(this.j,this.B),this.L!=2&&(tu(),Gt(17)),Ls(this),this.s=2,Ql(this)):IA(this,this.Y-t)};function Ql(t){t.l.H==0||t.J||zA(t.l,t)}function Ls(t){Cp(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,pv(t.V),fA(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function ev(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||tv(n.i,t))){if(!t.K&&tv(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)hp(n),Ap(n);else break e;Ev(n),Gt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=ou(Pt(n.ib,n),6e3));if(1>=RA(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else js(n,11)}else if((t.K||n.g==t)&&hp(n),!Yl(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];let u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));let d=l[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=l[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(yv(s,s.h),s.h=null))}if(r.F){let m=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.Da=m,Oe(r.I,r.F,m))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=QA(r,r.J?r.pa:null,r.Y),o.K){PA(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(Cp(a),lu(a)),r.g=o}else qA(r);0<n.j.length&&Mp(n)}else l[0]!="stop"&&l[0]!="close"||js(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?js(n,7):bv(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}tu(4)}catch{}}function uj(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(mp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function dj(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(mp(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function CA(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(mp(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=dj(t),r=uj(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var DA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hj(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Bs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Bs){this.h=t.h,up(this,t.j),this.s=t.s,this.g=t.g,dp(this,t.m),this.l=t.l;var e=t.i,n=new nu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),G2(this,n),this.o=t.o}else t&&(e=String(t).match(DA))?(this.h=!1,up(this,e[1]||"",!0),this.s=Wl(e[2]||""),this.g=Wl(e[3]||"",!0),dp(this,e[4]),this.l=Wl(e[5]||"",!0),G2(this,e[6]||"",!0),this.o=Wl(e[7]||"")):(this.h=!1,this.i=new nu(null,this.h))}Bs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Kl(e,z2,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Kl(e,z2,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Kl(n,n.charAt(0)=="/"?gj:pj,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Kl(n,_j)),t.join("")};function Zr(t){return new Bs(t)}function up(t,e,n){t.j=n?Wl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function dp(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function G2(t,e,n){e instanceof nu?(t.i=e,xj(t.i,t.h)):(n||(e=Kl(e,mj)),t.i=new nu(e,t.h))}function Oe(t,e,n){t.i.set(e,n)}function Dp(t){return Oe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Wl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Kl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,fj),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function fj(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var z2=/[#\/\?@]/g,pj=/[#\?:]/g,gj=/[#\?]/g,mj=/[#\?@]/g,_j=/#/g;function nu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ki(t){t.g||(t.g=new Map,t.h=0,t.i&&hj(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}R=nu.prototype;R.add=function(t,e){ki(this),this.i=null,t=Sa(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function TA(t,e){ki(t),e=Sa(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function SA(t,e){return ki(t),e=Sa(t,e),t.g.has(e)}R.forEach=function(t,e){ki(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};R.ta=function(){ki(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};R.Z=function(t){ki(this);let e=[];if(typeof t=="string")SA(this,t)&&(e=e.concat(this.g.get(Sa(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};R.set=function(t,e){return ki(this),this.i=null,t=Sa(this,t),SA(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};R.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function AA(t,e,n){TA(t,e),0<n.length&&(t.i=null,t.g.set(Sa(t,e),sv(n)),t.h+=n.length)}R.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Sa(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function xj(t,e){e&&!t.j&&(ki(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(TA(this,r),AA(this,i,n))},t)),t.j=e}var yj=class{constructor(t,e){this.g=t,this.map=e}};function MA(t){this.l=t||vj,Y.PerformanceNavigationTiming?(t=Y.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Y.g&&Y.g.Ka&&Y.g.Ka()&&Y.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var vj=10;function NA(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function RA(t){return t.h?1:t.g?t.g.size:0}function tv(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function yv(t,e){t.g?t.g.add(e):t.h=e}function PA(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}MA.prototype.cancel=function(){if(this.i=kA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function kA(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return sv(t.i)}var wj=class{stringify(t){return Y.JSON.stringify(t,void 0)}parse(t){return Y.JSON.parse(t,void 0)}};function bj(){this.g=new wj}function Ej(t,e,n){let r=n||"";try{CA(t,function(i,s){let o=i;iu(i)&&(o=hv(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ij(t,e){let n=new wp;if(Y.Image){let r=new Image;r.onload=rp(cp,n,r,"TestLoadImage: loaded",!0,e),r.onerror=rp(cp,n,r,"TestLoadImage: error",!1,e),r.onabort=rp(cp,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=rp(cp,n,r,"TestLoadImage: timeout",!1,e),Y.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function cp(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function uu(t){this.l=t.ec||null,this.j=t.ob||!1}_t(uu,mv);uu.prototype.g=function(){return new Tp(this.l,this.j)};uu.prototype.i=function(t){return function(){return t}}({});function Tp(t,e){mt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=vv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_t(Tp,mt);var vv=0;R=Tp.prototype;R.open=function(t,e){if(this.readyState!=vv)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ru(this)};R.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Y).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};R.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,du(this)),this.readyState=vv};R.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ru(this)),this.g&&(this.readyState=3,ru(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Y.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;OA(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function OA(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}R.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?du(this):ru(this),this.readyState==3&&OA(this)}};R.Za=function(t){this.g&&(this.response=this.responseText=t,du(this))};R.Ya=function(t){this.g&&(this.response=t,du(this))};R.ka=function(){this.g&&du(this)};function du(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ru(t)}R.setRequestHeader=function(t,e){this.v.append(t,e)};R.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};R.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function ru(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Tp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Cj=Y.JSON.parse;function He(t){mt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=FA,this.L=this.M=!1}_t(He,mt);var FA="",Dj=/^https?$/i,Tj=["POST","PUT"];R=He.prototype;R.Oa=function(t){this.M=t};R.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Zy.g(),this.C=this.u?q2(this.u):q2(Zy),this.g.onreadystatechange=Pt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){W2(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=Y.FormData&&t instanceof Y.FormData,!(0<=X2(Tj,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{jA(this),0<this.B&&((this.L=Sj(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Pt(this.ua,this)):this.A=gv(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){W2(this,s)}};function Sj(t){return Ta&&typeof t.timeout=="number"&&t.ontimeout!==void 0}R.ua=function(){typeof iv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,St(this,"timeout"),this.abort(8))};function W2(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,VA(t),Sp(t)}function VA(t){t.F||(t.F=!0,St(t,"complete"),St(t,"error"))}R.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,St(this,"complete"),St(this,"abort"),Sp(this))};R.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Sp(this,!0)),He.$.N.call(this)};R.La=function(){this.s||(this.G||this.v||this.l?LA(this):this.kb())};R.kb=function(){LA(this)};function LA(t){if(t.h&&typeof iv<"u"&&(!t.C[1]||wr(t)!=4||t.da()!=2)){if(t.v&&wr(t)==4)gv(t.La,0,t);else if(St(t,"readystatechange"),wr(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(DA)[1]||null;!i&&Y.self&&Y.self.location&&(i=Y.self.location.protocol.slice(0,-1)),r=!Dj.test(i?i.toLowerCase():"")}n=r}if(n)St(t,"complete"),St(t,"success");else{t.m=6;try{var s=2<wr(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",VA(t)}}finally{Sp(t)}}}}function Sp(t,e){if(t.g){jA(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||St(t,"ready");try{n.onreadystatechange=r}catch{}}}function jA(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Y.clearTimeout(t.A),t.A=null)}R.isActive=function(){return!!this.g};function wr(t){return t.g?t.g.readyState:0}R.da=function(){try{return 2<wr(this)?this.g.status:-1}catch{return-1}};R.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};R.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Cj(e)}};function K2(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case FA:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Aj(t){let e={};t=(t.g&&2<=wr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Yl(t[r]))continue;var n=tj(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}Z7(e,function(r){return r.join(", ")})}R.Ia=function(){return this.m};R.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function BA(t){let e="";return av(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function wv(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=BA(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Oe(t,e,n))}function Gl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function UA(t){this.Ga=0,this.j=[],this.l=new wp,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Gl("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Gl("baseRetryDelayMs",5e3,t),this.hb=Gl("retryDelaySeedMs",1e4,t),this.eb=Gl("forwardChannelMaxRetries",2,t),this.xa=Gl("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new MA(t&&t.concurrentRequestLimit),this.Ja=new bj,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}R=UA.prototype;R.ra=8;R.H=1;function bv(t){if($A(t),t.H==3){var e=t.W++,n=Zr(t.I);if(Oe(n,"SID",t.K),Oe(n,"RID",e),Oe(n,"TYPE","terminate"),hu(t,n),e=new cu(t,t.l,e),e.L=2,e.A=Dp(Zr(n)),n=!1,Y.navigator&&Y.navigator.sendBeacon)try{n=Y.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&Y.Image&&(new Image().src=e.A,n=!0),n||(e.g=YA(e.l,null),e.g.ha(e.A)),e.G=Date.now(),lu(e)}KA(t)}function Ap(t){t.g&&(Iv(t),t.g.cancel(),t.g=null)}function $A(t){Ap(t),t.u&&(Y.clearTimeout(t.u),t.u=null),hp(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Y.clearTimeout(t.m),t.m=null)}function Mp(t){if(!NA(t.i)&&!t.m){t.m=!0;var e=t.Na;Xl||uA(),Jl||(Xl(),Jl=!0),fv.add(e,t),t.C=0}}function Mj(t,e){return RA(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=ou(Pt(t.Na,t,e),WA(t,t.C)),t.C++,!0)}R.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new cu(this,this.l,t),s=this.s;if(this.U&&(s?(s=nA(s),rA(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=HA(this,i,e),n=Zr(this.I),Oe(n,"RID",t),Oe(n,"CVER",22),this.F&&Oe(n,"X-HTTP-Session-Id",this.F),hu(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(BA(s)))+"&"+e:this.o&&wv(n,this.o,s)),yv(this.i,i),this.bb&&Oe(n,"TYPE","init"),this.P?(Oe(n,"$req",e),Oe(n,"SID","null"),i.aa=!0,Jy(i,n,null)):Jy(i,n,e),this.H=2}}else this.H==3&&(t?Q2(this,t):this.j.length==0||NA(this.i)||Q2(this))};function Q2(t,e){var n;e?n=e.m:n=t.W++;let r=Zr(t.I);Oe(r,"SID",t.K),Oe(r,"RID",n),Oe(r,"AID",t.V),hu(t,r),t.o&&t.s&&wv(r,t.o,t.s),n=new cu(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=HA(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),yv(t.i,n),Jy(n,r,e)}function hu(t,e){t.na&&av(t.na,function(n,r){Oe(e,r,n)}),t.h&&CA({},function(n,r){Oe(e,r,n)})}function HA(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Pt(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let l=i[c].g,u=i[c].map;if(l-=s,0>l)s=Math.max(0,i[c].g-100),a=!1;else try{Ej(u,o,"req"+l+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function qA(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Xl||uA(),Jl||(Xl(),Jl=!0),fv.add(e,t),t.A=0}}function Ev(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=ou(Pt(t.Ma,t),WA(t,t.A)),t.A++,!0)}R.Ma=function(){if(this.u=null,GA(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ou(Pt(this.jb,this),t)}};R.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Gt(10),Ap(this),GA(this))};function Iv(t){t.B!=null&&(Y.clearTimeout(t.B),t.B=null)}function GA(t){t.g=new cu(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Zr(t.wa);Oe(e,"RID","rpc"),Oe(e,"SID",t.K),Oe(e,"AID",t.V),Oe(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Oe(e,"TO",t.qa),Oe(e,"TYPE","xmlhttp"),hu(t,e),t.o&&t.s&&wv(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Dp(Zr(e)),n.u=null,n.S=!0,wA(n,t)}R.ib=function(){this.v!=null&&(this.v=null,Ap(this),Ev(this),Gt(19))};function hp(t){t.v!=null&&(Y.clearTimeout(t.v),t.v=null)}function zA(t,e){var n=null;if(t.g==e){hp(t),Iv(t),t.g=null;var r=2}else if(tv(t.i,e))n=e.F,PA(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=bp(),St(r,new mA(r,n)),Mp(t)}else qA(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&Mj(t,e)||r==2&&Ev(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:js(t,5);break;case 4:js(t,10);break;case 3:js(t,6);break;default:js(t,2)}}}function WA(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function js(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Pt(t.pb,t);n||(n=new Bs("//www.google.com/images/cleardot.gif"),Y.location&&Y.location.protocol=="http"||up(n,"https"),Dp(n)),Ij(n.toString(),r)}else Gt(2);t.H=0,t.h&&t.h.za(e),KA(t),$A(t)}R.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Gt(2)):(this.l.info("Failed to ping google.com"),Gt(1))};function KA(t){if(t.H=0,t.ma=[],t.h){let e=kA(t.i);(e.length!=0||t.j.length!=0)&&(B2(t.ma,e),B2(t.ma,t.j),t.i.i.length=0,sv(t.j),t.j.length=0),t.h.ya()}}function QA(t,e,n){var r=n instanceof Bs?Zr(n):new Bs(n);if(r.g!="")e&&(r.g=e+"."+r.g),dp(r,r.m);else{var i=Y.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Bs(null);r&&up(s,r),e&&(s.g=e),i&&dp(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Oe(r,n,e),Oe(r,"VER",t.ra),hu(t,r),r}function YA(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new He(new uu({ob:n})):new He(t.va),e.Oa(t.J),e}R.isActive=function(){return!!this.h&&this.h.isActive(this)};function ZA(){}R=ZA.prototype;R.Ba=function(){};R.Aa=function(){};R.za=function(){};R.ya=function(){};R.isActive=function(){return!0};R.Va=function(){};function fp(){if(Ta&&!(10<=Number(W7)))throw Error("Environmental error: no available transport.")}fp.prototype.g=function(t,e){return new mn(t,e)};function mn(t,e){mt.call(this),this.g=new UA(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Yl(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yl(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Aa(this)}_t(mn,mt);mn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Gt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=QA(t,null,t.Y),Mp(t)};mn.prototype.close=function(){bv(this.g)};mn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=hv(t),t=n);e.j.push(new yj(e.fb++,t)),e.H==3&&Mp(e)};mn.prototype.N=function(){this.g.h=null,delete this.j,bv(this.g),delete this.g,mn.$.N.call(this)};function XA(t){_v.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}_t(XA,_v);function JA(){xv.call(this),this.status=1}_t(JA,xv);function Aa(t){this.g=t}_t(Aa,ZA);Aa.prototype.Ba=function(){St(this.g,"a")};Aa.prototype.Aa=function(t){St(this.g,new XA(t))};Aa.prototype.za=function(t){St(this.g,new JA)};Aa.prototype.ya=function(){St(this.g,"b")};function Nj(){this.blockSize=-1}function Xn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}_t(Xn,Nj);Xn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Uy(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Xn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Uy(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Uy(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Uy(this,r),i=0;break}}this.h=i,this.i+=e};Xn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ce(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var Rj={};function Cv(t){return-128<=t&&128>t?q7(t,function(e){return new Ce([e|0],0>e?-1:0)}):new Ce([t|0],0>t?-1:0)}function br(t){if(isNaN(t)||!isFinite(t))return Da;if(0>t)return Tt(br(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=nv;return new Ce(e,0)}function eM(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Tt(eM(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=br(Math.pow(e,8)),r=Da,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=br(Math.pow(e,s)),r=r.R(s).add(br(o))):(r=r.R(n),r=r.add(br(o)))}return r}var nv=4294967296,Da=Cv(0),rv=Cv(1),Y2=Cv(16777216);R=Ce.prototype;R.ea=function(){if(Rn(this))return-Tt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:nv+r)*e,e*=nv}return t};R.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Yr(this))return"0";if(Rn(this))return"-"+Tt(this).toString(t);for(var e=br(Math.pow(t,6)),n=this,r="";;){var i=gp(n,e).g;n=pp(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Yr(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};R.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Yr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Rn(t){return t.h==-1}R.X=function(t){return t=pp(this,t),Rn(t)?-1:Yr(t)?0:1};function Tt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ce(n,~t.h).add(rv)}R.abs=function(){return Rn(this)?Tt(this):this};R.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Ce(n,n[n.length-1]&-2147483648?-1:0)};function pp(t,e){return t.add(Tt(e))}R.R=function(t){if(Yr(this)||Yr(t))return Da;if(Rn(this))return Rn(t)?Tt(this).R(Tt(t)):Tt(Tt(this).R(t));if(Rn(t))return Tt(this.R(Tt(t)));if(0>this.X(Y2)&&0>t.X(Y2))return br(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,lp(n,2*r+2*i),n[2*r+2*i+1]+=s*c,lp(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,lp(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,lp(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ce(n,0)};function lp(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function zl(t,e){this.g=t,this.h=e}function gp(t,e){if(Yr(e))throw Error("division by zero");if(Yr(t))return new zl(Da,Da);if(Rn(t))return e=gp(Tt(t),e),new zl(Tt(e.g),Tt(e.h));if(Rn(e))return e=gp(t,Tt(e)),new zl(Tt(e.g),e.h);if(30<t.g.length){if(Rn(t)||Rn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=rv,r=e;0>=r.X(t);)n=Z2(n),r=Z2(r);var i=Ia(n,1),s=Ia(r,1);for(r=Ia(r,2),n=Ia(n,2);!Yr(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Ia(r,1),n=Ia(n,1)}return e=pp(t,i.R(e)),new zl(i,e)}for(i=Da;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=br(n),o=s.R(e);Rn(o)||0<o.X(t);)n-=r,s=br(n),o=s.R(e);Yr(s)&&(s=rv),i=i.add(s),t=pp(t,o)}return new zl(i,t)}R.gb=function(t){return gp(this,t).h};R.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ce(n,this.h&t.h)};R.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ce(n,this.h|t.h)};R.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ce(n,this.h^t.h)};function Z2(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ce(n,t.h)}function Ia(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Ce(i,t.h)}fp.prototype.createWebChannel=fp.prototype.g;mn.prototype.send=mn.prototype.u;mn.prototype.open=mn.prototype.m;mn.prototype.close=mn.prototype.close;Ep.NO_ERROR=0;Ep.TIMEOUT=8;Ep.HTTP_ERROR=6;_A.COMPLETE="complete";xA.EventType=au;au.OPEN="a";au.CLOSE="b";au.ERROR="c";au.MESSAGE="d";mt.prototype.listen=mt.prototype.O;He.prototype.listenOnce=He.prototype.P;He.prototype.getLastError=He.prototype.Sa;He.prototype.getLastErrorCode=He.prototype.Ia;He.prototype.getStatus=He.prototype.da;He.prototype.getResponseJson=He.prototype.Wa;He.prototype.getResponseText=He.prototype.ja;He.prototype.send=He.prototype.ha;He.prototype.setWithCredentials=He.prototype.Oa;Xn.prototype.digest=Xn.prototype.l;Xn.prototype.reset=Xn.prototype.reset;Xn.prototype.update=Xn.prototype.j;Ce.prototype.add=Ce.prototype.add;Ce.prototype.multiply=Ce.prototype.R;Ce.prototype.modulo=Ce.prototype.gb;Ce.prototype.compare=Ce.prototype.X;Ce.prototype.toNumber=Ce.prototype.ea;Ce.prototype.toString=Ce.prototype.toString;Ce.prototype.getBits=Ce.prototype.D;Ce.fromNumber=br;Ce.fromString=eM;var tM=Jn.createWebChannelTransport=function(){return new fp},nM=Jn.getStatEventTarget=function(){return bp()},Np=Jn.ErrorCode=Ep,rM=Jn.EventType=_A,iM=Jn.Event=Us,Dv=Jn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ate=Jn.FetchXmlHttpFactory=uu,fu=Jn.WebChannel=xA,sM=Jn.XhrIo=He,oM=Jn.Md5=Xn,$s=Jn.Integer=Ce;var aM="@firebase/firestore";var ot=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ot.UNAUTHENTICATED=new ot(null),ot.GOOGLE_CREDENTIALS=new ot("google-credentials-uid"),ot.FIRST_PARTY=new ot("first-party-uid"),ot.MOCK_USER=new ot("mock-user");var oc="10.10.0";var Ui=new ui("@firebase/firestore");function ka(){return Ui.logLevel}function aN(t){Ui.setLogLevel(t)}function E(t,...e){if(Ui.logLevel<=In.DEBUG){let n=e.map(Ab);Ui.debug(`Firestore (${oc}): ${t}`,...n)}}function Ke(t,...e){if(Ui.logLevel<=In.ERROR){let n=e.map(Ab);Ui.error(`Firestore (${oc}): ${t}`,...n)}}function kn(t,...e){if(Ui.logLevel<=In.WARN){let n=e.map(Ab);Ui.warn(`Firestore (${oc}): ${t}`,...n)}}function Ab(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function k(t="Unexpected state"){let e=`FIRESTORE (${oc}) INTERNAL ASSERTION FAILED: `+t;throw Ke(e),new Error(e)}function L(t,e){t||k()}function cN(t,e){t||k()}function N(t,e){return t}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},w=class extends NC{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var at=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var $p=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Nv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ot.UNAUTHENTICATED))}shutdown(){}},Rv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Pv=class{constructor(e){this.t=e,this.currentUser=ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new at;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new at,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>g(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{E("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(E("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new at)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(E("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(L(typeof r.accessToken=="string"),new $p(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return L(e===null||typeof e=="string"),new ot(e)}},kv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Ov=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new kv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Fv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Vv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&E("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,E("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{E("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):E("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(L(typeof n.token=="string"),this.R=n.token,new Fv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function kj(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Hp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=kj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function J(t,e){return t<e?-1:t>e?1:0}function Ha(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function lN(t){return t+"\0"}var Be=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new w(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new w(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new w(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new w(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var U=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Be(0,0))}static max(){return new t(new Be(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var qp=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&k(),r===void 0?r=e.length-n:r>e.length-n&&k(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},me=class t extends qp{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new w(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},Oj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Qe=class t extends qp{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return Oj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new w(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new w(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new w(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new w(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var M=class t{constructor(e){this.path=e}static fromPath(e){return new t(me.fromString(e))}static fromName(e){return new t(me.fromString(e).popFirst(5))}static empty(){return new t(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new me(e.slice()))}};var qa=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function Lv(t){return t.fields.find(e=>e.kind===2)}function qs(t){return t.fields.filter(e=>e.kind!==2)}qa.UNKNOWN_ID=-1;var Ba=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Cu=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,On.min())}};function uN(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=U.fromTimestamp(r===1e9?new Be(n+1,0):new Be(n,r));return new On(i,M.empty(),e)}function dN(t){return new On(t.readTime,t.key,-1)}var On=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(U.min(),M.empty(),-1)}static max(){return new t(U.max(),M.empty(),-1)}};function Mb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=M.comparator(t.documentKey,e.documentKey),n!==0?n:J(t.largestBatchId,e.largestBatchId))}var hN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Gp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Zi(t){return g(this,null,function*(){if(t.code!==x.FAILED_PRECONDITION||t.message!==hN)throw t;E("LocalStore","Unexpectedly lost primary lease")})}var _=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&k(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(u=>{o[l]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};var zp=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new at,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ys(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Nb(r.target.error);this.V.reject(new Ys(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(s){throw new Ys(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(E("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new Bv(n)}},ei=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(jc())===12.2&&Ke("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return E("SimpleDb","Removing database:",e),Gs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Gd())return!1;if(t.C())return!0;let e=jc(),n=t.S(e),r=0<n&&n<10,i=t.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return g(this,null,function*(){return this.db||(E("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new Ys(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new w(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new w(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Ys(e,o))},i.onupgradeneeded=s=>{E("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{E("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db})}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return g(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(e);let a=zp.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),_.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(E("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},jv=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Gs(this.k.delete())}},Ys=class extends w{constructor(e,n){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Xi(t){return t.name==="IndexedDbTransactionError"}var Bv=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(E("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(E("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Gs(r)}add(e){return E("SimpleDb","ADD",this.store.name,e,e),Gs(this.store.add(e))}get(e){return Gs(this.store.get(e)).next(n=>(n===void 0&&(n=null),E("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return E("SimpleDb","DELETE",this.store.name,e),Gs(this.store.delete(e))}count(){return E("SimpleDb","COUNT",this.store.name),Gs(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new _((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.G(s,(a,c)=>{o.push(c)}).next(()=>o)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new _((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){E("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new _((r,i)=>{n.onerror=s=>{let o=Nb(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){let r=[];return new _((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new jv(a),l=n(a.primaryKey,a.value,c);if(l instanceof _){let u=l.catch(d=>(c.done(),_.reject(d)));r.push(u)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>_.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Gs(t){return new _((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=Nb(r.target.error);n(i)}})}var cM=!1;function Nb(t){let e=ei.S(jc());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new w("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cM||(cM=!0,setTimeout(()=>{throw r},0)),r}}return t}var Uv=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){E("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>g(this,null,function*(){this.task=null;try{E("IndexBackfiller",`Documents written: ${yield this.X.te()}`)}catch(n){Xi(n)?E("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield Zi(n)}yield this.ee(6e4)}))}},$v=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return g(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let r=new Set,i=n,s=!0;return _.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return E("IndexBackfiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(E("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{let o=dN(s);Mb(o,r)>0&&(r=o)}),new On(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var _n=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Wu(t){return t==null}function Du(t){return t===0&&1/t==-1/0}function fN(t){return typeof t=="number"&&Number.isInteger(t)&&!Du(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function zt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=lM(e)),e=Fj(t.get(n),e);return lM(e)}function Fj(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function lM(t){return t+""}function Er(t){let e=t.length;if(L(e>=2),e===2)return L(t.charAt(0)===""&&t.charAt(1)===""),me.emptyPath();let n=e-2,r=[],i="";for(let s=0;s<e;){let o=t.indexOf("",s);switch((o<0||o>n)&&k(),t.charAt(o+1)){case"":let a=t.substring(s,o),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:k()}s=o+2}return new me(r)}var uM=["userId","batchId"];function Fp(t,e){return[t,zt(e)]}function pN(t,e,n){return[t,zt(e),n]}var Vj={},Lj=["prefixPath","collectionGroup","readTime","documentId"],jj=["prefixPath","collectionGroup","documentId"],Bj=["collectionGroup","readTime","prefixPath","documentId"],Uj=["canonicalId","targetId"],$j=["targetId","path"],Hj=["path","targetId"],qj=["collectionId","parent"],Gj=["indexId","uid"],zj=["uid","sequenceNumber"],Wj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Kj=["indexId","uid","orderedDocumentKey"],Qj=["userId","collectionPath","documentId"],Yj=["userId","collectionPath","largestBatchId"],Zj=["userId","collectionGroup","largestBatchId"],gN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Xj=[...gN,"documentOverlays"],mN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_N=mN,Jj=[..._N,"indexConfiguration","indexState","indexEntries"];var Tu=class extends Gp{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function yt(t,e){let n=N(t);return ei.M(n.ae,e)}function dM(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function co(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Fe=class t{constructor(e,n){this.comparator=e,this.root=n||Cr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Cr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ja(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ja(this.root,e,this.comparator,!1)}getReverseIterator(){return new ja(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ja(this.root,e,this.comparator,!0)}},ja=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Cr=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw k();let e=this.left.check();if(e!==this.right.check())throw k();return e+(this.isRed()?0:1)}};Cr.EMPTY=null,Cr.RED=!0,Cr.BLACK=!1;Cr.EMPTY=new class{constructor(){this.size=0}get key(){throw k()}get value(){throw k()}get color(){throw k()}get left(){throw k()}get right(){throw k()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Cr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ne=class t{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Wp(this.data.getIterator())}getIteratorFrom(e){return new Wp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Wp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Ma(t){return t.hasNext()?t.getNext():void 0}var xn=class t{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ne(Qe.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ha(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Kp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function yN(){return typeof atob<"u"}var xt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Kp("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};xt.EMPTY_BYTE_STRING=new xt("");var eB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $i(t){if(L(!!t),typeof t=="string"){let e=0,n=eB.exec(t);if(L(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(t.seconds),nanos:qe(t.nanos)}}function qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hi(t){return typeof t=="string"?xt.fromBase64String(t):xt.fromUint8Array(t)}function Lg(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Rb(t){let e=t.mapValue.fields.__previous_value__;return Lg(e)?Rb(e):e}function Su(t){let e=$i(t.mapValue.fields.__local_write_time__.timestampValue);return new Be(e.seconds,e.nanos)}var Hv=class{constructor(e,n,r,i,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},qi=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var ji={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Vp={nullValue:"NULL_VALUE"};function Zs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lg(t)?4:vN(t)?9007199254740991:10:k()}function Sr(t,e){if(t===e)return!0;let n=Zs(t);if(n!==Zs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Su(t).isEqual(Su(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=$i(i.timestampValue),a=$i(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Hi(i.bytesValue).isEqual(Hi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return qe(i.geoPointValue.latitude)===qe(s.geoPointValue.latitude)&&qe(i.geoPointValue.longitude)===qe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return qe(i.integerValue)===qe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=qe(i.doubleValue),a=qe(s.doubleValue);return o===a?Du(o)===Du(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ha(t.arrayValue.values||[],e.arrayValue.values||[],Sr);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(dM(o)!==dM(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Sr(o[c],a[c])))return!1;return!0}(t,e);default:return k()}}function Au(t,e){return(t.values||[]).find(n=>Sr(n,e))!==void 0}function Gi(t,e){if(t===e)return 0;let n=Zs(t),r=Zs(e);if(n!==r)return J(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return J(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=qe(s.integerValue||s.doubleValue),c=qe(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return hM(t.timestampValue,e.timestampValue);case 4:return hM(Su(t),Su(e));case 5:return J(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Hi(s),c=Hi(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=J(a[l],c[l]);if(u!==0)return u}return J(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=J(qe(s.latitude),qe(o.latitude));return a!==0?a:J(qe(s.longitude),qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){let u=Gi(a[l],c[l]);if(u)return u}return J(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===ji.mapValue&&o===ji.mapValue)return 0;if(s===ji.mapValue)return 1;if(o===ji.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let h=J(c[d],u[d]);if(h!==0)return h;let f=Gi(a[c[d]],l[u[d]]);if(f!==0)return f}return J(c.length,u.length)}(t.mapValue,e.mapValue);default:throw k()}}function hM(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return J(t,e);let n=$i(t),r=$i(e),i=J(n.seconds,r.seconds);return i!==0?i:J(n.nanos,r.nanos)}function Ga(t){return qv(t)}function qv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=$i(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Hi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return M.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=qv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${qv(n.fields[o])}`;return i+"}"}(t.mapValue):k()}function Xs(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Gv(t){return!!t&&"integerValue"in t}function Mu(t){return!!t&&"arrayValue"in t}function fM(t){return!!t&&"nullValue"in t}function pM(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lp(t){return!!t&&"mapValue"in t}function vu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return co(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function vN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function tB(t){return"nullValue"in t?Vp:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Xs(qi.empty(),M.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:k()}function nB(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Xs(qi.empty(),M.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?ji:k()}function gM(t,e){let n=Gi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function mM(t,e){let n=Gi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var Ft=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Lp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vu(n)}setAll(e){let n=Qe.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=vu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Lp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Sr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Lp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){co(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(vu(this.value))}};function wN(t){let e=[];return co(t.fields,(n,r)=>{let i=new Qe([n]);if(Lp(r)){let s=wN(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new xn(e)}var ct=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,U.min(),U.min(),U.min(),Ft.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,U.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,U.min(),U.min(),Ft.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,U.min(),U.min(),Ft.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(U.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=U.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ar=class{constructor(e,n){this.position=e,this.inclusive=n}};function _M(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=M.comparator(M.fromName(o.referenceValue),n.key):r=Gi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function xM(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Sr(t.position[n],e.position[n]))return!1;return!0}var Js=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function rB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Qp=class{},fe=class t extends Qp{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Kv(e,n,r):n==="array-contains"?new Zv(e,r):n==="in"?new Yp(e,r):n==="not-in"?new Xv(e,r):n==="array-contains-any"?new Jv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Qv(e,r):new Yv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Gi(n,this.value)):n!==null&&Zs(this.value)===Zs(n)&&this.matchesComparison(Gi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return k()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},De=class t extends Qp{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return za(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function za(t){return t.op==="and"}function zv(t){return t.op==="or"}function Pb(t){return bN(t)&&za(t)}function bN(t){for(let e of t.filters)if(e instanceof De)return!1;return!0}function Wv(t){if(t instanceof fe)return t.field.canonicalString()+t.op.toString()+Ga(t.value);if(Pb(t))return t.filters.map(e=>Wv(e)).join(",");{let e=t.filters.map(n=>Wv(n)).join(",");return`${t.op}(${e})`}}function EN(t,e){return t instanceof fe?function(r,i){return i instanceof fe&&r.op===i.op&&r.field.isEqual(i.field)&&Sr(r.value,i.value)}(t,e):t instanceof De?function(r,i){return i instanceof De&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&EN(o,i.filters[a]),!0):!1}(t,e):void k()}function IN(t,e){let n=t.filters.concat(e);return De.create(n,t.op)}function CN(t){return t instanceof fe?function(n){return`${n.field.canonicalString()} ${n.op} ${Ga(n.value)}`}(t):t instanceof De?function(n){return n.op.toString()+" {"+n.getFilters().map(CN).join(" ,")+"}"}(t):"Filter"}var Kv=class extends fe{constructor(e,n,r){super(e,n,r),this.key=M.fromName(r.referenceValue)}matches(e){let n=M.comparator(e.key,this.key);return this.matchesComparison(n)}},Qv=class extends fe{constructor(e,n){super(e,"in",n),this.keys=DN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Yv=class extends fe{constructor(e,n){super(e,"not-in",n),this.keys=DN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function DN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>M.fromName(r.referenceValue))}var Zv=class extends fe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Mu(n)&&Au(n.arrayValue,this.value)}},Yp=class extends fe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Au(this.value.arrayValue,n)}},Xv=class extends fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Au(this.value.arrayValue,n)}},Jv=class extends fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Mu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Au(this.value.arrayValue,r))}};var ew=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function tw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new ew(t,e,n,r,i,s,o)}function eo(t){let e=N(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Wv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Wu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ga(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ga(r)).join(",")),e.ce=n}return e.ce}function Ku(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!rB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!EN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xM(t.startAt,e.startAt)&&xM(t.endAt,e.endAt)}function Zp(t){return M.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Xp(t,e){return t.filters.filter(n=>n instanceof fe&&n.field.isEqual(e))}function yM(t,e,n){let r=Vp,i=!0;for(let s of Xp(t,e)){let o=Vp,a=!0;switch(s.op){case"<":case"<=":o=tB(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Vp}gM({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];gM({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function vM(t,e,n){let r=ji,i=!0;for(let s of Xp(t,e)){let o=ji,a=!0;switch(s.op){case">=":case">":o=nB(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=ji}mM({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];mM({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}var er=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function TN(t,e,n,r,i,s,o,a){return new er(t,e,n,r,i,s,o,a)}function ac(t){return new er(t)}function wM(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function kb(t){return t.collectionGroup!==null}function Ua(t){let e=N(t);if(e.le===null){e.le=[];let n=new Set;for(let s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ne(Qe.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Js(s,r))}),n.has(Qe.keyField().canonicalString())||e.le.push(new Js(Qe.keyField(),r))}return e.le}function Wt(t){let e=N(t);return e.he||(e.he=iB(e,Ua(t))),e.he}function iB(t,e){if(t.limitType==="F")return tw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Js(i.field,s)});let n=t.endAt?new Ar(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ar(t.startAt.position,t.startAt.inclusive):null;return tw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function nw(t,e){let n=t.filters.concat([e]);return new er(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Jp(t,e,n){return new er(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qu(t,e){return Ku(Wt(t),Wt(e))&&t.limitType===e.limitType}function SN(t){return`${eo(Wt(t))}|lt:${t.limitType}`}function Oa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>CN(i)).join(", ")}]`),Wu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ga(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ga(i)).join(",")),`Target(${r})`}(Wt(t))}; limitType=${t.limitType})`}function Yu(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):M.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Ua(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=_M(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Ua(r),i)||r.endAt&&!function(o,a,c){let l=_M(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Ua(r),i))}(t,e)}function AN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function MN(t){return(e,n)=>{let r=!1;for(let i of Ua(t)){let s=sB(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function sB(t,e,n){let r=t.field.isKeyField()?M.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Gi(c,l):k()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return k()}}var Mr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){co(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return xN(this.inner)}size(){return this.innerSize}};var oB=new Fe(M.comparator);function un(){return oB}var NN=new Fe(M.comparator);function xu(...t){let e=NN;for(let n of t)e=e.insert(n.key,n);return e}function RN(t){let e=NN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ir(){return wu()}function PN(){return wu()}function wu(){return new Mr(t=>t.toString(),(t,e)=>t.isEqual(e))}var aB=new Fe(M.comparator),cB=new Ne(M.comparator);function ne(...t){let e=cB;for(let n of t)e=e.add(n);return e}var lB=new Ne(J);function Ob(){return lB}function kN(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Du(e)?"-0":e}}function ON(t){return{integerValue:""+t}}function FN(t,e){return fN(e)?ON(e):kN(t,e)}var Wa=class{constructor(){this._=void 0}};function uB(t,e,n){return t instanceof zi?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Lg(s)&&(s=Rb(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ti?LN(t,e):t instanceof ni?jN(t,e):function(i,s){let o=VN(i,s),a=bM(o)+bM(i.Ie);return Gv(o)&&Gv(i.Ie)?ON(a):kN(i.serializer,a)}(t,e)}function dB(t,e,n){return t instanceof ti?LN(t,e):t instanceof ni?jN(t,e):n}function VN(t,e){return t instanceof Wi?function(r){return Gv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var zi=class extends Wa{},ti=class extends Wa{constructor(e){super(),this.elements=e}};function LN(t,e){let n=BN(e);for(let r of t.elements)n.some(i=>Sr(i,r))||n.push(r);return{arrayValue:{values:n}}}var ni=class extends Wa{constructor(e){super(),this.elements=e}};function jN(t,e){let n=BN(e);for(let r of t.elements)n=n.filter(i=>!Sr(i,r));return{arrayValue:{values:n}}}var Wi=class extends Wa{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function bM(t){return qe(t.integerValue||t.doubleValue)}function BN(t){return Mu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var to=class{constructor(e,n){this.field=e,this.transform=n}};function hB(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ti&&i instanceof ti||r instanceof ni&&i instanceof ni?Ha(r.elements,i.elements,Sr):r instanceof Wi&&i instanceof Wi?Sr(r.Ie,i.Ie):r instanceof zi&&i instanceof zi}(t.transform,e.transform)}var rw=class{constructor(e,n){this.version=e,this.transformResults=n}},Ge=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function jp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ka=class{};function UN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Qi(t.key,Ge.none()):new Ki(t.key,t.data,Ge.none());{let n=t.data,r=Ft.empty(),i=new Ne(Qe.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new tr(t.key,r,new xn(i.toArray()),Ge.none())}}function fB(t,e,n){t instanceof Ki?function(i,s,o){let a=i.value.clone(),c=IM(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof tr?function(i,s,o){if(!jp(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=IM(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll($N(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function bu(t,e,n,r){return t instanceof Ki?function(s,o,a,c){if(!jp(s.precondition,o))return a;let l=s.value.clone(),u=CM(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof tr?function(s,o,a,c){if(!jp(s.precondition,o))return a;let l=CM(s.fieldTransforms,c,o),u=o.data;return u.setAll($N(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return jp(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function pB(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=VN(r.transform,i||null);s!=null&&(n===null&&(n=Ft.empty()),n.set(r.field,s))}return n||null}function EM(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ha(r,i,(s,o)=>hB(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ki=class extends Ka{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},tr=class extends Ka{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function $N(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function IM(t,e,n){let r=new Map;L(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,dB(o,a,n[i]))}return r}function CM(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,uB(s,o,e))}return r}var Qi=class extends Ka{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Nu=class extends Ka{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ru=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&fB(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=bu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=bu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=PN();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=UN(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(U.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&Ha(this.mutations,e.mutations,(n,r)=>EM(n,r))&&Ha(this.baseMutations,e.baseMutations,(n,r)=>EM(n,r))}},iw=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){L(e.mutations.length===r.length);let i=function(){return aB}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Pu=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var sw=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var it,ge;function HN(t){switch(t){default:return k();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function qN(t){if(t===void 0)return Ke("GRPC error has no .code"),x.UNKNOWN;switch(t){case it.OK:return x.OK;case it.CANCELLED:return x.CANCELLED;case it.UNKNOWN:return x.UNKNOWN;case it.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case it.INTERNAL:return x.INTERNAL;case it.UNAVAILABLE:return x.UNAVAILABLE;case it.UNAUTHENTICATED:return x.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case it.NOT_FOUND:return x.NOT_FOUND;case it.ALREADY_EXISTS:return x.ALREADY_EXISTS;case it.PERMISSION_DENIED:return x.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case it.ABORTED:return x.ABORTED;case it.OUT_OF_RANGE:return x.OUT_OF_RANGE;case it.UNIMPLEMENTED:return x.UNIMPLEMENTED;case it.DATA_LOSS:return x.DATA_LOSS;default:return k()}}(ge=it||(it={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var DM=null;function GN(){return new TextEncoder}var gB=new $s([4294967295,4294967295],0);function TM(t){let e=GN().encode(t),n=new oM;return n.update(e),new Uint8Array(n.digest())}function SM(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new $s([n,r],0),new $s([i,s],0)]}var ow=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Qs(`Invalid padding: ${n}`);if(r<0)throw new Qs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Qs(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=$s.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply($s.fromNumber(r)));return i.compare(gB)===1&&(i=new $s([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=TM(e),[r,i]=SM(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let n=TM(e),[r,i]=SM(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);this.Re(o)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Qs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ku=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Ou.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(U.min(),i,new Fe(J),un(),ne())}},Ou=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ne(),ne(),ne())}};var $a=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},eg=class{constructor(e,n){this.targetId=e,this.fe=n}},tg=class{constructor(e,n,r=xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},ng=class{constructor(){this.ge=0,this.pe=MM(),this.ye=xt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ne(),n=ne(),r=ne();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:k()}}),new Ou(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=MM()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,L(this.ge>=0)}Le(){this.Se=!0,this.we=!0}},aw=class{constructor(e){this.Be=e,this.ke=new Map,this.qe=un(),this.Qe=AM(),this.Ke=new Fe(J)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:k()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let s=i.target;if(Zp(s))if(r===0){let o=new M(s.path);this.We(n,o,ct.newNoDocument(o,U.min()))}else L(r===1);else{let o=this.Ze(n);if(o!==r){let a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}DM?.tt(function(u,d,h,f,p){var m,y,C,F,T,H;let W={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},Z=d.unchangedNames;return Z&&(W.bloomFilter={applied:p===0,hashCount:(m=Z?.hashCount)!==null&&m!==void 0?m:0,bitmapLength:(F=(C=(y=Z?.bits)===null||y===void 0?void 0:y.bitmap)===null||C===void 0?void 0:C.length)!==null&&F!==void 0?F:0,padding:(H=(T=Z?.bits)===null||T===void 0?void 0:T.padding)!==null&&H!==void 0?H:0,mightContain:Te=>{var Xt;return(Xt=f?.mightContain(Te))!==null&&Xt!==void 0&&Xt}}),W}(o,e.fe,this.Be.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Hi(r).toUint8Array()}catch(c){if(c instanceof Kp)return kn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new ow(o,i,s)}catch(c){return kn(c instanceof Qs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Be.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&Zp(a.target)){let c=new M(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,ct.newNoDocument(c,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=ne();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let i=new ku(e,n,this.Ke,this.qe,r);return this.qe=un(),this.Qe=AM(),this.Ke=new Fe(J),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new ng,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ne(J),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||E("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new ng),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}};function AM(){return new Fe(M.comparator)}function MM(){return new Fe(M.comparator)}var mB={asc:"ASCENDING",desc:"DESCENDING"},_B={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xB={and:"AND",or:"OR"},cw=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function lw(t,e){return t.useProto3Json||Wu(e)?e:{value:e}}function Qa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function yB(t,e){return Qa(t,e.toTimestamp())}function Ye(t){return L(!!t),U.fromTimestamp(function(n){let r=$i(n);return new Be(r.seconds,r.nanos)}(t))}function Fb(t,e){return uw(t,e).canonicalString()}function uw(t,e){let n=function(i){return new me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function WN(t){let e=me.fromString(t);return L(rR(e)),e}function Fu(t,e){return Fb(t.databaseId,e.path)}function Dr(t,e){let n=WN(e);if(n.get(1)!==t.databaseId.projectId)throw new w(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new w(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new M(YN(n))}function KN(t,e){return Fb(t.databaseId,e)}function QN(t){let e=WN(t);return e.length===4?me.emptyPath():YN(e)}function dw(t){return new me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YN(t){return L(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function NM(t,e,n){return{name:Fu(t,e),fields:n.value.mapValue.fields}}function ZN(t,e,n){let r=Dr(t,e.name),i=Ye(e.updateTime),s=e.createTime?Ye(e.createTime):U.min(),o=new Ft({mapValue:{fields:e.fields}}),a=ct.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function vB(t,e){return"found"in e?function(r,i){L(!!i.found),i.found.name,i.found.updateTime;let s=Dr(r,i.found.name),o=Ye(i.found.updateTime),a=i.found.createTime?Ye(i.found.createTime):U.min(),c=new Ft({mapValue:{fields:i.found.fields}});return ct.newFoundDocument(s,o,a,c)}(t,e):"missing"in e?function(r,i){L(!!i.missing),L(!!i.readTime);let s=Dr(r,i.missing),o=Ye(i.readTime);return ct.newNoDocument(s,o)}(t,e):k()}function wB(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:k()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(L(u===void 0||typeof u=="string"),xt.fromBase64String(u||"")):(L(u===void 0||u instanceof Uint8Array),xt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let u=l.code===void 0?x.UNKNOWN:qN(l.code);return new w(u,l.message||"")}(o);n=new tg(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Dr(t,r.document.name),s=Ye(r.document.updateTime),o=r.document.createTime?Ye(r.document.createTime):U.min(),a=new Ft({mapValue:{fields:r.document.fields}}),c=ct.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new $a(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Dr(t,r.document),s=r.readTime?Ye(r.readTime):U.min(),o=ct.newNoDocument(i,s),a=r.removedTargetIds||[];n=new $a([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Dr(t,r.document),s=r.removedTargetIds||[];n=new $a([],s,i,null)}else{if(!("filter"in e))return k();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new sw(i,s),a=r.targetId;n=new eg(a,o)}}return n}function Vu(t,e){let n;if(e instanceof Ki)n={update:NM(t,e.key,e.value)};else if(e instanceof Qi)n={delete:Fu(t,e.key)};else if(e instanceof tr)n={update:NM(t,e.key,e.data),updateMask:TB(e.fieldMask)};else{if(!(e instanceof Nu))return k();n={verify:Fu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof zi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ti)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ni)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Wi)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw k()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:yB(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:k()}(t,e.precondition)),n}function hw(t,e){let n=e.currentDocument?function(s){return s.updateTime!==void 0?Ge.updateTime(Ye(s.updateTime)):s.exists!==void 0?Ge.exists(s.exists):Ge.none()}(e.currentDocument):Ge.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;if("setToServerValue"in a)L(a.setToServerValue==="REQUEST_TIME"),c=new zi;else if("appendMissingElements"in a){let u=a.appendMissingElements.values||[];c=new ti(u)}else if("removeAllFromArray"in a){let u=a.removeAllFromArray.values||[];c=new ni(u)}else"increment"in a?c=new Wi(o,a.increment):k();let l=Qe.fromServerFormat(a.fieldPath);return new to(l,c)}(t,i)):[];if(e.update){e.update.name;let i=Dr(t,e.update.name),s=new Ft({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let l=c.fieldPaths||[];return new xn(l.map(u=>Qe.fromServerFormat(u)))}(e.updateMask);return new tr(i,s,o,n,r)}return new Ki(i,s,n,r)}if(e.delete){let i=Dr(t,e.delete);return new Qi(i,n)}if(e.verify){let i=Dr(t,e.verify);return new Nu(i,n)}return k()}function bB(t,e){return t&&t.length>0?(L(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ye(i.updateTime):Ye(s);return o.isEqual(U.min())&&(o=Ye(s)),new rw(o,i.transformResults||[])}(n,e))):[]}function XN(t,e){return{documents:[KN(t,e.path)]}}function JN(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=KN(t,i);let s=function(l){if(l.length!==0)return nR(De.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:Fa(h.field),direction:IB(h.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=lw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ut:n,parent:i}}function eR(t){let e=QN(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){L(r===1);let u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){let h=tR(d);return h instanceof De&&Pb(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(p){return new Js(Va(p.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Wu(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new Ar(f,h)}(n.startAt));let l=null;return n.endAt&&(l=function(d){let h=!d.before,f=d.values||[];return new Ar(f,h)}(n.endAt)),TN(e,i,o,s,a,"F",c,l)}function EB(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return k()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Va(n.unaryFilter.field);return fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Va(n.unaryFilter.field);return fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Va(n.unaryFilter.field);return fe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Va(n.unaryFilter.field);return fe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return k()}}(t):t.fieldFilter!==void 0?function(n){return fe.create(Va(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return k()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return De.create(n.compositeFilter.filters.map(r=>tR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return k()}}(n.compositeFilter.op))}(t):k()}function IB(t){return mB[t]}function CB(t){return _B[t]}function DB(t){return xB[t]}function Fa(t){return{fieldPath:t.canonicalString()}}function Va(t){return Qe.fromServerFormat(t.fieldPath)}function nR(t){return t instanceof fe?function(n){if(n.op==="=="){if(pM(n.value))return{unaryFilter:{field:Fa(n.field),op:"IS_NAN"}};if(fM(n.value))return{unaryFilter:{field:Fa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(pM(n.value))return{unaryFilter:{field:Fa(n.field),op:"IS_NOT_NAN"}};if(fM(n.value))return{unaryFilter:{field:Fa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fa(n.field),op:CB(n.op),value:n.value}}}(t):t instanceof De?function(n){let r=n.getFilters().map(i=>nR(i));return r.length===1?r[0]:{compositeFilter:{op:DB(n.op),filters:r}}}(t):k()}function TB(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ya=class t{constructor(e,n,r,i,s=U.min(),o=U.min(),a=xt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var rg=class{constructor(e){this.ct=e}};function SB(t,e){let n;if(e.document)n=ZN(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=M.fromSegments(e.noDocument.path),i=ro(e.noDocument.readTime);n=ct.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return k();{let r=M.fromSegments(e.unknownDocument.path),i=ro(e.unknownDocument.version);n=ct.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let s=new Be(i[0],i[1]);return U.fromTimestamp(s)}(e.readTime)),n}function RM(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ig(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Fu(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Qa(s,o.version.toTimestamp()),createTime:Qa(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:no(e.version)};else{if(!e.isUnknownDocument())return k();r.unknownDocument={path:n.path.toArray(),version:no(e.version)}}return r}function ig(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function no(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ro(t){let e=new Be(t.seconds,t.nanoseconds);return U.fromTimestamp(e)}function zs(t,e){let n=(e.baseMutations||[]).map(s=>hw(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>hw(t.ct,s)),i=Be.fromMillis(e.localWriteTimeMs);return new Ru(e.batchId,i,n,r)}function yu(t){let e=ro(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ro(t.lastLimboFreeSnapshotVersion):U.min(),r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return L(s.documents.length===1),Wt(ac(QN(s.documents[0])))}(t.query):function(s){return Wt(eR(s))}(t.query),new Ya(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,xt.fromBase64String(t.resumeToken))}function iR(t,e){let n=no(e.snapshotVersion),r=no(e.lastLimboFreeSnapshotVersion),i;i=Zp(e.target)?XN(t.ct,e.target):JN(t.ct,e.target).ut;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:eo(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Vb(t){let e=eR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Jp(e,e.limit,"L"):e}function Tv(t,e){return new Pu(e.largestBatchId,hw(t.ct,e.overlayMutation))}function PM(t,e){let n=e.path.lastSegment();return[t,zt(e.path.popLast()),n]}function kM(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:no(r.readTime),documentKey:zt(r.documentKey.path),largestBatchId:r.largestBatchId}}var fw=class{getBundleMetadata(e,n){return OM(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:ro(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return OM(e).put(function(i){return{bundleId:i.id,createTime:no(Ye(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return FM(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:Vb(s.bundledQuery),readTime:ro(s.readTime)}}(r)})}saveNamedQuery(e,n){return FM(e).put(function(i){return{name:i.name,readTime:no(Ye(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function OM(t){return yt(t,"bundles")}function FM(t){return yt(t,"namedQueries")}var sg=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return pu(e).get(PM(this.userId,n)).next(r=>r?Tv(this.serializer,r):null)}getOverlays(e,n){let r=Ir();return _.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((s,o)=>{let a=new Pu(n,o);i.push(this.ht(e,a))}),_.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(o=>i.add(zt(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(pu(e).H("collectionPathOverlayIndex",a))}),_.waitFor(s)}getOverlaysForCollection(e,n,r){let i=Ir(),s=zt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return pu(e).W("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let l=Tv(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let s=Ir(),o,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return pu(e).Y({index:"collectionGroupOverlayIndex",range:a},(c,l,u)=>{let d=Tv(this.serializer,l);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}ht(e,n){return pu(e).put(function(i,s,o){let[a,c,l]=PM(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Vu(i.ct,o.mutation)}}(this.serializer,this.userId,n))}};function pu(t){return yt(t,"documentOverlays")}var Xr=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(qe(e.integerValue));else if("doubleValue"in e){let r=qe(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Du(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Hi(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?vN(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):k()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),M.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Xr.bt=new Xr;function AB(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function VM(t){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=AB(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}var pw=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){let n=this.Bt(e),r=VM(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){let n=this.Bt(e),r=VM(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},gw=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},mw=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},Ws=class{constructor(){this.Gt=new pw,this.zt=new gw(this.Gt),this.jt=new mw(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Ks=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function Oi(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=LM(t.arrayValue,e.arrayValue),n!==0?n:(n=LM(t.directionalValue,e.directionalValue),n!==0?n:M.comparator(t.documentKey,e.documentKey)))}function LM(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var og=class{constructor(e){this.Yt=new Ne((n,r)=>Qe.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(L(e.collectionGroup===this.collectionId),this.en)return!1;let n=Lv(e);if(n!==void 0&&!this.nn(n))return!1;let r=qs(e),i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[s];if(!this.rn(a,c)||!this.sn(this.Zt[o++],c))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.Zt.length||!this.sn(this.Zt[o++],a))return!1}return!0}on(){if(this.en)return null;let e=new Ne(Qe.comparator),n=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Ba(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Ba(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Ba(r.field,r.dir==="asc"?0:1)));return new qa(qa.UNKNOWN_ID,this.collectionId,n,Cu.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function sR(t){var e,n;if(L(t instanceof fe||t instanceof De),t instanceof fe){if(t instanceof Yp){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>fe.create(t.field,"==",s)))||[];return De.create(i,"or")}return t}let r=t.filters.map(i=>sR(i));return De.create(r,t.op)}function MB(t){if(t.getFilters().length===0)return[];let e=yw(sR(t));return L(oR(e)),_w(e)||xw(e)?[e]:e.getFilters()}function _w(t){return t instanceof fe}function xw(t){return t instanceof De&&Pb(t)}function oR(t){return _w(t)||xw(t)||function(n){if(n instanceof De&&zv(n)){for(let r of n.getFilters())if(!_w(r)&&!xw(r))return!1;return!0}return!1}(t)}function yw(t){if(L(t instanceof fe||t instanceof De),t instanceof fe)return t;if(t.filters.length===1)return yw(t.filters[0]);let e=t.filters.map(r=>yw(r)),n=De.create(e,t.op);return n=ag(n),oR(n)?n:(L(n instanceof De),L(za(n)),L(n.filters.length>1),n.filters.reduce((r,i)=>Lb(r,i)))}function Lb(t,e){let n;return L(t instanceof fe||t instanceof De),L(e instanceof fe||e instanceof De),n=t instanceof fe?e instanceof fe?function(i,s){return De.create([i,s],"and")}(t,e):jM(t,e):e instanceof fe?jM(e,t):function(i,s){if(L(i.filters.length>0&&s.filters.length>0),za(i)&&za(s))return IN(i,s.getFilters());let o=zv(i)?i:s,a=zv(i)?s:i,c=o.filters.map(l=>Lb(l,a));return De.create(c,"or")}(t,e),ag(n)}function jM(t,e){if(za(e))return IN(e,t.getFilters());{let n=e.filters.map(r=>Lb(t,r));return De.create(n,"or")}}function ag(t){if(L(t instanceof fe||t instanceof De),t instanceof fe)return t;let e=t.getFilters();if(e.length===1)return ag(e[0]);if(bN(t))return t;let n=e.map(i=>ag(i)),r=[];return n.forEach(i=>{i instanceof fe?r.push(i):i instanceof De&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:De.create(r,t.op)}var vw=class{constructor(){this._n=new Lu}addToCollectionParentIndex(e,n){return this._n.add(n),_.resolve()}getCollectionParents(e,n){return _.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return _.resolve()}deleteFieldIndex(e,n){return _.resolve()}deleteAllFieldIndexes(e){return _.resolve()}createTargetIndexes(e,n){return _.resolve()}getDocumentsMatchingTarget(e,n){return _.resolve(null)}getIndexType(e,n){return _.resolve(0)}getFieldIndexes(e,n){return _.resolve([])}getNextCollectionGroupToUpdate(e){return _.resolve(null)}getMinOffset(e,n){return _.resolve(On.min())}getMinOffsetFromCollectionGroup(e,n){return _.resolve(On.min())}updateCollectionGroup(e,n,r){return _.resolve()}updateIndexEntries(e,n){return _.resolve()}},Lu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ne(me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ne(me.comparator)).toArray()}};var Rp=new Uint8Array(0),ww=class{constructor(e,n){this.databaseId=n,this.an=new Lu,this.un=new Mr(r=>eo(r),(r,i)=>Ku(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let s={collectionId:r,parent:zt(i)};return BM(e).put(s)}return _.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[lN(n),""],!1,!0);return BM(e).W(i).next(s=>{for(let o of s){if(o.collectionId!==n)break;r.push(Er(o.parent))}return r})}addFieldIndex(e,n){let r=gu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;let s=r.add(i);if(n.indexState){let o=Ra(e);return s.next(a=>{o.put(kM(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){let r=gu(e),i=Ra(e),s=Na(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=gu(e),r=Na(e),i=Ra(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return _.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new og(r).on();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){let r=Na(e),i=!0,s=new Map;return _.forEach(this.cn(n),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ne(),a=[];return _.forEach(s,(c,l)=>{E("IndexedDbIndexManager",`Using index ${function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(H=>`${H.fieldPath}:${H.kind}`).join(",")}`}(c)} to execute ${eo(n)}`);let u=function(T,H){let W=Lv(H);if(W===void 0)return null;for(let Z of Xp(T,W.fieldPath))switch(Z.op){case"array-contains-any":return Z.value.arrayValue.values||[];case"array-contains":return[Z.value]}return null}(l,c),d=function(T,H){let W=new Map;for(let Z of qs(H))for(let Te of Xp(T,Z.fieldPath))switch(Te.op){case"==":case"in":W.set(Z.fieldPath.canonicalString(),Te.value);break;case"not-in":case"!=":return W.set(Z.fieldPath.canonicalString(),Te.value),Array.from(W.values())}return null}(l,c),h=function(T,H){let W=[],Z=!0;for(let Te of qs(H)){let Xt=Te.kind===0?yM(T,Te.fieldPath,T.startAt):vM(T,Te.fieldPath,T.startAt);W.push(Xt.value),Z&&(Z=Xt.inclusive)}return new Ar(W,Z)}(l,c),f=function(T,H){let W=[],Z=!0;for(let Te of qs(H)){let Xt=Te.kind===0?vM(T,Te.fieldPath,T.endAt):yM(T,Te.fieldPath,T.endAt);W.push(Xt.value),Z&&(Z=Xt.inclusive)}return new Ar(W,Z)}(l,c),p=this.hn(c,l,h),m=this.hn(c,l,f),y=this.Pn(c,l,d),C=this.In(c.indexId,u,p,h.inclusive,m,f.inclusive,y);return _.forEach(C,F=>r.j(F,n.limit).next(T=>{T.forEach(H=>{let W=M.fromSegments(H.documentKey);o.has(W)||(o=o.add(W),a.push(W))})}))}).next(()=>a)}return _.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=MB(De.create(e.filters,"and")).map(r=>tw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,s,o,a){let c=(n!=null?n.length:1)*Math.max(r.length,s.length),l=c/(n!=null?n.length:1),u=[];for(let d=0;d<c;++d){let h=n?this.Tn(n[d/l]):Rp,f=this.En(e,h,r[d%l],i),p=this.dn(e,h,s[d%l],o),m=a.map(y=>this.En(e,h,y,!0));u.push(...this.createRange(f,p,m))}return u}En(e,n,r,i){let s=new Ks(e,M.empty(),n,r);return i?s:s.Jt()}dn(e,n,r,i){let s=new Ks(e,M.empty(),n,r);return i?s.Jt():s}ln(e,n){let r=new og(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2,i=this.cn(n);return _.forEach(i,s=>this.ln(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let l=new Ne(Qe.comparator),u=!1;for(let d of c.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?u=!0:l=l.add(h.field));for(let d of c.orderBy)d.field.isKeyField()||(l=l.add(d.field));return l.size+(u?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){let r=new Ws;for(let i of qs(e)){let s=n.data.field(i.fieldPath);if(s==null)return null;let o=r.Ht(i.kind);Xr.bt.Pt(s,o)}return r.Wt()}Tn(e){let n=new Ws;return Xr.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let r=new Ws;return Xr.bt.Pt(Xs(this.databaseId,n),r.Ht(function(s){let o=qs(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new Ws);let s=0;for(let o of qs(e)){let a=r[s++];for(let c of i)if(this.Vn(n,o.fieldPath)&&Mu(a))i=this.mn(i,o,a);else{let l=c.Ht(o.kind);Xr.bt.Pt(a,l)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let c=new Ws;c.seed(a.Wt()),Xr.bt.Pt(o,c.Ht(n.kind)),s.push(c)}return s}Vn(e,n){return!!e.filters.find(r=>r instanceof fe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=gu(e),i=Ra(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{let o=[];return _.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(u,d){let h=d?new Cu(d.sequenceNumber,new On(ro(d.readTime),new M(Er(d.documentKey)),d.largestBatchId)):Cu.empty(),f=u.fields.map(([p,m])=>new Ba(Qe.fromServerFormat(p),m));return new qa(u.indexId,u.collectionGroup,f,h)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:J(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=gu(e),s=Ra(e);return this.gn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>_.forEach(a,c=>s.put(kM(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){let r=new Map;return _.forEach(n,(i,s)=>{let o=r.get(i.collectionGroup);return(o?_.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),_.forEach(a,c=>this.pn(e,i,c).next(l=>{let u=this.yn(s,c);return l.isEqual(u)?_.resolve():this.wn(e,s,c,l,u)}))))})}Sn(e,n,r,i){return Na(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return Na(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){let i=Na(e),s=new Ne(Oi);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(o,a)=>{s=s.add(new Ks(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,n){let r=new Ne(Oi),i=this.An(n,e);if(i==null)return r;let s=Lv(n);if(s!=null){let o=e.data.field(s.fieldPath);if(Mu(o))for(let a of o.arrayValue.values||[])r=r.add(new Ks(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new Ks(n.indexId,e.key,Rp,i));return r}wn(e,n,r,i,s){E("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let o=[];return function(c,l,u,d,h){let f=c.getIterator(),p=l.getIterator(),m=Ma(f),y=Ma(p);for(;m||y;){let C=!1,F=!1;if(m&&y){let T=u(m,y);T<0?F=!0:T>0&&(C=!0)}else m!=null?F=!0:C=!0;C?(d(y),y=Ma(p)):F?(h(m),m=Ma(f)):(m=Ma(f),y=Ma(p))}}(i,s,Oi,a=>{o.push(this.Sn(e,n,r,a))},a=>{o.push(this.bn(e,n,r,a))}),_.waitFor(o)}gn(e){let n=1;return Ra(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Oi(o,a)).filter((o,a,c)=>!a||Oi(o,c[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=Oi(o,e),c=Oi(o,n);if(a===0)i[0]=e.Jt();else if(a>0&&c<0)i.push(o),i.push(o.Jt());else if(c>0)break}i.push(n);let s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Rp,[]],c=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Rp,[]];s.push(IDBKeyRange.bound(a,c))}return s}Dn(e,n){return Oi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(UM)}getMinOffset(e,n){return _.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||k())).next(UM)}};function BM(t){return yt(t,"collectionParents")}function Na(t){return yt(t,"indexEntries")}function gu(t){return yt(t,"indexConfiguration")}function Ra(t){return yt(t,"indexState")}function UM(t){L(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;Mb(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new On(e.readTime,e.documentKey,n)}var $M={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Pn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function aR(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId),a=0,c=r.Y({range:o},(u,d,h)=>(a++,h.delete()));s.push(c.next(()=>{L(a===1)}));let l=[];for(let u of n.mutations){let d=pN(e,u.key.path,n.batchId);s.push(i.delete(d)),l.push(u.key)}return _.waitFor(s).next(()=>l)}function cg(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw k();e=t.noDocument}return JSON.stringify(e).length}Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(41943040,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);var lg=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){L(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new t(s,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fi(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let s=La(e),o=Fi(e);return o.add({}).next(a=>{L(typeof a=="number");let c=new Ru(a,n,r,i),l=function(f,p,m){let y=m.baseMutations.map(F=>Vu(f.ct,F)),C=m.mutations.map(F=>Vu(f.ct,F));return{userId:p,batchId:m.batchId,localWriteTimeMs:m.localWriteTime.toMillis(),baseMutations:y,mutations:C}}(this.serializer,this.userId,c),u=[],d=new Ne((h,f)=>J(h.canonicalString(),f.canonicalString()));for(let h of i){let f=pN(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(o.put(l)),u.push(s.put(f,Vj))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),_.waitFor(u).next(()=>c)})}lookupMutationBatch(e,n){return Fi(e).get(n).next(r=>r?(L(r.userId===this.userId),zs(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?_.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Fi(e).Y({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(L(a.batchId>=r),s=zs(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Fi(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fi(e).W("userMutationsIndex",n).next(r=>r.map(i=>zs(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=Fp(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return La(e).Y({range:i},(o,a,c)=>{let[l,u,d]=o,h=Er(u);if(l===this.userId&&n.path.isEqual(h))return Fi(e).get(d).next(f=>{if(!f)throw k();L(f.userId===this.userId),s.push(zs(this.serializer,f))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ne(J),i=[];return n.forEach(s=>{let o=Fp(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=La(e).Y({range:a},(l,u,d)=>{let[h,f,p]=l,m=Er(f);h===this.userId&&s.path.isEqual(m)?r=r.add(p):d.done()});i.push(c)}),_.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=Fp(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Ne(J);return La(e).Y({range:o},(c,l,u)=>{let[d,h,f]=c,p=Er(h);d===this.userId&&r.isPrefixOf(p)?p.length===i&&(a=a.add(f)):u.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let r=[],i=[];return n.forEach(s=>{i.push(Fi(e).get(s).next(o=>{if(o===null)throw k();L(o.userId===this.userId),r.push(zs(this.serializer,o))}))}),_.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return aR(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),_.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return _.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return La(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){let c=Er(s[1]);i.push(c)}else a.done()}).next(()=>{L(i.length===0)})})}containsKey(e,n){return cR(e,this.userId,n)}xn(e){return lR(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function cR(t,e,n){let r=Fp(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return La(t).Y({range:s,J:!0},(a,c,l)=>{let[u,d,h]=a;u===e&&d===i&&(o=!0),l.done()}).next(()=>o)}function Fi(t){return yt(t,"mutations")}function La(t){return yt(t,"documentMutations")}function lR(t){return yt(t,"mutationQueues")}var Za=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var bw=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let r=new Za(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>U.fromTimestamp(new Be(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Pa(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(L(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0,s=[];return Pa(e).Y((o,a)=>{let c=yu(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>_.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Pa(e).Y((r,i)=>{let s=yu(i);n(s)})}Bn(e){return HM(e).get("targetGlobalKey").next(n=>(L(n!==null),n))}kn(e,n){return HM(e).put("targetGlobalKey",n)}qn(e,n){return Pa(e).put(iR(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=eo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Pa(e).Y({range:i,index:"queryTargetsIndex"},(o,a,c)=>{let l=yu(a);Ku(n,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,n,r){let i=[],s=Vi(e);return n.forEach(o=>{let a=zt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),_.waitFor(i)}removeMatchingKeys(e,n,r){let i=Vi(e);return _.forEach(n,s=>{let o=zt(s.path);return _.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){let r=Vi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Vi(e),s=ne();return i.Y({range:r,J:!0},(o,a,c)=>{let l=Er(o[1]),u=new M(l);s=s.add(u)}).next(()=>s)}containsKey(e,n){let r=zt(n.path),i=IDBKeyRange.bound([r],[lN(r)],!1,!0),s=0;return Vi(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],c,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}_t(e,n){return Pa(e).get(n).next(r=>r?yu(r):null)}};function Pa(t){return yt(t,"targets")}function HM(t){return yt(t,"targetGlobal")}function Vi(t){return yt(t,"targetDocuments")}function qM([t,e],[n,r]){let i=J(t,n);return i===0?J(e,r):i}var Ew=class{constructor(e){this.Kn=e,this.buffer=new Ne(qM),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();qM(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},Iw=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){E("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>g(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xi(n)?E("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Zi(n)}yield this.zn(3e5)}))}},Cw=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return _.resolve(_n._e);let r=new Ew(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(E("LruGarbageCollector","Garbage collection skipped; disabled"),_.resolve($M)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(E("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$M):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,s,o,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(E("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(l=Date.now(),ka()<=In.DEBUG&&E("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),_.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}};function NB(t,e){return new Cw(t,e)}var Dw=class{constructor(e,n){this.db=e,this.garbageCollector=NB(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return Pp(e,r)}removeReference(e,n,r){return Pp(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Pp(e,n)}er(e,n){return function(i,s){let o=!1;return lR(i).Z(a=>cR(i,a,s).next(c=>(c&&(o=!0),_.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.Xn(e,(o,a)=>{if(a<=n){let c=this.er(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,U.min()),Vi(e).delete(function(d){return[0,zt(d.path)]}(o))))});i.push(c)}}).next(()=>_.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Pp(e,n)}Xn(e,n){let r=Vi(e),i,s=_n._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(s!==_n._e&&n(new M(Er(i)),s),s=l,i=c):s=_n._e}).next(()=>{s!==_n._e&&n(new M(Er(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Pp(t,e){return Vi(t).put(function(r,i){return{targetId:0,path:zt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var ug=class{constructor(){this.changes=new Mr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?_.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Tw=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Hs(e).put(r)}removeEntry(e,n,r){return Hs(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ig(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=ct.newInvalidDocument(n);return Hs(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(mu(n))},(i,s)=>{r=this.nr(n,s)}).next(()=>r)}rr(e,n){let r={size:0,document:ct.newInvalidDocument(n)};return Hs(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(mu(n))},(i,s)=>{r={document:this.nr(n,s),size:cg(s)}}).next(()=>r)}getEntries(e,n){let r=un();return this.ir(e,n,(i,s)=>{let o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,n){let r=un(),i=new Fe(M.comparator);return this.ir(e,n,(s,o)=>{let a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,cg(o))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return _.resolve();let i=new Ne(WM);n.forEach(c=>i=i.add(c));let s=IDBKeyRange.bound(mu(i.first()),mu(i.last())),o=i.getIterator(),a=o.getNext();return Hs(e).Y({index:"documentKeyIndex",range:s},(c,l,u)=>{let d=M.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&WM(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?u.U(mu(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){let o=n.path,a=[o.popLast().toArray(),o.lastSegment(),ig(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hs(e).W(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let u=un();for(let d of l){let h=this.nr(M.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(Yu(n,h)||i.has(h.key))&&(u=u.insert(h.key,h))}return u})}getAllFromCollectionGroup(e,n,r,i){let s=un(),o=zM(n,r),a=zM(n,On.max());return Hs(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,u)=>{let d=this.nr(M.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(d.key,d),s.size===i&&u.done()}).next(()=>s)}newChangeBuffer(e){return new Sw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return GM(e).get("remoteDocumentGlobalKey").next(n=>(L(!!n),n))}tr(e,n){return GM(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let r=SB(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(U.min())))return r}return ct.newInvalidDocument(e)}};function uR(t){return new Tw(t)}var Sw=class extends ug{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Mr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new Ne((s,o)=>J(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.ur.get(s);if(n.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=RM(this.ar.serializer,o);i=i.add(s.path.popLast());let l=cg(c);r+=l-a.size,n.push(this.ar.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){let c=RM(this.ar.serializer,o.convertToNoDocument(U.min()));n.push(this.ar.addEntry(e,s,c))}}),i.forEach(s=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ar.updateMetadata(e,r)),_.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function GM(t){return yt(t,"remoteDocumentGlobal")}function Hs(t){return yt(t,"remoteDocumentsV14")}function mu(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function zM(t,e){let n=e.documentKey.path.toArray();return[t,ig(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function WM(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=J(n[s],r[s]),i)return i;return i=J(n.length,r.length),i||(i=J(n[n.length-2],r[r.length-2]),i||J(n[n.length-1],r[r.length-1]))}var Aw=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var dg=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&bu(r.mutation,i,xn.empty(),Be.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){let i=Ir();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=xu();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Ir();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=un(),o=wu(),a=function(){return wu()}();return n.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof tr)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),bu(u.mutation,l,u.mutation.getFieldMask(),Be.now())):o.set(l.key,xn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var d;return a.set(l,new Aw(u,(d=o.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=wu(),i=new Fe((o,a)=>o-a),s=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let u=r.get(c)||xn.empty();u=a.applyToLocalView(l,u),r.set(c,u);let d=(i.get(a.batchId)||ne()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=PN();u.forEach(h=>{if(!s.has(h)){let f=UN(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return _.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return M.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):kb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):_.resolve(Ir()),a=-1,c=s;return o.next(l=>_.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?_.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,ne())).next(u=>({batchId:a,changes:RN(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new M(n)).next(r=>{let i=xu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=xu();return this.indexManager.getCollectionParents(e,s).next(a=>_.forEach(a,c=>{let l=function(d,h){return new er(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,ct.newInvalidDocument(u)))});let a=xu();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&bu(u.mutation,l,xn.empty(),Be.now()),Yu(n,l)&&(a=a.insert(c,l))}),a})}};var Mw=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return _.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ye(i.createTime)}}(n)),_.resolve()}getNamedQuery(e,n){return _.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:Vb(i.bundledQuery),readTime:Ye(i.readTime)}}(n)),_.resolve()}};var Nw=class{constructor(){this.overlays=new Fe(M.comparator),this.hr=new Map}getOverlay(e,n){return _.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Ir();return _.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),_.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),_.resolve()}getOverlaysForCollection(e,n,r){let i=Ir(),s=n.length+1,o=new M(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return _.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Fe((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let u=s.get(l.largestBatchId);u===null&&(u=Ir(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=Ir(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return _.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Pu(n,r));let s=this.hr.get(n);s===void 0&&(s=ne(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var ju=class{constructor(){this.Pr=new Ne(st.Ir),this.Tr=new Ne(st.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new st(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new st(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new M(new me([])),r=new st(n,e),i=new st(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new M(new me([])),r=new st(n,e),i=new st(n,e+1),s=ne();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new st(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},st=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return M.comparator(e.key,n.key)||J(e.pr,n.pr)}static Er(e,n){return J(e.pr,n.pr)||M.comparator(e.key,n.key)}};var Rw=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ne(st.Ir)}checkEmpty(e){return _.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Ru(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new st(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return _.resolve(o)}lookupMutationBatch(e,n){return _.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return _.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return _.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return _.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new st(n,0),i=new st(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),_.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ne(J);return n.forEach(i=>{let s=new st(i,0),o=new st(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),_.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;M.isDocumentKey(s)||(s=s.child(""));let o=new st(new M(s),0),a=new Ne(J);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},o),_.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){L(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return _.forEach(n.mutations,i=>{let s=new st(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new st(n,0),i=this.wr.firstAfterOrEqual(r);return _.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,_.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Pw=class{constructor(e){this.vr=e,this.docs=function(){return new Fe(M.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return _.resolve(r?r.document.mutableCopy():ct.newInvalidDocument(n))}getEntries(e,n){let r=un();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ct.newInvalidDocument(i))}),_.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=un(),o=n.path,a=new M(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Mb(dN(u),r)<=0||(i.has(u.key)||Yu(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return _.resolve(s)}getAllFromCollectionGroup(e,n,r,i){k()}Fr(e,n){return _.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new kw(this)}getSize(e){return _.resolve(this.size)}},kw=class extends ug{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),_.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var Ow=class{constructor(e){this.persistence=e,this.Mr=new Mr(n=>eo(n),Ku),this.lastRemoteSnapshotVersion=U.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ju,this.targetCount=0,this.Lr=Za.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),_.resolve()}getLastRemoteSnapshotVersion(e){return _.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),_.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),_.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Za(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,_.resolve()}updateTargetData(e,n){return this.qn(n),_.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,_.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),_.waitFor(s).next(()=>i)}getTargetCount(e){return _.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return _.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),_.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),_.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),_.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return _.resolve(r)}containsKey(e,n){return _.resolve(this.Nr.containsKey(n))}};var hg=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new _n(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Ow(this),this.indexManager=new vw,this.remoteDocumentCache=function(i){return new Pw(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new rg(n),this.$r=new Mw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Nw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new Rw(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){E("MemoryPersistence","Starting transaction:",e);let i=new Fw(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return _.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},Fw=class extends Gp{constructor(e){super(),this.currentSequenceNumber=e}},fg=class t{constructor(e){this.persistence=e,this.zr=new ju,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw k()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),_.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),_.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),_.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _.forEach(this.Jr,r=>{let i=M.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,U.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return _.or([()=>_.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var Vw=class{constructor(e){this.serializer=e}N(e,n,r,i){let s=new zp("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uM,{unique:!0}),c.createObjectStore("documentMutations")}(e),KM(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=_.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),KM(e)),o=o.next(()=>function(c){let l=c.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:U.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",u)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,l){return l.store("mutations").W().next(u=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uM,{unique:!0});let d=l.store("mutations"),h=u.map(f=>d.put(f));return _.waitFor(h)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:Qj});l.createIndex("collectionPathOverlayIndex",Yj,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",Zj,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:Lj});l.createIndex("documentKeyIndex",jj),l.createIndex("collectionGroupIndex",Bj)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:Gj}).createIndex("sequenceNumberIndex",zj,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:Wj}).createIndex("documentKeyIndex",Kj,{unique:!1})}(e))),o}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=cg(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>_.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>_.forEach(a,c=>{L(c.userId===s.userId);let l=zs(this.serializer,c);return aR(e,s.userId,l).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.Y((o,a)=>{let c=new me(o),l=function(d){return[0,zt(d)]}(c);s.push(n.get(l).next(u=>u?_.resolve():(d=>n.put({targetId:0,path:zt(d),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>_.waitFor(s))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:qj});let r=n.store("collectionParents"),i=new Lu,s=o=>{if(i.add(o)){let a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:zt(c)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{let c=new me(o);return s(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,c],l)=>{let u=Er(a);return s(u.popLast())}))}ri(e){let n=e.store("targets");return n.Y((r,i)=>{let s=yu(i),o=iR(this.serializer,s);return n.put(o)})}ii(e,n){let r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{let a=n.store("remoteDocumentsV14"),c=function(d){return d.document?new M(me.fromString(d.document.name).popFirst(5)):d.noDocument?M.fromSegments(d.noDocument.path):d.unknownDocument?M.fromSegments(d.unknownDocument.path):k()}(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(l))}).next(()=>_.waitFor(i))}si(e,n){let r=n.store("mutations"),i=uR(this.serializer),s=new hg(fg.Hr,this.serializer.ct);return r.W().next(o=>{let a=new Map;return o.forEach(c=>{var l;let u=(l=a.get(c.userId))!==null&&l!==void 0?l:ne();zs(this.serializer,c).keys().forEach(d=>u=u.add(d)),a.set(c.userId,u)}),_.forEach(a,(c,l)=>{let u=new ot(l),d=sg.lt(this.serializer,u),h=s.getIndexManager(u),f=lg.lt(u,this.serializer,h,s.referenceDelegate);return new dg(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new Tu(n,_n._e),c).next()})})}};function KM(t){t.createObjectStore("targetDocuments",{keyPath:$j}).createIndex("documentTargetsIndex",Hj,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Uj,{unique:!0}),t.createObjectStore("targetGlobal")}var Sv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Lw=class t{constructor(e,n,r,i,s,o,a,c,l,u,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=l,this.ai=u,this.ui=d,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=h=>Promise.resolve(),!t.D())throw new w(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Dw(this,i),this.Ti=n+"main",this.serializer=new rg(c),this.Ei=new ei(this.Ti,this.ui,new Vw(this.serializer)),this.Qr=new bw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=uR(this.serializer),this.$r=new fw,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,u===!1&&Ke("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new w(x.FAILED_PRECONDITION,Sv);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new _n(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>g(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B(n=>g(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>g(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>kp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Xi(e))return E("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return E("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return _u(e).get("owner").next(n=>_.resolve(this.Si(n)))}bi(e){return kp(e).delete(this.clientId)}Di(){return g(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=yt(n,"clientMetadata");return r.W().next(i=>{let s=this.vi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return _.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?_.resolve(!0):_u(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new w(x.FAILED_PRECONDITION,Sv);return!1}}return!(!this.networkEnabled||!this.inForeground)||kp(e).W().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&E("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return g(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Tu(e,_n._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()})}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>kp(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return lg.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ww(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return sg.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){E("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",s=function(c){return c===15?Jj:c===14?_N:c===13?mN:c===12?Xj:c===11?gN:void k()}(this.ui),o;return this.Ei.runTransaction(e,i,s,a=>(o=new Tu(a,this.kr?this.kr.next():_n._e),n==="readwrite-primary"?this.gi(o).next(c=>!!c||this.pi(o)).next(c=>{if(!c)throw Ke(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new w(x.FAILED_PRECONDITION,hN);return r(o)}).next(c=>this.wi(o).next(()=>c)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return _u(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new w(x.FAILED_PRECONDITION,Sv)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return _u(e).put("owner",n)}static D(){return ei.D()}yi(e){let n=_u(e);return n.get("owner").next(r=>this.Si(r)?(E("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):_.resolve())}Ci(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(Ke(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;n0()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return E("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ke("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Ke("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function _u(t){return yt(t,"owner")}function kp(t){return yt(t,"clientMetadata")}function jb(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var jw=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=ne(),i=ne();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Bw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var pg=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return n0()?8:ei.v(jc())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Bw;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(ka()<=In.DEBUG&&E("QueryEngine","SDK will not create cache indexes for query:",Oa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),_.resolve()):(ka()<=In.DEBUG&&E("QueryEngine","Query:",Oa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(ka()<=In.DEBUG&&E("QueryEngine","The SDK decides to create cache indexes for query:",Oa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wt(n))):_.resolve())}ji(e,n){if(wM(n))return _.resolve(null);let r=Wt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Jp(n,null,"F"),r=Wt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ne(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Zi(n,a);return this.Xi(n,l,o,c.readTime)?this.ji(e,Jp(n,null,"F")):this.es(e,l,n,c)}))})))}Hi(e,n,r,i){return wM(n)||i.isEqual(U.min())?_.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?_.resolve(null):(ka()<=In.DEBUG&&E("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Oa(n)),this.es(e,o,n,uN(i,-1)).next(a=>a))})}Zi(e,n){let r=new Ne(MN(e));return n.forEach((i,s)=>{Yu(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return ka()<=In.DEBUG&&E("QueryEngine","Using full collection scan to execute query:",Oa(n)),this.zi.getDocumentsMatchingQuery(e,n,On.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Uw=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Fe(J),this.rs=new Mr(s=>eo(s),Ku),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dg(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function dR(t,e,n,r){return new Uw(t,e,n,r)}function hR(t,e){return g(this,null,function*(){let n=N(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=ne();for(let l of i){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})}function RB(t,e){let n=N(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){let d=l.batch,h=d.keys(),f=_.resolve();return h.forEach(p=>{f=f.next(()=>u.getEntry(c,p)).next(m=>{let y=l.docVersions.get(p);L(y!==null),m.version.compareTo(y)<0&&(d.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),u.addEntry(m)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ne();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function fR(t){let e=N(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function PB(t,e){let n=N(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((u,d)=>{let h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(xt.EMPTY_BYTE_STRING,U.min()).withLastLimboFreeSnapshotVersion(U.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(d,f),function(m,y,C){return m.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(h,f,u)&&a.push(n.Qr.updateTargetData(s,f))});let c=un(),l=ne();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(pR(s,o,e.documentUpdates).next(u=>{c=u.cs,l=u.ls})),!r.isEqual(U.min())){let u=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return _.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.ns=i,s))}function pR(t,e,n){let r=ne(),i=ne();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=un();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(U.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):E("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:i}})}function kB(t,e){let n=N(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Xa(t,e){let n=N(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,_.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Ya(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function Ja(t,e,n){return g(this,null,function*(){let r=N(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Xi(o))throw o;E("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function gg(t,e,n){let r=N(t),i=U.min(),s=ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){let d=N(c),h=d.rs.get(u);return h!==void 0?_.resolve(d.ns.get(h)):d.Qr.getTargetData(l,u)}(r,o,Wt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:U.min(),n?s:ne())).next(a=>(_R(r,AN(e),a),{documents:a,hs:s})))}function gR(t,e){let n=N(t),r=N(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function mR(t,e){let n=N(t),r=n.ss.get(e)||U.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,uN(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(_R(n,e,i),i))}function _R(t,e,n){let r=t.ss.get(e)||U.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}function OB(t,e,n,r){return g(this,null,function*(){let i=N(t),s=ne(),o=un();for(let l of n){let u=e.Ps(l.metadata.name);l.document&&(s=s.add(u));let d=e.Is(l);d.setReadTime(e.Ts(l.metadata.readTime)),o=o.insert(u,d)}let a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield Xa(i,function(u){return Wt(ac(me.fromString(`__bundle__/docs/${u}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>pR(l,a,o).next(u=>(a.apply(l),u)).next(u=>i.Qr.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Qr.addMatchingKeys(l,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,u.cs,u.ls)).next(()=>u.cs)))})}function FB(r,i){return g(this,arguments,function*(t,e,n=ne()){let s=yield Xa(t,Wt(Vb(e.bundledQuery))),o=N(t);return o.persistence.runTransaction("Save named query","readwrite",a=>{let c=Ye(e.readTime);if(s.snapshotVersion.compareTo(c)>=0)return o.$r.saveNamedQuery(a,e);let l=s.withResumeToken(xt.EMPTY_BYTE_STRING,c);return o.ns=o.ns.insert(l.targetId,l),o.Qr.updateTargetData(a,l).next(()=>o.Qr.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.Qr.addMatchingKeys(a,n,s.targetId)).next(()=>o.$r.saveNamedQuery(a,e))})})}function QM(t,e){return`firestore_clients_${t}_${e}`}function YM(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Av(t,e){return`firestore_targets_${t}_${e}`}var mg=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new w(i.error.code,i.error.message))),o?new t(e,n,i.state,s):(Ke("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Eu=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){let r=JSON.parse(n),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new w(r.error.code,r.error.message))),s?new t(e,r.state,i):(Ke("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},_g=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Ob();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=fN(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):(Ke("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},$w=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Ke("SharedClientState",`Failed to parse online state: ${e}`),null)}},Bu=class{constructor(){this.activeTargetIds=Ob()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Iu=class{constructor(e,n,r,i,s){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Fe(J),this.started=!1,this.ys=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=QM(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Bu),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return g(this,null,function*(){let e=yield this.syncEngine.Bi();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(QM(this.persistenceKey,r));if(i){let s=_g.Es(r,i);s&&(this.ps=this.ps.insert(s.clientId,s))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let r=this.xs(n);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(Av(this.persistenceKey,e));if(r){let i=Eu.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Av(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return E("SharedClientState","READ",e,n),n}setItem(e,n){E("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){E("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(E("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Ke("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>g(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let r=this.$s(n.key);return this.Us(r,null)}{let r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){let r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){let r=function(s){let o=_n._e;if(s!=null)try{let a=JSON.parse(s);L(typeof a=="number"),o=a}catch(a){Ke("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==_n._e&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){let r=this.Js(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){let i=new mg(this.currentUser,e,n,r),s=YM(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){let n=YM(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){let i=Av(this.persistenceKey,e),s=new Eu(e,n,r);this.setItem(i,s.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let r=this.$s(e);return _g.Es(r,n)}Gs(e,n){let r=this.Ds.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return mg.Es(new ot(s),i,n)}js(e,n){let r=this.Cs.exec(e),i=Number(r[1]);return Eu.Es(i,n)}xs(e){return $w.Es(e)}Js(e){return JSON.parse(e)}zs(e){return g(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);E("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=Ob();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},xg=class{constructor(){this.no=new Bu,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Bu,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Hw=class{io(e){}shutdown(){}};var yg=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){E("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){E("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Op=null;function Mv(){return Op===null?Op=function(){return 268435456+Math.round(2147483648*Math.random())}():Op++,"0x"+Op.toString(16)}var VB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var qw=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var Ot="WebChannelConnection",Gw=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){let a=Mv(),c=this.bo(n,r.toUriEncodedString());E("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,s,o),this.Co(n,c,l,i).then(u=>(E("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw kn("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",i),u})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){let i=VB[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let s=Mv();return new Promise((o,a)=>{let c=new sM;c.setWithCredentials(!0),c.listenOnce(rM.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Np.NO_ERROR:let u=c.getResponseJson();E(Ot,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Np.TIMEOUT:E(Ot,`RPC '${e}' ${s} timed out`),a(new w(x.DEADLINE_EXCEEDED,"Request time out"));break;case Np.HTTP_ERROR:let d=c.getStatus();if(E(Ot,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let p=function(y){let C=y.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(C)>=0?C:x.UNKNOWN}(f.status);a(new w(p,f.message))}else a(new w(x.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new w(x.UNAVAILABLE,"Connection failed."));break;default:k()}}finally{E(Ot,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);E(Ot,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",l,r,15)})}Fo(e,n,r){let i=Mv(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=tM(),a=nM(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let u=s.join("");E(Ot,`Creating RPC '${e}' stream ${i}: ${u}`,c);let d=o.createWebChannel(u,c),h=!1,f=!1,p=new qw({lo:y=>{f?E(Ot,`Not sending because RPC '${e}' stream ${i} is closed:`,y):(h||(E(Ot,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),E(Ot,`RPC '${e}' stream ${i} sending:`,y),d.send(y))},ho:()=>d.close()}),m=(y,C,F)=>{y.listen(C,T=>{try{F(T)}catch(H){setTimeout(()=>{throw H},0)}})};return m(d,fu.EventType.OPEN,()=>{f||E(Ot,`RPC '${e}' stream ${i} transport opened.`)}),m(d,fu.EventType.CLOSE,()=>{f||(f=!0,E(Ot,`RPC '${e}' stream ${i} transport closed`),p.Vo())}),m(d,fu.EventType.ERROR,y=>{f||(f=!0,kn(Ot,`RPC '${e}' stream ${i} transport errored:`,y),p.Vo(new w(x.UNAVAILABLE,"The operation could not be completed")))}),m(d,fu.EventType.MESSAGE,y=>{var C;if(!f){let F=y.data[0];L(!!F);let T=F,H=T.error||((C=T[0])===null||C===void 0?void 0:C.error);if(H){E(Ot,`RPC '${e}' stream ${i} received error:`,H);let W=H.status,Z=function(Jm){let Ud=it[Jm];if(Ud!==void 0)return qN(Ud)}(W),Te=H.message;Z===void 0&&(Z=x.INTERNAL,Te="Unknown error status: "+W+" with message "+H.message),f=!0,p.Vo(new w(Z,Te)),d.close()}else E(Ot,`RPC '${e}' stream ${i} received:`,F),p.mo(F)}}),m(a,iM.STAT_EVENT,y=>{y.stat===Dv.PROXY?E(Ot,`RPC '${e}' stream ${i} detected buffering proxy`):y.stat===Dv.NOPROXY&&E(Ot,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ro()},0),p}};function xR(){return typeof window<"u"?window:null}function Bp(){return typeof document<"u"?document:null}function Zu(t){return new cw(t,!0)}var Uu=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&E("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}};var vg=class{constructor(e,n,r,i,s,o,a,c){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Uu(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return g(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return g(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return g(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(Ke(n.toString()),Ke("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new w(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>g(this,null,function*(){this.state=0,this.start()}))}__(e){return E("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(E("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},zw=class extends vg{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=wB(this.serializer,e),r=function(s){if(!("targetChange"in s))return U.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?U.min():o.readTime?Ye(o.readTime):U.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=dw(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=Zp(c)?{documents:XN(s,c)}:{query:JN(s,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=zN(s,o.resumeToken);let l=lw(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(U.min())>0){a.readTime=Qa(s,o.snapshotVersion.toTimestamp());let l=lw(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=EB(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=dw(this.serializer),n.removeTarget=e,this.t_(n)}},Ww=class extends vg{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(L(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=bB(e.writeResults,e.commitTime),r=Ye(e.commitTime);return this.listener.T_(r,n)}return L(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=dw(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Vu(this.serializer,r))};this.t_(n)}};var Kw=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new w(x.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,uw(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new w(x.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,uw(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new w(x.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var Qw=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Ke(n),this.g_=!1):E("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var Yw=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(()=>g(this,null,function*(){Ji(this)&&(E("RemoteStore","Restarting streams for network reachability change."),yield function(c){return g(this,null,function*(){let l=N(c);l.v_.add(4),yield cc(l),l.x_.set("Unknown"),l.v_.delete(4),yield Xu(l)})}(this))}))}),this.x_=new Qw(r,i)}};function Xu(t){return g(this,null,function*(){if(Ji(t))for(let e of t.F_)yield e(!0)})}function cc(t){return g(this,null,function*(){for(let e of t.F_)yield e(!1)})}function jg(t,e){let n=N(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),$b(n)?Ub(n):uc(n).Jo()&&Bb(n,e))}function ec(t,e){let n=N(t),r=uc(n);n.C_.delete(e),r.Jo()&&yR(n,e),n.C_.size===0&&(r.Jo()?r.Xo():Ji(n)&&n.x_.set("Unknown"))}function Bb(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(U.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}uc(t).c_(e)}function yR(t,e){t.O_.Oe(e),uc(t).l_(e)}function Ub(t){t.O_=new aw({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),uc(t).start(),t.x_.p_()}function $b(t){return Ji(t)&&!uc(t).Ho()&&t.C_.size>0}function Ji(t){return N(t).v_.size===0}function vR(t){t.O_=void 0}function LB(t){return g(this,null,function*(){t.C_.forEach((e,n)=>{Bb(t,e)})})}function jB(t,e){return g(this,null,function*(){vR(t),$b(t)?(t.x_.S_(e),Ub(t)):t.x_.set("Unknown")})}function BB(t,e,n){return g(this,null,function*(){if(t.x_.set("Online"),e instanceof tg&&e.state===2&&e.cause)try{yield function(i,s){return g(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){E("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield wg(t,r)}else if(e instanceof $a?t.O_.$e(e):e instanceof eg?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(U.min()))try{let r=yield fR(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.O_.it(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.C_.get(l);u&&s.C_.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.C_.get(c);if(!u)return;s.C_.set(c,u.withResumeToken(xt.EMPTY_BYTE_STRING,u.snapshotVersion)),yR(s,c);let d=new Ya(u.target,c,l,u.sequenceNumber);Bb(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){E("RemoteStore","Failed to raise snapshot:",r),yield wg(t,r)}})}function wg(t,e,n){return g(this,null,function*(){if(!Xi(e))throw e;t.v_.add(1),yield cc(t),t.x_.set("Offline"),n||(n=()=>fR(t.localStore)),t.asyncQueue.enqueueRetryable(()=>g(this,null,function*(){E("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Xu(t)}))})}function wR(t,e){return e().catch(n=>wg(t,n,e))}function lc(t){return g(this,null,function*(){let e=N(t),n=Yi(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;UB(e);)try{let i=yield kB(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,$B(e,i)}catch(i){yield wg(e,i)}bR(e)&&ER(e)})}function UB(t){return Ji(t)&&t.D_.length<10}function $B(t,e){t.D_.push(e);let n=Yi(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function bR(t){return Ji(t)&&!Yi(t).Ho()&&t.D_.length>0}function ER(t){Yi(t).start()}function HB(t){return g(this,null,function*(){Yi(t).d_()})}function qB(t){return g(this,null,function*(){let e=Yi(t);for(let n of t.D_)e.I_(n.mutations)})}function GB(t,e,n){return g(this,null,function*(){let r=t.D_.shift(),i=iw.from(r,e,n);yield wR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield lc(t)})}function zB(t,e){return g(this,null,function*(){e&&Yi(t).P_&&(yield function(r,i){return g(this,null,function*(){if(function(o){return HN(o)&&o!==x.ABORTED}(i.code)){let s=r.D_.shift();Yi(r).Zo(),yield wR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield lc(r)}})}(t,e)),bR(t)&&ER(t)})}function ZM(t,e){return g(this,null,function*(){let n=N(t);n.asyncQueue.verifyOperationInProgress(),E("RemoteStore","RemoteStore received new credentials");let r=Ji(n);n.v_.add(3),yield cc(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Xu(n)})}function Zw(t,e){return g(this,null,function*(){let n=N(t);e?(n.v_.delete(2),yield Xu(n)):e||(n.v_.add(2),yield cc(n),n.x_.set("Unknown"))})}function uc(t){return t.N_||(t.N_=function(n,r,i){let s=N(n);return s.R_(),new zw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:LB.bind(null,t),To:jB.bind(null,t),u_:BB.bind(null,t)}),t.F_.push(e=>g(this,null,function*(){e?(t.N_.Zo(),$b(t)?Ub(t):t.x_.set("Unknown")):(yield t.N_.stop(),vR(t))}))),t.N_}function Yi(t){return t.L_||(t.L_=function(n,r,i){let s=N(n);return s.R_(),new Ww(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:HB.bind(null,t),To:zB.bind(null,t),E_:qB.bind(null,t),T_:GB.bind(null,t)}),t.F_.push(e=>g(this,null,function*(){e?(t.L_.Zo(),yield lc(t)):(yield t.L_.stop(),t.D_.length>0&&(E("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.L_}var Xw=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new at,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new w(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function dc(t,e){if(Ke("AsyncQueue",`${e}: ${t}`),Xi(t))return new w(x.UNAVAILABLE,`${e}: ${t}`);throw t}var bg=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||M.comparator(n.key,r.key):(n,r)=>M.comparator(n.key,r.key),this.keyedMap=xu(),this.sortedSet=new Fe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Eg=class{constructor(){this.B_=new Fe(M.comparator)}track(e){let n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):k():this.B_=this.B_.insert(n,e)}k_(){let e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}},tc=class t{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,bg.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Jw=class{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}},eb=class{constructor(){this.queries=new Mr(e=>SN(e),Qu),this.onlineState="Unknown",this.W_=new Set}};function Hb(t,e){return g(this,null,function*(){let n=N(t),r=3,i=e.query,s=n.queries.get(i);s?!s.K_()&&e.U_()&&(r=2):(s=new Jw,r=e.U_()?0:1);try{switch(r){case 0:s.q_=yield n.onListen(i,!0);break;case 1:s.q_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=dc(o,`Initialization of query '${Oa(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Q_.push(e),e.G_(n.onlineState),s.q_&&e.z_(s.q_)&&Gb(n)})}function qb(t,e){return g(this,null,function*(){let n=N(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),s.Q_.length===0?i=e.U_()?0:1:!s.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function WB(t,e){let n=N(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.Q_)a.z_(i)&&(r=!0);o.q_=i}}r&&Gb(n)}function KB(t,e,n){let r=N(t),i=r.queries.get(e);if(i)for(let s of i.Q_)s.onError(n);r.queries.delete(e)}function Gb(t){t.W_.forEach(e=>{e.next()})}var tb,XM;(XM=tb||(tb={})).j_="default",XM.Cache="cache";var $u=class{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new tc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;let r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;let n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=tc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==tb.Cache}};var nb=class{constructor(e,n){this.na=e,this.byteLength=n}ra(){return"metadata"in this.na}};var Ig=class{constructor(e){this.serializer=e}Ps(e){return Dr(this.serializer,e)}Is(e){return e.metadata.exists?ZN(this.serializer,e.document,!1):ct.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Ye(e)}},rb=class{constructor(e,n,r){this.ia=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=IR(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++n;let r=me.fromString(e.na.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}oa(e){let n=new Map,r=new Ig(this.serializer);for(let i of e)if(i.metadata.queries){let s=r.Ps(i.metadata.name);for(let o of i.metadata.queries){let a=(n.get(o)||ne()).add(s);n.set(o,a)}}return n}complete(){return g(this,null,function*(){let e=yield OB(this.localStore,new Ig(this.serializer),this.documents,this.ia.id),n=this.oa(this.documents);for(let r of this.queries)yield FB(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,_a:this.collectionGroups,aa:e}})}};function IR(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Cg=class{constructor(e){this.key=e}},Dg=class{constructor(e){this.key=e}},Tg=class{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=ne(),this.mutatedKeys=ne(),this.ha=MN(e),this.Pa=new bg(this.ha)}get Ia(){return this.ua}Ta(e,n){let r=n?n.Ea:new Eg,i=n?n.Pa:this.Pa,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{let h=i.get(u),f=Yu(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),y=!1;h&&f?h.data.isEqual(f.data)?p!==m&&(r.track({type:3,doc:f}),y=!0):this.da(h,f)||(r.track({type:2,doc:f}),y=!0,(c&&this.ha(f,c)>0||l&&this.ha(f,l)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),y=!0):h&&!f&&(r.track({type:1,doc:h}),y=!0,(c||l)&&(a=!0)),y&&(f?(o=o.add(f),s=m?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:s}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;let o=e.Ea.k_();o.sort((u,d)=>function(f,p){let m=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return k()}};return m(f)-m(p)}(u.type,d.type)||this.ha(u.doc,d.doc)),this.Aa(r),i=i!=null&&i;let a=n&&!i?this.Ra():[],c=this.la.size===0&&this.current&&!i?1:0,l=c!==this.ca;return this.ca=c,o.length!==0||l?{snapshot:new tc(this.query,e.Pa,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Eg,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];let e=this.la;this.la=ne(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});let n=[];return e.forEach(r=>{this.la.has(r)||n.push(new Dg(r))}),this.la.forEach(r=>{e.has(r)||n.push(new Cg(r))}),n}fa(e){this.ua=e.hs,this.la=ne();let n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return tc.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}},ib=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},sb=class{constructor(e){this.key=e,this.pa=!1}},ob=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new Mr(a=>SN(a),Qu),this.Sa=new Map,this.ba=new Set,this.Da=new Fe(M.comparator),this.Ca=new Map,this.va=new ju,this.Fa={},this.Ma=new Map,this.xa=Za.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}};function QB(t,e,n=!0){return g(this,null,function*(){let r=Bg(t),i,s=r.wa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=yield CR(r,e,n,!0),i})}function YB(t,e){return g(this,null,function*(){let n=Bg(t);yield CR(n,e,!0,!1)})}function CR(t,e,n,r){return g(this,null,function*(){let i=yield Xa(t.localStore,Wt(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield zb(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&jg(t.remoteStore,i),a})}function zb(t,e,n,r,i){return g(this,null,function*(){t.Na=(d,h,f)=>function(m,y,C,F){return g(this,null,function*(){let T=y.view.Ta(C);T.Xi&&(T=yield gg(m.localStore,y.query,!1).then(({documents:Te})=>y.view.Ta(Te,T)));let H=F&&F.targetChanges.get(y.targetId),W=F&&F.targetMismatches.get(y.targetId)!=null,Z=y.view.applyChanges(T,m.isPrimaryClient,H,W);return ab(m,y.targetId,Z.Va),Z.snapshot})}(t,d,h,f);let s=yield gg(t.localStore,e,!0),o=new Tg(e,s.hs),a=o.Ta(s.documents),c=Ou.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);ab(t,n,l.Va);let u=new ib(e,n,o);return t.wa.set(e,u),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),l.snapshot})}function ZB(t,e,n){return g(this,null,function*(){let r=N(t),i=r.wa.get(e),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter(o=>!Qu(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ja(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ec(r.remoteStore,i.targetId),nc(r,i.targetId)}).catch(Zi))):(nc(r,i.targetId),yield Ja(r.localStore,i.targetId,!0))})}function XB(t,e){return g(this,null,function*(){let n=N(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ec(n.remoteStore,r.targetId))})}function JB(t,e,n){return g(this,null,function*(){let r=Yb(t);try{let i=yield function(o,a){let c=N(o),l=Be.now(),u=a.reduce((f,p)=>f.add(p.key),ne()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=un(),m=ne();return c.os.getEntries(f,u).next(y=>{p=y,p.forEach((C,F)=>{F.isValidDocument()||(m=m.add(C))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,p)).next(y=>{d=y;let C=[];for(let F of a){let T=pB(F,d.get(F.key).overlayedDocument);T!=null&&C.push(new tr(F.key,T,wN(T.value.mapValue),Ge.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,C,a)}).next(y=>{h=y;let C=y.applyToLocalDocumentSet(d,m);return c.documentOverlayCache.saveOverlays(f,y.batchId,C)})}).then(()=>({batchId:h.batchId,changes:RN(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Fa[o.currentUser.toKey()];l||(l=new Fe(J)),l=l.insert(a,c),o.Fa[o.currentUser.toKey()]=l}(r,i.batchId,n),yield si(r,i.changes),yield lc(r.remoteStore)}catch(i){let s=dc(i,"Failed to persist write");n.reject(s)}})}function DR(t,e){return g(this,null,function*(){let n=N(t);try{let r=yield PB(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Ca.get(s);o&&(L(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.pa=!0:i.modifiedDocuments.size>0?L(o.pa):i.removedDocuments.size>0&&(L(o.pa),o.pa=!1))}),yield si(n,r,e)}catch(r){yield Zi(r)}})}function JM(t,e,n){let r=N(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.wa.forEach((s,o)=>{let a=o.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=N(o);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let h of d.Q_)h.G_(a)&&(l=!0)}),l&&Gb(c)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function eU(t,e,n){return g(this,null,function*(){let r=N(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Ca.get(e),s=i&&i.key;if(s){let o=new Fe(M.comparator);o=o.insert(s,ct.newNoDocument(s,U.min()));let a=ne().add(s),c=new ku(U.min(),new Map,new Fe(J),o,a);yield DR(r,c),r.Da=r.Da.remove(s),r.Ca.delete(e),Qb(r)}else yield Ja(r.localStore,e,!1).then(()=>nc(r,e,n)).catch(Zi)})}function tU(t,e){return g(this,null,function*(){let n=N(t),r=e.batch.batchId;try{let i=yield RB(n.localStore,e);Kb(n,r,null),Wb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield si(n,i)}catch(i){yield Zi(i)}})}function nU(t,e,n){return g(this,null,function*(){let r=N(t);try{let i=yield function(o,a){let c=N(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(L(d!==null),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(r.localStore,e);Kb(r,e,n),Wb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield si(r,i)}catch(i){yield Zi(i)}})}function rU(t,e){return g(this,null,function*(){let n=N(t);Ji(n.remoteStore)||E("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(o){let a=N(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Ma.get(r)||[];i.push(e),n.Ma.set(r,i)}catch(r){let i=dc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Wb(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function Kb(t,e,n){let r=N(t),i=r.Fa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function nc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||TR(t,r)})}function TR(t,e){t.ba.delete(e.path.canonicalString());let n=t.Da.get(e);n!==null&&(ec(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),Qb(t))}function ab(t,e,n){for(let r of n)r instanceof Cg?(t.va.addReference(r.key,e),iU(t,r)):r instanceof Dg?(E("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||TR(t,r.key)):k()}function iU(t,e){let n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(E("SyncEngine","New document in limbo: "+n),t.ba.add(r),Qb(t))}function Qb(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){let e=t.ba.values().next().value;t.ba.delete(e);let n=new M(me.fromString(e)),r=t.xa.next();t.Ca.set(r,new sb(n)),t.Da=t.Da.insert(n,r),jg(t.remoteStore,new Ya(Wt(ac(n.path)),r,"TargetPurposeLimboResolution",_n._e))}}function si(t,e,n){return g(this,null,function*(){let r=N(t),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,c)=>{o.push(r.Na(c,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);let u=jw.Ki(c.targetId,l);s.push(u)}}))}),yield Promise.all(o),r.ya.u_(i),yield function(c,l){return g(this,null,function*(){let u=N(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>_.forEach(l,h=>_.forEach(h.qi,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>_.forEach(h.Qi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Xi(d))throw d;E("LocalStore","Failed to update sequence numbers: "+d)}for(let d of l){let h=d.targetId;if(!d.fromCache){let f=u.ns.get(h),p=f.snapshotVersion,m=f.withLastLimboFreeSnapshotVersion(p);u.ns=u.ns.insert(h,m)}}})}(r.localStore,s))})}function sU(t,e){return g(this,null,function*(){let n=N(t);if(!n.currentUser.isEqual(e)){E("SyncEngine","User change. New user:",e.toKey());let r=yield hR(n.localStore,e);n.currentUser=e,function(s,o){s.Ma.forEach(a=>{a.forEach(c=>{c.reject(new w(x.CANCELLED,o))})}),s.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield si(n,r.us)}})}function oU(t,e){let n=N(t),r=n.Ca.get(e);if(r&&r.pa)return ne().add(r.key);{let i=ne(),s=n.Sa.get(e);if(!s)return i;for(let o of s){let a=n.wa.get(o);i=i.unionWith(a.view.Ia)}return i}}function aU(t,e){return g(this,null,function*(){let n=N(t),r=yield gg(n.localStore,e.query,!0),i=e.view.fa(r);return n.isPrimaryClient&&ab(n,e.targetId,i.Va),i})}function cU(t,e){return g(this,null,function*(){let n=N(t);return mR(n.localStore,e).then(r=>si(n,r))})}function lU(t,e,n,r){return g(this,null,function*(){let i=N(t),s=yield function(a,c){let l=N(a),u=N(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.vn(d,c).next(h=>h?l.localDocuments.getDocuments(d,h):_.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?yield lc(i.remoteStore):n==="acknowledged"||n==="rejected"?(Kb(i,e,r||null),Wb(i,e),function(a,c){N(N(a).mutationQueue).Mn(c)}(i.localStore,e)):k(),yield si(i,s)):E("SyncEngine","Cannot apply mutation batch with id: "+e)})}function uU(t,e){return g(this,null,function*(){let n=N(t);if(Bg(n),Yb(n),e===!0&&n.Oa!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield eN(n,r.toArray());n.Oa=!0,yield Zw(n.remoteStore,!0);for(let s of i)jg(n.remoteStore,s)}else if(e===!1&&n.Oa!==!1){let r=[],i=Promise.resolve();n.Sa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(nc(n,o),Ja(n.localStore,o,!0))),ec(n.remoteStore,o)}),yield i,yield eN(n,r),function(o){let a=N(o);a.Ca.forEach((c,l)=>{ec(a.remoteStore,l)}),a.va.mr(),a.Ca=new Map,a.Da=new Fe(M.comparator)}(n),n.Oa=!1,yield Zw(n.remoteStore,!1)}})}function eN(t,e,n){return g(this,null,function*(){let r=N(t),i=[],s=[];for(let o of e){let a,c=r.Sa.get(o);if(c&&c.length!==0){a=yield Xa(r.localStore,Wt(c[0]));for(let l of c){let u=r.wa.get(l),d=yield aU(r,u);d.snapshot&&s.push(d.snapshot)}}else{let l=yield gR(r.localStore,o);a=yield Xa(r.localStore,l),yield zb(r,SR(l),o,!1,a.resumeToken)}i.push(a)}return r.ya.u_(s),i})}function SR(t){return TN(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function dU(t){return function(n){return N(N(n).persistence).Bi()}(N(t).localStore)}function hU(t,e,n,r){return g(this,null,function*(){let i=N(t);if(i.Oa)return void E("SyncEngine","Ignoring unexpected query state notification.");let s=i.Sa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{let o=yield mR(i.localStore,AN(s[0])),a=ku.createSynthesizedRemoteEventForCurrentChange(e,n==="current",xt.EMPTY_BYTE_STRING);yield si(i,o,a);break}case"rejected":yield Ja(i.localStore,e,!0),nc(i,e,r);break;default:k()}})}function fU(t,e,n){return g(this,null,function*(){let r=Bg(t);if(r.Oa){for(let i of e){if(r.Sa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){E("SyncEngine","Adding an already active target "+i);continue}let s=yield gR(r.localStore,i),o=yield Xa(r.localStore,s);yield zb(r,SR(s),o.targetId,!1,o.resumeToken),jg(r.remoteStore,o)}for(let i of n)r.Sa.has(i)&&(yield Ja(r.localStore,i,!1).then(()=>{ec(r.remoteStore,i),nc(r,i)}).catch(Zi))}})}function Bg(t){let e=N(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=DR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eU.bind(null,e),e.ya.u_=WB.bind(null,e.eventManager),e.ya.La=KB.bind(null,e.eventManager),e}function Yb(t){let e=N(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nU.bind(null,e),e}function pU(t,e,n){let r=N(t);(function(s,o,a){return g(this,null,function*(){try{let c=yield o.getMetadata();if(yield function(f,p){let m=N(f),y=Ye(p.createTime);return m.persistence.runTransaction("hasNewerBundle","readonly",C=>m.$r.getBundleMetadata(C,p.id)).then(C=>!!C&&C.createTime.compareTo(y)>=0)}(s.localStore,c))return yield o.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(IR(c));let l=new rb(c,s.localStore,o.serializer),u=yield o.Ba();for(;u;){let h=yield l.sa(u);h&&a._updateProgress(h),u=yield o.Ba()}let d=yield l.complete();return yield si(s,d.aa,void 0),yield function(f,p){let m=N(f);return m.persistence.runTransaction("Save bundle","readwrite",y=>m.$r.saveBundleMetadata(y,p))}(s.localStore,c),a._completeWith(d.progress),Promise.resolve(d._a)}catch(c){return kn("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Hu=class{constructor(){this.synchronizeTabs=!1}initialize(e){return g(this,null,function*(){this.serializer=Zu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return dR(this.persistence,new pg,e.initialUser,this.serializer)}createPersistence(e){return new hg(fg.Hr,this.serializer)}createSharedClientState(e){return new xg}terminate(){return g(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Sg=class t extends Hu{constructor(e,n,r){super(),this.ka=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return g(this,null,function*(){yield e0(t.prototype,this,"initialize").call(this,e),yield this.ka.initialize(this,e),yield Yb(this.ka.syncEngine),yield lc(this.ka.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return dR(this.persistence,new pg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new Iw(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new $v(n,this.persistence);return new Uv(e.asyncQueue,r)}createPersistence(e){let n=jb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new Lw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,xR(),Bp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new xg}},cb=class t extends Sg{constructor(e,n){super(e,n,!1),this.ka=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return g(this,null,function*(){yield e0(t.prototype,this,"initialize").call(this,e);let n=this.ka.syncEngine;this.sharedClientState instanceof Iu&&(this.sharedClientState.syncEngine={Zs:lU.bind(null,n),Xs:hU.bind(null,n),eo:fU.bind(null,n),Bi:dU.bind(null,n),Ys:cU.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>g(this,null,function*(){yield uU(this.ka.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=xR();if(!Iu.D(n))throw new w(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=jb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Iu(n,e.asyncQueue,r,e.clientId,e.initialUser)}},qu=class{initialize(e,n){return g(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>JM(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=sU.bind(null,this.syncEngine),yield Zw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new eb}()}createDatastore(e){let n=Zu(e.databaseInfo.databaseId),r=function(s){return new Gw(s)}(e.databaseInfo);return function(s,o,a,c){return new Kw(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Yw(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>JM(this.syncEngine,n,0),function(){return yg.D()?new yg:new Hw}())}createSyncEngine(e,n){return function(i,s,o,a,c,l,u){let d=new ob(i,s,o,a,c,l);return u&&(d.Oa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return g(this,null,function*(){var e;yield function(r){return g(this,null,function*(){let i=N(r);E("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield cc(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function tN(t,e=10240){let n=0;return{read(){return g(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return g(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var rc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):Ke("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var lb=class{constructor(e,n){this.Ka=e,this.serializer=n,this.metadata=new at,this.buffer=new Uint8Array,this.$a=function(){return new TextDecoder("utf-8")}(),this.Ua().then(r=>{r&&r.ra()?this.metadata.resolve(r.na.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.na)}`))},r=>this.metadata.reject(r))}close(){return this.Ka.cancel()}getMetadata(){return g(this,null,function*(){return this.metadata.promise})}Ba(){return g(this,null,function*(){return yield this.getMetadata(),this.Ua()})}Ua(){return g(this,null,function*(){let e=yield this.Wa();if(e===null)return null;let n=this.$a.decode(e),r=Number(n);isNaN(r)&&this.Ga(`length string (${n}) is not valid number`);let i=yield this.za(r);return new nb(JSON.parse(i),e.length+r)})}ja(){return this.buffer.findIndex(e=>e===123)}Wa(){return g(this,null,function*(){for(;this.ja()<0&&!(yield this.Ha()););if(this.buffer.length===0)return null;let e=this.ja();e<0&&this.Ga("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}za(e){return g(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ha())&&this.Ga("Reached the end of bundle when more is expected.");let n=this.$a.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}Ga(e){throw this.Ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ha(){return g(this,null,function*(){let e=yield this.Ka.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var ub=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return g(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new w(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,s){return g(this,null,function*(){let o=N(i),a={documents:s.map(d=>Fu(o.serializer,d))},c=yield o.vo("BatchGetDocuments",o.serializer.databaseId,me.emptyPath(),a,s.length),l=new Map;c.forEach(d=>{let h=vB(o.serializer,d);l.set(h.key.toString(),h)});let u=[];return s.forEach(d=>{let h=l.get(d.toString());L(!!h),u.push(h)}),u})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Qi(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return g(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=M.fromPath(r);this.mutations.push(new Nu(i,this.precondition(i)))}),yield function(r,i){return g(this,null,function*(){let s=N(r),o={writes:i.map(a=>Vu(s.serializer,a))};yield s.So("Commit",s.serializer.databaseId,me.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw k();n=U.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new w(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(U.min())?Ge.exists(!1):Ge.updateTime(n):Ge.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(U.min()))throw new w(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ge.updateTime(n)}return Ge.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var db=class{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Ja=r.maxAttempts,this.jo=new Uu(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){this.jo.qo(()=>g(this,null,function*(){let e=new ub(this.datastore),n=this.Xa(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.eu(i)}))}).catch(r=>{this.eu(r)})}))}Xa(e){try{let n=this.updateFunction(e);return!Wu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget(()=>(this.Za(),Promise.resolve()))):this.deferred.reject(e)}tu(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!HN(n)}return!1}};var hb=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ot.UNAUTHENTICATED,this.clientId=Hp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>g(this,null,function*(){E("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(E("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new w(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new at;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>g(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=dc(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Up(t,e){return g(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),E("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>g(this,null,function*(){r.isEqual(i)||(yield hR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function fb(t,e){return g(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Zb(t);E("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ZM(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>ZM(e.remoteStore,i)),t._onlineComponents=e})}function AR(t){return t.name==="FirebaseError"?t.code===x.FAILED_PRECONDITION||t.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function Zb(t){return g(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){E("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Up(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!AR(n))throw n;kn("Error using user provided cache. Falling back to memory cache: "+n),yield Up(t,new Hu)}}else E("FirestoreClient","Using default OfflineComponentProvider"),yield Up(t,new Hu);return t._offlineComponents})}function Ug(t){return g(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(E("FirestoreClient","Using user provided OnlineComponentProvider"),yield fb(t,t._uninitializedComponentsProvider._online)):(E("FirestoreClient","Using default OnlineComponentProvider"),yield fb(t,new qu))),t._onlineComponents})}function MR(t){return Zb(t).then(e=>e.persistence)}function Xb(t){return Zb(t).then(e=>e.localStore)}function NR(t){return Ug(t).then(e=>e.remoteStore)}function Jb(t){return Ug(t).then(e=>e.syncEngine)}function gU(t){return Ug(t).then(e=>e.datastore)}function ic(t){return g(this,null,function*(){let e=yield Ug(t),n=e.eventManager;return n.onListen=QB.bind(null,e.syncEngine),n.onUnlisten=ZB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=YB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=XB.bind(null,e.syncEngine),n})}function mU(t){return t.asyncQueue.enqueue(()=>g(this,null,function*(){let e=yield MR(t),n=yield NR(t);return e.setNetworkEnabled(!0),function(i){let s=N(i);return s.v_.delete(0),Xu(s)}(n)}))}function _U(t){return t.asyncQueue.enqueue(()=>g(this,null,function*(){let e=yield MR(t),n=yield NR(t);return e.setNetworkEnabled(!1),function(i){return g(this,null,function*(){let s=N(i);s.v_.add(0),yield cc(s),s.x_.set("Offline")})}(n)}))}function xU(t,e){let n=new at;return t.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(i,s,o){return g(this,null,function*(){try{let a=yield function(l,u){let d=N(l);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,u))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new w(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=dc(a,`Failed to get document '${s} from cache`);o.reject(c)}})}(yield Xb(t),e,n)})),n.promise}function RR(t,e,n={}){let r=new at;return t.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(s,o,a,c,l){let u=new rc({next:h=>{o.enqueueAndForget(()=>qb(s,d));let f=h.docs.has(a);!f&&h.fromCache?l.reject(new w(x.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?l.reject(new w(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new $u(ac(a.path),u,{includeMetadataChanges:!0,ta:!0});return Hb(s,d)}(yield ic(t),t.asyncQueue,e,n,r)})),r.promise}function yU(t,e){let n=new at;return t.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(i,s,o){return g(this,null,function*(){try{let a=yield gg(i,s,!0),c=new Tg(s,a.hs),l=c.Ta(a.documents),u=c.applyChanges(l,!1);o.resolve(u.snapshot)}catch(a){let c=dc(a,`Failed to execute query '${s} against cache`);o.reject(c)}})}(yield Xb(t),e,n)})),n.promise}function PR(t,e,n={}){let r=new at;return t.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(s,o,a,c,l){let u=new rc({next:h=>{o.enqueueAndForget(()=>qb(s,d)),h.fromCache&&c.source==="server"?l.reject(new w(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new $u(a,u,{includeMetadataChanges:!0,ta:!0});return Hb(s,d)}(yield ic(t),t.asyncQueue,e,n,r)})),r.promise}function vU(t,e){let n=new rc(e);return t.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(i,s){N(i).W_.add(s),s.next()}(yield ic(t),n)})),()=>{n.Qa(),t.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(i,s){N(i).W_.delete(s)}(yield ic(t),n)}))}}function wU(t,e,n,r){let i=function(o,a){let c;return c=typeof o=="string"?GN().encode(o):o,function(u,d){return new lb(u,d)}(function(u,d){if(u instanceof Uint8Array)return tN(u,d);if(u instanceof ArrayBuffer)return tN(new Uint8Array(u),d);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,Zu(e));t.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){pU(yield Jb(t),i,r)}))}function bU(t,e){return t.asyncQueue.enqueue(()=>g(this,null,function*(){return function(r,i){let s=N(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield Xb(t),e)}))}function kR(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var nN=new Map;function eE(t,e,n){if(!n)throw new w(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function tE(t,e,n,r){if(e===!0&&r===!0)throw new w(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function rN(t){if(!M.isDocumentKey(t))throw new w(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function iN(t){if(M.isDocumentKey(t))throw new w(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $g(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":k()}function _e(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new w(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=$g(t);throw new w(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function OR(t,e){if(e<=0)throw new w(x.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Ag=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new w(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new w(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new w(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new w(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new w(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},io=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ag({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new w(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new w(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ag(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Nv;switch(r.type){case"firstParty":return new Ov(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new w(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=nN.get(n);r&&(E("ComponentProvider","Removing Datastore"),nN.delete(n),r.terminate())}(this),Promise.resolve()}};function FR(t,e,n,r={}){var i;let s=(t=_e(t,io))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&kn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=ot.MOCK_USER;else{a=qd(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new w(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ot(l)}t._authCredentials=new Rv(new $p(a,c))}}var At=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Pe=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Tr=class t extends At{constructor(e,n,r){super(e,n,ac(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Pe(this.firestore,null,new M(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function nE(t,e,...n){if(t=ue(t),eE("collection","path",e),t instanceof io){let r=me.fromString(e,...n);return iN(r),new Tr(t,null,r)}{if(!(t instanceof Pe||t instanceof Tr))throw new w(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(me.fromString(e,...n));return iN(r),new Tr(t.firestore,null,r)}}function VR(t,e){if(t=_e(t,io),eE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new w(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new At(t,null,function(r){return new er(me.emptyPath(),r)}(e))}function Ju(t,e,...n){if(t=ue(t),arguments.length===1&&(e=Hp.newId()),eE("doc","path",e),t instanceof io){let r=me.fromString(e,...n);return rN(r),new Pe(t,null,new M(r))}{if(!(t instanceof Pe||t instanceof Tr))throw new w(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(me.fromString(e,...n));return rN(r),new Pe(t.firestore,t instanceof Tr?t.converter:null,new M(r))}}function rE(t,e){return t=ue(t),e=ue(e),(t instanceof Pe||t instanceof Tr)&&(e instanceof Pe||e instanceof Tr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function iE(t,e){return t=ue(t),e=ue(e),t instanceof At&&e instanceof At&&t.firestore===e.firestore&&Qu(t._query,e._query)&&t.converter===e.converter}var pb=class{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new Uu(this,"async_queue_retry"),this.cu=()=>{let n=Bp();n&&E("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=Bp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;let n=Bp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});let n=new at;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){return g(this,null,function*(){if(this.ru.length!==0){try{yield this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!Xi(e))throw e;E("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}})}hu(e){let n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ke("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);let i=Xw.createAndSchedule(this,e,n,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&k()}verifyOperationInProgress(){}Tu(){return g(this,null,function*(){let e;do e=this.nu,yield e;while(e!==this.nu)})}Eu(e){for(let n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){let n=this.su.indexOf(e);this.su.splice(n,1)}};function gb(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var mb=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new at,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var LR=-1,Le=class extends io{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new pb}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||jR(this),this._firestoreClient.terminate()}};function ht(t){return t._firestoreClient||jR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function jR(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,l,u){return new Hv(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,kR(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new hb(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function BR(t,e){QR(t=_e(t,Le));let n=ht(t);if(n._uninitializedComponentsProvider)throw new w(x.FAILED_PRECONDITION,"SDK cache is already specified.");kn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new qu;return $R(n,i,new Sg(i,r.cacheSizeBytes,e?.forceOwnership))}function UR(t){QR(t=_e(t,Le));let e=ht(t);if(e._uninitializedComponentsProvider)throw new w(x.FAILED_PRECONDITION,"SDK cache is already specified.");kn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new qu;return $R(e,r,new cb(r,n.cacheSizeBytes))}function $R(t,e,n){let r=new at;return t.asyncQueue.enqueue(()=>g(this,null,function*(){try{yield Up(t,n),yield fb(t,e),r.resolve()}catch(i){let s=i;if(!AR(s))throw s;kn("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function HR(t){if(t._initialized&&!t._terminated)throw new w(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new at;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>g(this,null,function*(){try{yield function(r){return g(this,null,function*(){if(!ei.D())return Promise.resolve();let i=r+"main";yield ei.delete(i)})}(jb(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function qR(t){return function(n){let r=new at;return n.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return rU(yield Jb(n),r)})),r.promise}(ht(t=_e(t,Le)))}function GR(t){return mU(ht(t=_e(t,Le)))}function zR(t){return _U(ht(t=_e(t,Le)))}function WR(t,e){let n=ht(t=_e(t,Le)),r=new mb;return wU(n,t._databaseId,e,r),r}function KR(t,e){return bU(ht(t=_e(t,Le)),e).then(n=>n?new At(t,null,n.query):null)}function QR(t){if(t._initialized||t._terminated)throw new w(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Nr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(xt.fromBase64String(e))}catch(n){throw new w(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var nr=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new w(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ri=class{constructor(e){this._methodName=e}};var so=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new w(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new w(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}};var EU=/^__.*__$/,_b=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new tr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ki(e,this.data,n,this.fieldTransforms)}},Mg=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new tr(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function YR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw k()}}var Ng=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ru(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return Rg(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(YR(this.Vu)&&EU.test(e))throw this.Su('Document fields cannot begin and end with "__"')}},xb=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Zu(e)}Cu(e,n,r,i=!1){return new Ng({Vu:e,methodName:n,Du:r,path:Qe.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function lo(t){let e=t._freezeSettings(),n=Zu(t._databaseId);return new xb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Hg(t,e,n,r,i,s={}){let o=t.Cu(s.merge||s.mergeFields?2:0,e,n,i);aE("Data must be an object, but it was:",o,r);let a=JR(r,o),c,l;if(s.merge)c=new xn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let d of s.mergeFields){let h=Eb(e,d,n);if(!o.contains(h))throw new w(x.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);tP(u,h)||u.push(h)}c=new xn(u),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new _b(new Ft(a),c,l)}var Gu=class t extends ri{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function ZR(t,e,n){return new Ng({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var yb=class t extends ri{_toFieldTransform(e){return new to(e.path,new zi)}isEqual(e){return e instanceof t}},vb=class t extends ri{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){let n=ZR(this,e,!0),r=this.vu.map(s=>uo(s,n)),i=new ti(r);return new to(e.path,i)}isEqual(e){return e instanceof t&&r0(this.vu,e.vu)}},wb=class t extends ri{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){let n=ZR(this,e,!0),r=this.vu.map(s=>uo(s,n)),i=new ni(r);return new to(e.path,i)}isEqual(e){return e instanceof t&&r0(this.vu,e.vu)}},bb=class t extends ri{constructor(e,n){super(e),this.Fu=n}_toFieldTransform(e){let n=new Wi(e.serializer,FN(e.serializer,this.Fu));return new to(e.path,n)}isEqual(e){return e instanceof t&&this.Fu===e.Fu}};function sE(t,e,n,r){let i=t.Cu(1,e,n);aE("Data must be an object, but it was:",i,r);let s=[],o=Ft.empty();co(r,(c,l)=>{let u=cE(e,c,n);l=ue(l);let d=i.yu(u);if(l instanceof Gu)s.push(u);else{let h=uo(l,d);h!=null&&(s.push(u),o.set(u,h))}});let a=new xn(s);return new Mg(o,a,i.fieldTransforms)}function oE(t,e,n,r,i,s){let o=t.Cu(1,e,n),a=[Eb(e,r,n)],c=[i];if(s.length%2!=0)throw new w(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(Eb(e,s[h])),c.push(s[h+1]);let l=[],u=Ft.empty();for(let h=a.length-1;h>=0;--h)if(!tP(l,a[h])){let f=a[h],p=c[h];p=ue(p);let m=o.yu(f);if(p instanceof Gu)l.push(f);else{let y=uo(p,m);y!=null&&(l.push(f),u.set(f,y))}}let d=new xn(l);return new Mg(u,d,o.fieldTransforms)}function XR(t,e,n,r=!1){return uo(n,t.Cu(r?4:3,e))}function uo(t,e){if(eP(t=ue(t)))return aE("Unsupported field value:",e,t),JR(t,e);if(t instanceof ri)return function(r,i){if(!YR(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=uo(a,i.wu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ue(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return FN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Be.fromDate(r);return{timestampValue:Qa(i.serializer,s)}}if(r instanceof Be){let s=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qa(i.serializer,s)}}if(r instanceof so)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nr)return{bytesValue:zN(i.serializer,r._byteString)};if(r instanceof Pe){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Fb(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${$g(r)}`)}(t,e)}function JR(t,e){let n={};return xN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):co(t,(r,i)=>{let s=uo(i,e.fu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function eP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof so||t instanceof Nr||t instanceof Pe||t instanceof ri)}function aE(t,e,n){if(!eP(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=$g(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function Eb(t,e,n){if((e=ue(e))instanceof nr)return e._internalPath;if(typeof e=="string")return cE(t,e);throw Rg("Field path arguments must be of type string or ",t,!1,void 0,n)}var IU=new RegExp("[~\\*/\\[\\]]");function cE(t,e,n){if(e.search(IU)>=0)throw Rg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new nr(...e.split("."))._internalPath}catch{throw Rg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Rg(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new w(x.INVALID_ARGUMENT,a+t+c)}function tP(t,e){return t.some(n=>n.isEqual(e))}var oo=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Ib(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(qg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Ib=class extends oo{data(){return super.data()}};function qg(t,e){return typeof e=="string"?cE(t,e):e instanceof nr?e._internalPath:e._delegate._internalPath}function nP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new w(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var zu=class{},ao=class extends zu{};function oi(t,e,...n){let r=[];e instanceof zu&&r.push(e),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof Cb).length,a=s.filter(c=>c instanceof Pg).length;if(o>1||o>0&&a>0)throw new w(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Pg=class t extends ao{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return hP(e._query,n),new At(e.firestore,e.converter,nw(e._query,n))}_parse(e){let n=lo(e.firestore);return function(s,o,a,c,l,u,d){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new w(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){oN(d,u);let f=[];for(let p of d)f.push(sN(c,s,p));h={arrayValue:{values:f}}}else h=sN(c,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||oN(d,u),h=XR(a,o,d,u==="in"||u==="not-in");return fe.create(l,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function rP(t,e,n){let r=e,i=qg("where",t);return Pg._create(i,r,n)}var Cb=class t extends zu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:De.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)hP(o,c),o=nw(o,c)}(e._query,n),new At(e.firestore,e.converter,nw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Db=class t extends ao{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new w(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new w(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Js(s,o)}(e._query,this._field,this._direction);return new At(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new er(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function iP(t,e="asc"){let n=e,r=qg("orderBy",t);return Db._create(r,n)}var kg=class t extends ao{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new At(e.firestore,e.converter,Jp(e._query,this._limit,this._limitType))}};function sP(t){return OR("limit",t),kg._create("limit",t,"F")}function oP(t){return OR("limitToLast",t),kg._create("limitToLast",t,"L")}var Og=class t extends ao{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=dP(e,this.type,this._docOrFields,this._inclusive);return new At(e.firestore,e.converter,function(i,s){return new er(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}};function aP(...t){return Og._create("startAt",t,!0)}function cP(...t){return Og._create("startAfter",t,!1)}var Fg=class t extends ao{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=dP(e,this.type,this._docOrFields,this._inclusive);return new At(e.firestore,e.converter,function(i,s){return new er(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}};function lP(...t){return Fg._create("endBefore",t,!1)}function uP(...t){return Fg._create("endAt",t,!0)}function dP(t,e,n,r){if(n[0]=ue(n[0]),n[0]instanceof oo)return function(s,o,a,c,l){if(!c)throw new w(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let u=[];for(let d of Ua(s))if(d.field.isKeyField())u.push(Xs(o,c.key));else{let h=c.data.field(d.field);if(Lg(h))throw new w(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new w(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}u.push(h)}return new Ar(u,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=lo(t.firestore);return function(o,a,c,l,u,d){let h=o.explicitOrderBy;if(u.length>h.length)throw new w(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let p=0;p<u.length;p++){let m=u[p];if(h[p].field.isKeyField()){if(typeof m!="string")throw new w(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof m}`);if(!kb(o)&&m.indexOf("/")!==-1)throw new w(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${m}' contains a slash.`);let y=o.path.child(me.fromString(m));if(!M.isDocumentKey(y))throw new w(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${y}' is not because it contains an odd number of segments.`);let C=new M(y);f.push(Xs(a,C))}else{let y=XR(c,l,m);f.push(y)}}return new Ar(f,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function sN(t,e,n){if(typeof(n=ue(n))=="string"){if(n==="")throw new w(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kb(e)&&n.indexOf("/")!==-1)throw new w(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(me.fromString(n));if(!M.isDocumentKey(r))throw new w(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xs(t,new M(r))}if(n instanceof Pe)return Xs(t,n._key);throw new w(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$g(n)}.`)}function oN(t,e){if(!Array.isArray(t)||t.length===0)throw new w(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hP(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new w(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new w(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var sc=class{convertValue(e,n="none"){switch(Zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw k()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return co(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new so(qe(e.latitude),qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Rb(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Su(e));default:return null}}convertTimestamp(e){let n=$i(e);return new Be(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=me.fromString(e);L(rR(r));let i=new qi(r.get(1),r.get(3)),s=new M(r.popFirst(5));return i.isEqual(n)||Ke(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function Gg(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Tb=class extends sc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pe(this.firestore,null,n)}};var Jr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Fn=class extends oo{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Bi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(qg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Bi=class extends Fn{data(e={}){return super.data(e)}},rr=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Jr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Bi(this._firestore,this._userDataWriter,r.key,r,new Jr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new w(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Bi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Jr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Bi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Jr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:CU(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function CU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return k()}}function lE(t,e){return t instanceof Fn&&e instanceof Fn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof rr&&e instanceof rr&&t._firestore===e._firestore&&iE(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function fP(t){t=_e(t,Pe);let e=_e(t.firestore,Le);return RR(ht(e),t._key).then(n=>fE(e,t,n))}var ii=class extends sc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pe(this.firestore,null,n)}};function pP(t){t=_e(t,Pe);let e=_e(t.firestore,Le),n=ht(e),r=new ii(e);return xU(n,t._key).then(i=>new Fn(e,r,t._key,i,new Jr(i!==null&&i.hasLocalMutations,!0),t.converter))}function gP(t){t=_e(t,Pe);let e=_e(t.firestore,Le);return RR(ht(e),t._key,{source:"server"}).then(n=>fE(e,t,n))}function mP(t){t=_e(t,At);let e=_e(t.firestore,Le),n=ht(e),r=new ii(e);return nP(t._query),PR(n,t._query).then(i=>new rr(e,r,t,i))}function _P(t){t=_e(t,At);let e=_e(t.firestore,Le),n=ht(e),r=new ii(e);return yU(n,t._query).then(i=>new rr(e,r,t,i))}function xP(t){t=_e(t,At);let e=_e(t.firestore,Le),n=ht(e),r=new ii(e);return PR(n,t._query,{source:"server"}).then(i=>new rr(e,r,t,i))}function uE(t,e,n){t=_e(t,Pe);let r=_e(t.firestore,Le),i=Gg(t.converter,e,n);return hc(r,[Hg(lo(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ge.none())])}function dE(t,e,n,...r){t=_e(t,Pe);let i=_e(t.firestore,Le),s=lo(i),o;return o=typeof(e=ue(e))=="string"||e instanceof nr?oE(s,"updateDoc",t._key,e,n,r):sE(s,"updateDoc",t._key,e),hc(i,[o.toMutation(t._key,Ge.exists(!0))])}function yP(t){return hc(_e(t.firestore,Le),[new Qi(t._key,Ge.none())])}function vP(t,e){let n=_e(t.firestore,Le),r=Ju(t),i=Gg(t.converter,e);return hc(n,[Hg(lo(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ge.exists(!1))]).then(()=>r)}function hE(t,...e){var n,r,i;t=ue(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||gb(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(gb(e[o])){let d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,l,u;if(t instanceof Pe)l=_e(t.firestore,Le),u=ac(t._key.path),c={next:d=>{e[o]&&e[o](fE(l,t,d))},error:e[o+1],complete:e[o+2]};else{let d=_e(t,At);l=_e(d.firestore,Le),u=d._query;let h=new ii(l);c={next:f=>{e[o]&&e[o](new rr(l,h,d,f))},error:e[o+1],complete:e[o+2]},nP(t._query)}return function(h,f,p,m){let y=new rc(m),C=new $u(f,y,p);return h.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return Hb(yield ic(h),C)})),()=>{y.Qa(),h.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return qb(yield ic(h),C)}))}}(ht(l),u,a,c)}function wP(t,e){return vU(ht(t=_e(t,Le)),gb(e)?e:{next:e})}function hc(t,e){return function(r,i){let s=new at;return r.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return JB(yield Jb(r),i,s)})),s.promise}(ht(t),e)}function fE(t,e,n){let r=n.docs.get(e._key),i=new ii(t);return new Fn(t,i,e._key,r,new Jr(n.hasPendingWrites,n.fromCache),e.converter)}var DU={maxAttempts:5};var Vg=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=lo(e)}set(e,n,r){this._verifyNotCommitted();let i=Li(e,this._firestore),s=Gg(i.converter,n,r),o=Hg(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ge.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let s=Li(e,this._firestore),o;return o=typeof(n=ue(n))=="string"||n instanceof nr?oE(this._dataReader,"WriteBatch.update",s._key,n,r,i):sE(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Ge.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Li(e,this._firestore);return this._mutations=this._mutations.concat(new Qi(n._key,Ge.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new w(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Li(t,e){if((t=ue(t)).firestore!==e)throw new w(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Sb=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=lo(n)}get(n){let r=Li(n,this._firestore),i=new Tb(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return k();let o=s[0];if(o.isFoundDocument())return new oo(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new oo(this._firestore,i,r._key,null,r.converter);throw k()})}set(n,r,i){let s=Li(n,this._firestore),o=Gg(s.converter,r,i),a=Hg(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){let o=Li(n,this._firestore),a;return a=typeof(r=ue(r))=="string"||r instanceof nr?oE(this._dataReader,"Transaction.update",o._key,r,i,s):sE(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){let r=Li(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Li(e,this._firestore),r=new ii(this._firestore);return super.get(e).then(i=>new Fn(this._firestore,r,n._key,i._document,new Jr(!1,!1),n.converter))}};function bP(t,e,n){t=_e(t,Le);let r=Object.assign(Object.assign({},DU),n);return function(s){if(s.maxAttempts<1)throw new w(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){let c=new at;return s.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){let l=yield gU(s);new db(s.asyncQueue,l,a,o,c).Ya()})),c.promise}(ht(t),i=>e(new Sb(t,i)),r)}function EP(){return new Gu("deleteField")}function IP(){return new yb("serverTimestamp")}function CP(...t){return new vb("arrayUnion",t)}function DP(...t){return new wb("arrayRemove",t)}function TP(t){return new bb("increment",t)}(function(e,n=!0){(function(i){oc=i})(Qd),ls(new dn("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Le(new Pv(r.getProvider("auth-internal")),new Vv(r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new w(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qi(l.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Bn(aM,"4.5.1",e),Bn(aM,"4.5.1","esm2017")})();var TU="@firebase/firestore-compat",SU="0.3.28";function yE(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new w("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function SP(){if(typeof Uint8Array>"u")throw new w("unimplemented","Uint8Arrays are not available in this environment.")}function AP(){if(!yN())throw new w("unimplemented","Blobs are unavailable in Firestore in this environment.")}var zg=class t{constructor(e){this._delegate=e}static fromBase64String(e){return AP(),new t(Nr.fromBase64String(e))}static fromUint8Array(e){return SP(),new t(Nr.fromUint8Array(e))}toBase64(){return AP(),this._delegate.toBase64()}toUint8Array(){return SP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function pE(t){return AU(t,["next","error","complete"])}function AU(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var gE=class{enableIndexedDbPersistence(e,n){return BR(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return UR(e._delegate)}clearIndexedDbPersistence(e){return HR(e._delegate)}},Wg=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof qi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&kn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){FR(this._delegate,e,n,r)}enableNetwork(){return GR(this._delegate)}disableNetwork(){return zR(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,tE("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return qR(this._delegate)}onSnapshotsInSync(e){return wP(this._delegate,e)}get app(){if(!this._appCompat)throw new w("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new gc(this,nE(this._delegate,e))}catch(n){throw Kt(n,"collection()","Firestore.collection()")}}doc(e){try{return new Rr(this,Ju(this._delegate,e))}catch(n){throw Kt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new go(this,VR(this._delegate,e))}catch(n){throw Kt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return bP(this._delegate,n=>e(new Kg(this,n)))}batch(){return ht(this._delegate),new Qg(new Vg(this._delegate,e=>hc(this._delegate,e)))}loadBundle(e){return WR(this._delegate,e)}namedQuery(e){return KR(this._delegate,e).then(n=>n?new go(this,n):null)}},fc=class extends sc{constructor(e){super(),this.firestore=e}convertBytes(e){return new zg(new Nr(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Rr.forKey(n,this.firestore,null)}};function MU(t){aN(t)}var Kg=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new fc(e)}get(e){let n=ho(e);return this._delegate.get(n).then(r=>new fo(this._firestore,new Fn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=ho(e);return r?(yE("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let s=ho(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){let n=ho(e);return this._delegate.delete(n),this}},Qg=class{constructor(e){this._delegate=e}set(e,n,r){let i=ho(e);return r?(yE("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let s=ho(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){let n=ho(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},pc=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Bi(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new po(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new t(e,new fc(e),n),i.set(n,s)),s}};pc.INSTANCES=new WeakMap;var Rr=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new fc(e)}static forPath(e,n,r){if(e.length%2!==0)throw new w("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new Pe(n._delegate,r,new M(e)))}static forKey(e,n,r){return new t(n,new Pe(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new gc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new gc(this.firestore,nE(this._delegate,e))}catch(n){throw Kt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ue(e),e instanceof Pe?rE(this._delegate,e):!1}set(e,n){n=yE("DocumentReference.set",n);try{return n?uE(this._delegate,e,n):uE(this._delegate,e)}catch(r){throw Kt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?dE(this._delegate,e):dE(this._delegate,e,n,...r)}catch(i){throw Kt(i,"updateDoc()","DocumentReference.update()")}}delete(){return yP(this._delegate)}onSnapshot(...e){let n=MP(e),r=NP(e,i=>new fo(this.firestore,new Fn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return hE(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=pP(this._delegate):e?.source==="server"?n=gP(this._delegate):n=fP(this._delegate),n.then(r=>new fo(this.firestore,new Fn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(pc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Kt(t,e,n){return t.message=t.message.replace(e,n),t}function MP(t){for(let e of t)if(typeof e=="object"&&!pE(e))return e;return{}}function NP(t,e){var n,r;let i;return pE(t[0])?i=t[0]:pE(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var fo=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Rr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return lE(this._delegate,e._delegate)}},po=class extends fo{data(e){let n=this._delegate.data(e);return this._delegate._converter||cN(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},go=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new fc(e)}where(e,n,r){try{return new t(this.firestore,oi(this._delegate,rP(e,n,r)))}catch(i){throw Kt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,oi(this._delegate,iP(e,n)))}catch(r){throw Kt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,oi(this._delegate,sP(e)))}catch(n){throw Kt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,oi(this._delegate,oP(e)))}catch(n){throw Kt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,oi(this._delegate,aP(...e)))}catch(n){throw Kt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,oi(this._delegate,cP(...e)))}catch(n){throw Kt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,oi(this._delegate,lP(...e)))}catch(n){throw Kt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,oi(this._delegate,uP(...e)))}catch(n){throw Kt(n,"endAt()","Query.endAt()")}}isEqual(e){return iE(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=_P(this._delegate):e?.source==="server"?n=xP(this._delegate):n=mP(this._delegate),n.then(r=>new ed(this.firestore,new rr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=MP(e),r=NP(e,i=>new ed(this.firestore,new rr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return hE(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(pc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},mE=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new po(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},ed=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new go(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new po(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new mE(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new po(this._firestore,r))})}isEqual(e){return lE(this._delegate,e._delegate)}},gc=class t extends go{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Rr(this.firestore,e):null}doc(e){try{return e===void 0?new Rr(this.firestore,Ju(this._delegate)):new Rr(this.firestore,Ju(this._delegate,e))}catch(n){throw Kt(n,"doc()","CollectionReference.doc()")}}add(e){return vP(this._delegate,e).then(n=>new Rr(this.firestore,n))}isEqual(e){return rE(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(pc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function ho(t){return _e(t,Pe)}var _E=class t{constructor(...e){this._delegate=new nr(...e)}static documentId(){return new t(Qe.keyField().canonicalString())}isEqual(e){return e=ue(e),e instanceof nr?this._delegate._internalPath.isEqual(e._internalPath):!1}};var xE=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=IP();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=EP();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=CP(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=DP(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=TP(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var NU={Firestore:Wg,GeoPoint:so,Timestamp:Be,Blob:zg,Transaction:Kg,WriteBatch:Qg,DocumentReference:Rr,DocumentSnapshot:fo,Query:go,QueryDocumentSnapshot:po,QuerySnapshot:ed,CollectionReference:gc,FieldPath:_E,FieldValue:xE,setLogLevel:MU,CACHE_SIZE_UNLIMITED:LR};function RU(t,e){t.INTERNAL.registerComponent(new dn("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},NU)))}function PU(t){RU(t,(e,n)=>new Wg(e,n,new gE)),t.registerVersion(TU,SU)}PU(bt);function kU(t,e=ps){return new se(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function RP(t,e){return kU(t,e)}function OU(t,e){return RP(t,e).pipe(ms(void 0),Wc(),j(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function bE(t,e){return RP(t,e).pipe(j(n=>({payload:n,type:"query"})))}var Yg=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:s}=OP(r,n);return new Xg(i,s,this.afs)}snapshotChanges(){return OU(this.ref,this.afs.schedulers.outsideAngular).pipe(We)}valueChanges(e={}){return this.snapshotChanges().pipe(j(({payload:n})=>e.idField?ie(A({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return xe(this.ref.get(e)).pipe(We)}};function Zg(t,e){return bE(t,e).pipe(ms(void 0),Wc(),j(n=>{let[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=s.find(d=>d.doc.ref.isEqual(a.ref)),u=r?.payload.docs.find(d=>d.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function PP(t,e,n){return Zg(t,n).pipe(cr((r,i)=>FU(r,i.map(s=>s.payload),e),[]),Gc(),j(r=>r.map(i=>({type:i.type,payload:i}))))}function FU(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=VU(t,r))}),t}function vE(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function VU(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return vE(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return vE(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return vE(t,e.oldIndex,1);break}return t}function kP(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Xg=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Zg(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(j(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(ms(void 0),Wc(),Ct(([r,i])=>i.length>0||!r),j(([,r])=>r),We)}auditTrail(e){return this.stateChanges(e).pipe(cr((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=kP(e);return PP(this.query,n,this.afs.schedulers.outsideAngular).pipe(We)}valueChanges(e={}){return bE(this.query,this.afs.schedulers.outsideAngular).pipe(j(n=>n.payload.docs.map(r=>e.idField?ie(A({},r.data()),{[e.idField]:r.id}):r.data())),We)}get(e){return xe(this.query.get(e)).pipe(We)}add(e){return this.ref.add(e)}doc(e){return new Yg(this.ref.doc(e),this.afs)}},wE=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Zg(this.query,this.afs.schedulers.outsideAngular).pipe(We):Zg(this.query,this.afs.schedulers.outsideAngular).pipe(j(n=>n.filter(r=>e.indexOf(r.type)>-1)),Ct(n=>n.length>0),We)}auditTrail(e){return this.stateChanges(e).pipe(cr((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=kP(e);return PP(this.query,n,this.afs.schedulers.outsideAngular).pipe(We)}valueChanges(e={}){return bE(this.query,this.afs.schedulers.outsideAngular).pipe(j(r=>r.payload.docs.map(i=>e.idField?A({[e.idField]:i.id},i.data()):i.data())),We)}get(e){return xe(this.query.get(e)).pipe(We)}},LU=new O("angularfire2.enableFirestorePersistence"),jU=new O("angularfire2.firestore.persistenceSettings"),BU=new O("angularfire2.firestore.settings"),UU=new O("angularfire2.firestore.use-emulator");function OP(t,e=n=>n){return{query:e(t),ref:t}}var mc=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,c,l,u,d,h,f,p,m,y,C,F){this.schedulers=c;let T=Vs(n,a,r),H=u;d&&ql(T,a,h,p,m,y,f,C),[this.firestore,this.persistenceEnabled$]=Ea(`${T.name}.firestore`,"AngularFirestore",T.name,()=>{let W=a.runOutsideAngular(()=>T.firestore());if(s&&W.settings(s),H&&W.useEmulator(...H),i&&!Ns(o)){let Z=()=>{try{return xe(W.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(Te){return typeof console<"u"&&console.warn(Te),B(!1)}};return[W,a.runOutsideAngular(Z)]}else return[W,B(!1)]},[s,H,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:s,query:o}=OP(i,r),a=this.schedulers.ngZone.run(()=>s);return new Xg(a,o,this)}collectionGroup(n,r){let i=r||(o=>o),s=this.firestore.collectionGroup(n);return new wE(i(s),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new Yg(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(b(Ni),b(Ri,8),b(LU,8),b(BU,8),b(Rt),b(he),b(ba),b(jU,8),b(UU,8),b(np,8),b(Ll,8),b(jl,8),b(Bl,8),b(Ul,8),b($l,8),b(Hl,8),b(Qr,8))};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var Jg=(()=>{let e=class e{constructor(r){this.firestore=r}getTransacciones(){return g(this,null,function*(){return yield this.parseData(this.firestore.collection("transacciones").snapshotChanges())})}getTransaccionById(r){return g(this,null,function*(){return(yield this.parseData(this.firestore.collection("transacciones",s=>s.where("id","==",r)).snapshotChanges()))[0]})}parseData(r){let i=[];return new Promise(s=>{r.subscribe(o=>{i=o.map(a=>ie(A({},a.payload.doc.data()),{id:a.payload.doc.id})),s(i)})})}createTransaccion(r){return g(this,null,function*(){return yield this.firestore.collection("transacciones").add(Object.assign({},r))})}updateTransaccion(r){return g(this,null,function*(){yield this.firestore.doc("transacciones/"+r.id).update(r)})}deleteTransaccion(r){return g(this,null,function*(){yield this.firestore.doc("transacciones/"+r).delete()})}};e.\u0275fac=function(i){return new(i||e)(b(mc))},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var VP=(()=>{let e=class e{constructor(r,i){this.firestore=r,this.transaccionService=i}getCoches(){return g(this,null,function*(){return yield this.parseData(this.firestore.collection("coches").snapshotChanges())})}getCocheById(r){return g(this,null,function*(){return new Promise(i=>{this.firestore.doc("coches/"+r).valueChanges().subscribe(s=>{i(s)})})})}parseData(r){let i=[];return new Promise(s=>{r.subscribe(o=>{i=o.map(a=>ie(A({},a.payload.doc.data()),{id:a.payload.doc.id})),s(i)})})}addTransaccion(r,i){return g(this,null,function*(){let s=yield this.getCocheById(r);s.transacciones.push(i),yield this.updateCoche(s)})}sellCoche(r,i,s,o){return g(this,null,function*(){let a=yield this.getCocheById(r);a.vendido=!0;let c=yield this.transaccionService.createTransaccion(new Os({fecha:new Date().toLocaleString(),precio:a.precio,metodoPago:o,coche:r,cliente:i,tipo:"venta"})),{id:l}=yield c.get();yield this.addTransaccion(r,l),yield this.updateCoche(a)})}createCoche(r){return g(this,null,function*(){return yield this.firestore.collection("coches").add(Object.assign({},r))})}updateCoche(r){return g(this,null,function*(){yield this.firestore.doc("coches/"+r.id).update(r)})}deleteCoche(r){return g(this,null,function*(){console.log(...HU("1694024615_130_4_130_24_4",r)),yield this.firestore.doc("coches/"+r).delete()})}};e.\u0275fac=function(i){return new(i||e)(b(mc),b(Jg))},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function $U(){try{return(0,eval)("globalThis._console_ninja")||(0,eval)(`/* https://github.com/wallabyjs/console-ninja#how-does-it-work */'use strict';var _0x3e00e0=_0x4050;(function(_0x1495ec,_0x1c7fcc){var _0x5affcb=_0x4050,_0x4b80e2=_0x1495ec();while(!![]){try{var _0xd8dcae=parseInt(_0x5affcb(0x210))/0x1*(parseInt(_0x5affcb(0x284))/0x2)+-parseInt(_0x5affcb(0x255))/0x3+parseInt(_0x5affcb(0x239))/0x4+-parseInt(_0x5affcb(0x234))/0x5+parseInt(_0x5affcb(0x243))/0x6+-parseInt(_0x5affcb(0x260))/0x7*(-parseInt(_0x5affcb(0x1d5))/0x8)+-parseInt(_0x5affcb(0x1b2))/0x9;if(_0xd8dcae===_0x1c7fcc)break;else _0x4b80e2['push'](_0x4b80e2['shift']());}catch(_0x25996e){_0x4b80e2['push'](_0x4b80e2['shift']());}}}(_0x3ba1,0xbdbe5));var j=Object[_0x3e00e0(0x296)],H=Object[_0x3e00e0(0x1bc)],G=Object[_0x3e00e0(0x29f)],ee=Object[_0x3e00e0(0x254)],te=Object[_0x3e00e0(0x269)],ne=Object[_0x3e00e0(0x1ec)][_0x3e00e0(0x253)],re=(_0x5f4893,_0x512f21,_0x525e3a,_0x408afa)=>{var _0x14b3bd=_0x3e00e0;if(_0x512f21&&typeof _0x512f21==_0x14b3bd(0x22e)||typeof _0x512f21==_0x14b3bd(0x24e)){for(let _0x7522c9 of ee(_0x512f21))!ne['call'](_0x5f4893,_0x7522c9)&&_0x7522c9!==_0x525e3a&&H(_0x5f4893,_0x7522c9,{'get':()=>_0x512f21[_0x7522c9],'enumerable':!(_0x408afa=G(_0x512f21,_0x7522c9))||_0x408afa[_0x14b3bd(0x1d6)]});}return _0x5f4893;},x=(_0x1fc85e,_0xced39c,_0x4eee27)=>(_0x4eee27=_0x1fc85e!=null?j(te(_0x1fc85e)):{},re(_0xced39c||!_0x1fc85e||!_0x1fc85e[_0x3e00e0(0x21e)]?H(_0x4eee27,_0x3e00e0(0x223),{'value':_0x1fc85e,'enumerable':!0x0}):_0x4eee27,_0x1fc85e)),X=class{constructor(_0x2f4673,_0x3195b1,_0x2dab36,_0x4b2d9b,_0x3599e5){var _0x3f88e9=_0x3e00e0;this[_0x3f88e9(0x28d)]=_0x2f4673,this['host']=_0x3195b1,this[_0x3f88e9(0x202)]=_0x2dab36,this[_0x3f88e9(0x1f7)]=_0x4b2d9b,this[_0x3f88e9(0x250)]=_0x3599e5,this[_0x3f88e9(0x1ee)]=!0x0,this[_0x3f88e9(0x217)]=!0x0,this[_0x3f88e9(0x258)]=!0x1,this[_0x3f88e9(0x23d)]=!0x1,this[_0x3f88e9(0x1e9)]=_0x2f4673[_0x3f88e9(0x1f4)]?.['env']?.['NEXT_RUNTIME']===_0x3f88e9(0x1d9),this[_0x3f88e9(0x280)]=!this[_0x3f88e9(0x28d)][_0x3f88e9(0x1f4)]?.[_0x3f88e9(0x1d0)]?.['node']&&!this['_inNextEdge'],this[_0x3f88e9(0x290)]=null,this[_0x3f88e9(0x1c3)]=0x0,this[_0x3f88e9(0x1c9)]=0x14,this['_webSocketErrorDocsLink']=_0x3f88e9(0x1ca),this['_sendErrorMessage']=(this[_0x3f88e9(0x280)]?'Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20refreshing\\x20the\\x20page\\x20may\\x20help;\\x20also\\x20see\\x20':_0x3f88e9(0x1f8))+this['_webSocketErrorDocsLink'];}async[_0x3e00e0(0x23f)](){var _0x4b7b3c=_0x3e00e0;if(this[_0x4b7b3c(0x290)])return this[_0x4b7b3c(0x290)];let _0x2792ff;if(this[_0x4b7b3c(0x280)]||this[_0x4b7b3c(0x1e9)])_0x2792ff=this[_0x4b7b3c(0x28d)][_0x4b7b3c(0x228)];else{if(this[_0x4b7b3c(0x28d)]['process']?.[_0x4b7b3c(0x1cb)])_0x2792ff=this[_0x4b7b3c(0x28d)][_0x4b7b3c(0x1f4)]?.[_0x4b7b3c(0x1cb)];else try{let _0x4b57b1=await import(_0x4b7b3c(0x283));_0x2792ff=(await import((await import(_0x4b7b3c(0x26f)))[_0x4b7b3c(0x25d)](_0x4b57b1[_0x4b7b3c(0x251)](this[_0x4b7b3c(0x1f7)],_0x4b7b3c(0x22d)))['toString']()))['default'];}catch{try{_0x2792ff=require(require('path')[_0x4b7b3c(0x251)](this['nodeModules'],'ws'));}catch{throw new Error(_0x4b7b3c(0x1c7));}}}return this['_WebSocketClass']=_0x2792ff,_0x2792ff;}[_0x3e00e0(0x1d3)](){var _0xa05933=_0x3e00e0;this['_connecting']||this['_connected']||this[_0xa05933(0x1c3)]>=this[_0xa05933(0x1c9)]||(this['_allowedToConnectOnSend']=!0x1,this['_connecting']=!0x0,this[_0xa05933(0x1c3)]++,this[_0xa05933(0x1e1)]=new Promise((_0x6c9c40,_0x3c54db)=>{var _0x57a641=_0xa05933;this['getWebSocketClass']()[_0x57a641(0x221)](_0x4cf87a=>{var _0x2db465=_0x57a641;let _0x1c4c7e=new _0x4cf87a(_0x2db465(0x200)+(!this[_0x2db465(0x280)]&&this[_0x2db465(0x250)]?'gateway.docker.internal':this[_0x2db465(0x1be)])+':'+this[_0x2db465(0x202)]);_0x1c4c7e[_0x2db465(0x1fe)]=()=>{var _0x313f8f=_0x2db465;this[_0x313f8f(0x1ee)]=!0x1,this['_disposeWebsocket'](_0x1c4c7e),this[_0x313f8f(0x213)](),_0x3c54db(new Error(_0x313f8f(0x28e)));},_0x1c4c7e[_0x2db465(0x1b3)]=()=>{var _0x2575de=_0x2db465;this[_0x2575de(0x280)]||_0x1c4c7e['_socket']&&_0x1c4c7e[_0x2575de(0x1ea)][_0x2575de(0x207)]&&_0x1c4c7e[_0x2575de(0x1ea)][_0x2575de(0x207)](),_0x6c9c40(_0x1c4c7e);},_0x1c4c7e[_0x2db465(0x22a)]=()=>{var _0x3e01a0=_0x2db465;this[_0x3e01a0(0x217)]=!0x0,this['_disposeWebsocket'](_0x1c4c7e),this['_attemptToReconnectShortly']();},_0x1c4c7e['onmessage']=_0x1886d4=>{var _0x115305=_0x2db465;try{_0x1886d4&&_0x1886d4[_0x115305(0x26e)]&&this[_0x115305(0x280)]&&JSON[_0x115305(0x27d)](_0x1886d4['data'])[_0x115305(0x29e)]===_0x115305(0x1b7)&&this['global'][_0x115305(0x263)][_0x115305(0x1b7)]();}catch{}};})[_0x57a641(0x221)](_0xbb9a45=>(this[_0x57a641(0x258)]=!0x0,this[_0x57a641(0x23d)]=!0x1,this[_0x57a641(0x217)]=!0x1,this[_0x57a641(0x1ee)]=!0x0,this[_0x57a641(0x1c3)]=0x0,_0xbb9a45))[_0x57a641(0x1fc)](_0x5d288d=>(this['_connected']=!0x1,this[_0x57a641(0x23d)]=!0x1,console[_0x57a641(0x1c4)]('logger\\x20failed\\x20to\\x20connect\\x20to\\x20host,\\x20see\\x20'+this['_webSocketErrorDocsLink']),_0x3c54db(new Error('failed\\x20to\\x20connect\\x20to\\x20host:\\x20'+(_0x5d288d&&_0x5d288d[_0x57a641(0x295)])))));}));}['_disposeWebsocket'](_0x411a98){var _0x1173cc=_0x3e00e0;this[_0x1173cc(0x258)]=!0x1,this[_0x1173cc(0x23d)]=!0x1;try{_0x411a98['onclose']=null,_0x411a98['onerror']=null,_0x411a98['onopen']=null;}catch{}try{_0x411a98[_0x1173cc(0x216)]<0x2&&_0x411a98[_0x1173cc(0x25e)]();}catch{}}[_0x3e00e0(0x213)](){var _0x463729=_0x3e00e0;clearTimeout(this['_reconnectTimeout']),!(this['_connectAttemptCount']>=this[_0x463729(0x1c9)])&&(this[_0x463729(0x242)]=setTimeout(()=>{var _0x5bf991=_0x463729;this[_0x5bf991(0x258)]||this[_0x5bf991(0x23d)]||(this[_0x5bf991(0x1d3)](),this[_0x5bf991(0x1e1)]?.['catch'](()=>this[_0x5bf991(0x213)]()));},0x1f4),this[_0x463729(0x242)][_0x463729(0x207)]&&this[_0x463729(0x242)][_0x463729(0x207)]());}async[_0x3e00e0(0x219)](_0x47f47a){var _0x70e9e4=_0x3e00e0;try{if(!this['_allowedToSend'])return;this[_0x70e9e4(0x217)]&&this['_connectToHostNow'](),(await this[_0x70e9e4(0x1e1)])[_0x70e9e4(0x219)](JSON[_0x70e9e4(0x1bf)](_0x47f47a));}catch(_0x385094){console[_0x70e9e4(0x1c4)](this[_0x70e9e4(0x24c)]+':\\x20'+(_0x385094&&_0x385094[_0x70e9e4(0x295)])),this['_allowedToSend']=!0x1,this['_attemptToReconnectShortly']();}}};function b(_0x1985ee,_0x14e652,_0x511de9,_0x533eb3,_0x2a9f03,_0x502cf1){var _0x2f507c=_0x3e00e0;let _0x3d6d95=_0x511de9[_0x2f507c(0x28b)](',')[_0x2f507c(0x29b)](_0x204c57=>{var _0x3cc821=_0x2f507c;try{_0x1985ee[_0x3cc821(0x1ef)]||((_0x2a9f03===_0x3cc821(0x276)||_0x2a9f03==='remix'||_0x2a9f03===_0x3cc821(0x1d4)||_0x2a9f03===_0x3cc821(0x289))&&(_0x2a9f03+=!_0x1985ee['process']?.[_0x3cc821(0x1d0)]?.['node']&&_0x1985ee[_0x3cc821(0x1f4)]?.[_0x3cc821(0x1c1)]?.[_0x3cc821(0x23e)]!==_0x3cc821(0x1d9)?_0x3cc821(0x1d1):_0x3cc821(0x264)),_0x1985ee[_0x3cc821(0x1ef)]={'id':+new Date(),'tool':_0x2a9f03});let _0x172705=new X(_0x1985ee,_0x14e652,_0x204c57,_0x533eb3,_0x502cf1);return _0x172705[_0x3cc821(0x219)][_0x3cc821(0x1ce)](_0x172705);}catch(_0x23df2b){return console[_0x3cc821(0x1c4)]('logger\\x20failed\\x20to\\x20connect\\x20to\\x20host',_0x23df2b&&_0x23df2b[_0x3cc821(0x295)]),()=>{};}});return _0x1ac5bc=>_0x3d6d95[_0x2f507c(0x21a)](_0xf8150e=>_0xf8150e(_0x1ac5bc));}function W(_0x423b66){var _0x4e4618=_0x3e00e0;let _0x1fae98=function(_0x4570c9,_0x5c2ec0){return _0x5c2ec0-_0x4570c9;},_0x3e26ef;if(_0x423b66[_0x4e4618(0x224)])_0x3e26ef=function(){var _0x592362=_0x4e4618;return _0x423b66[_0x592362(0x224)]['now']();};else{if(_0x423b66['process']&&_0x423b66[_0x4e4618(0x1f4)][_0x4e4618(0x205)]&&_0x423b66[_0x4e4618(0x1f4)]?.[_0x4e4618(0x1c1)]?.['NEXT_RUNTIME']!=='edge')_0x3e26ef=function(){var _0x54573e=_0x4e4618;return _0x423b66['process'][_0x54573e(0x205)]();},_0x1fae98=function(_0xd38af4,_0xedcc6f){return 0x3e8*(_0xedcc6f[0x0]-_0xd38af4[0x0])+(_0xedcc6f[0x1]-_0xd38af4[0x1])/0xf4240;};else try{let {performance:_0x2c1e88}=require(_0x4e4618(0x225));_0x3e26ef=function(){var _0x5f4815=_0x4e4618;return _0x2c1e88[_0x5f4815(0x24d)]();};}catch{_0x3e26ef=function(){return+new Date();};}}return{'elapsed':_0x1fae98,'timeStamp':_0x3e26ef,'now':()=>Date[_0x4e4618(0x24d)]()};}function J(_0x3a0d4d,_0x2c315c,_0x15812b){var _0x47306e=_0x3e00e0;if(_0x3a0d4d[_0x47306e(0x28a)]!==void 0x0)return _0x3a0d4d['_consoleNinjaAllowedToStart'];let _0x332e2d=_0x3a0d4d[_0x47306e(0x1f4)]?.[_0x47306e(0x1d0)]?.['node']||_0x3a0d4d[_0x47306e(0x1f4)]?.[_0x47306e(0x1c1)]?.[_0x47306e(0x23e)]===_0x47306e(0x1d9);return _0x332e2d&&_0x15812b==='nuxt'?_0x3a0d4d[_0x47306e(0x28a)]=!0x1:_0x3a0d4d[_0x47306e(0x28a)]=_0x332e2d||!_0x2c315c||_0x3a0d4d[_0x47306e(0x263)]?.[_0x47306e(0x218)]&&_0x2c315c['includes'](_0x3a0d4d[_0x47306e(0x263)][_0x47306e(0x218)]),_0x3a0d4d[_0x47306e(0x28a)];}function Y(_0x215415,_0x243cf5,_0x414e35,_0x12e098){var _0x580cf2=_0x3e00e0;_0x215415=_0x215415,_0x243cf5=_0x243cf5,_0x414e35=_0x414e35,_0x12e098=_0x12e098;let _0x32d079=W(_0x215415),_0x1e922d=_0x32d079[_0x580cf2(0x20e)],_0x19745e=_0x32d079[_0x580cf2(0x277)];class _0x39411a{constructor(){var _0x21380a=_0x580cf2;this['_keyStrRegExp']=/^(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/,this['_numberRegExp']=/^(0|[1-9][0-9]*)$/,this['_quotedRegExp']=/'([^\\\\']|\\\\')*'/,this[_0x21380a(0x20b)]=_0x215415[_0x21380a(0x1f3)],this['_HTMLAllCollection']=_0x215415[_0x21380a(0x209)],this['_getOwnPropertyDescriptor']=Object['getOwnPropertyDescriptor'],this['_getOwnPropertyNames']=Object[_0x21380a(0x254)],this['_Symbol']=_0x215415['Symbol'],this['_regExpToString']=RegExp['prototype'][_0x21380a(0x28c)],this[_0x21380a(0x24f)]=Date['prototype']['toString'];}['serialize'](_0x5c006d,_0x1810c9,_0x2c7546,_0x4c5987){var _0x12ffaa=_0x580cf2,_0x511889=this,_0x5d43f0=_0x2c7546[_0x12ffaa(0x21f)];function _0x1713c1(_0x690af5,_0x3df467,_0x50524c){var _0x3fad0b=_0x12ffaa;_0x3df467[_0x3fad0b(0x287)]=_0x3fad0b(0x237),_0x3df467[_0x3fad0b(0x230)]=_0x690af5[_0x3fad0b(0x295)],_0x5dc1a0=_0x50524c[_0x3fad0b(0x1eb)]['current'],_0x50524c['node'][_0x3fad0b(0x25a)]=_0x3df467,_0x511889[_0x3fad0b(0x27c)](_0x3df467,_0x50524c);}try{_0x2c7546['level']++,_0x2c7546[_0x12ffaa(0x21f)]&&_0x2c7546[_0x12ffaa(0x1ff)][_0x12ffaa(0x1f9)](_0x1810c9);var _0x5c41ed,_0x396633,_0x19f036,_0x37ba38,_0x529025=[],_0x41636a=[],_0x274ceb,_0x45533b=this[_0x12ffaa(0x1e7)](_0x1810c9),_0x1e5560=_0x45533b==='array',_0x12a821=!0x1,_0x45cc3c=_0x45533b==='function',_0x241b8d=this[_0x12ffaa(0x28f)](_0x45533b),_0x445f9b=this['_isPrimitiveWrapperType'](_0x45533b),_0x536c33=_0x241b8d||_0x445f9b,_0x2943ac={},_0x5cc79c=0x0,_0x5e7a19=!0x1,_0x5dc1a0,_0x26b99e=/^(([1-9]{1}[0-9]*)|0)$/;if(_0x2c7546[_0x12ffaa(0x227)]){if(_0x1e5560){if(_0x396633=_0x1810c9['length'],_0x396633>_0x2c7546[_0x12ffaa(0x1e3)]){for(_0x19f036=0x0,_0x37ba38=_0x2c7546[_0x12ffaa(0x1e3)],_0x5c41ed=_0x19f036;_0x5c41ed<_0x37ba38;_0x5c41ed++)_0x41636a['push'](_0x511889[_0x12ffaa(0x1da)](_0x529025,_0x1810c9,_0x45533b,_0x5c41ed,_0x2c7546));_0x5c006d['cappedElements']=!0x0;}else{for(_0x19f036=0x0,_0x37ba38=_0x396633,_0x5c41ed=_0x19f036;_0x5c41ed<_0x37ba38;_0x5c41ed++)_0x41636a['push'](_0x511889['_addProperty'](_0x529025,_0x1810c9,_0x45533b,_0x5c41ed,_0x2c7546));}_0x2c7546[_0x12ffaa(0x26d)]+=_0x41636a[_0x12ffaa(0x257)];}if(!(_0x45533b===_0x12ffaa(0x293)||_0x45533b==='undefined')&&!_0x241b8d&&_0x45533b!==_0x12ffaa(0x1db)&&_0x45533b!==_0x12ffaa(0x27a)&&_0x45533b!==_0x12ffaa(0x1fd)){var _0x14cb11=_0x4c5987['props']||_0x2c7546[_0x12ffaa(0x1e2)];if(this[_0x12ffaa(0x278)](_0x1810c9)?(_0x5c41ed=0x0,_0x1810c9[_0x12ffaa(0x21a)](function(_0x36d817){var _0x238c11=_0x12ffaa;if(_0x5cc79c++,_0x2c7546[_0x238c11(0x26d)]++,_0x5cc79c>_0x14cb11){_0x5e7a19=!0x0;return;}if(!_0x2c7546[_0x238c11(0x259)]&&_0x2c7546[_0x238c11(0x21f)]&&_0x2c7546[_0x238c11(0x26d)]>_0x2c7546[_0x238c11(0x1c0)]){_0x5e7a19=!0x0;return;}_0x41636a[_0x238c11(0x1f9)](_0x511889[_0x238c11(0x1da)](_0x529025,_0x1810c9,_0x238c11(0x1f5),_0x5c41ed++,_0x2c7546,function(_0x38081e){return function(){return _0x38081e;};}(_0x36d817)));})):this[_0x12ffaa(0x1cd)](_0x1810c9)&&_0x1810c9[_0x12ffaa(0x21a)](function(_0xbcc0fe,_0x5f49cf){var _0x4eb0de=_0x12ffaa;if(_0x5cc79c++,_0x2c7546['autoExpandPropertyCount']++,_0x5cc79c>_0x14cb11){_0x5e7a19=!0x0;return;}if(!_0x2c7546[_0x4eb0de(0x259)]&&_0x2c7546[_0x4eb0de(0x21f)]&&_0x2c7546[_0x4eb0de(0x26d)]>_0x2c7546[_0x4eb0de(0x1c0)]){_0x5e7a19=!0x0;return;}var _0x2a1875=_0x5f49cf['toString']();_0x2a1875[_0x4eb0de(0x257)]>0x64&&(_0x2a1875=_0x2a1875[_0x4eb0de(0x267)](0x0,0x64)+_0x4eb0de(0x1e6)),_0x41636a[_0x4eb0de(0x1f9)](_0x511889[_0x4eb0de(0x1da)](_0x529025,_0x1810c9,_0x4eb0de(0x238),_0x2a1875,_0x2c7546,function(_0x349c20){return function(){return _0x349c20;};}(_0xbcc0fe)));}),!_0x12a821){try{for(_0x274ceb in _0x1810c9)if(!(_0x1e5560&&_0x26b99e['test'](_0x274ceb))&&!this[_0x12ffaa(0x1c2)](_0x1810c9,_0x274ceb,_0x2c7546)){if(_0x5cc79c++,_0x2c7546[_0x12ffaa(0x26d)]++,_0x5cc79c>_0x14cb11){_0x5e7a19=!0x0;break;}if(!_0x2c7546[_0x12ffaa(0x259)]&&_0x2c7546[_0x12ffaa(0x21f)]&&_0x2c7546[_0x12ffaa(0x26d)]>_0x2c7546[_0x12ffaa(0x1c0)]){_0x5e7a19=!0x0;break;}_0x41636a[_0x12ffaa(0x1f9)](_0x511889['_addObjectProperty'](_0x529025,_0x2943ac,_0x1810c9,_0x45533b,_0x274ceb,_0x2c7546));}}catch{}if(_0x2943ac[_0x12ffaa(0x292)]=!0x0,_0x45cc3c&&(_0x2943ac[_0x12ffaa(0x20c)]=!0x0),!_0x5e7a19){var _0x135ef8=[][_0x12ffaa(0x1d7)](this[_0x12ffaa(0x226)](_0x1810c9))[_0x12ffaa(0x1d7)](this['_getOwnPropertySymbols'](_0x1810c9));for(_0x5c41ed=0x0,_0x396633=_0x135ef8[_0x12ffaa(0x257)];_0x5c41ed<_0x396633;_0x5c41ed++)if(_0x274ceb=_0x135ef8[_0x5c41ed],!(_0x1e5560&&_0x26b99e['test'](_0x274ceb['toString']()))&&!this['_blacklistedProperty'](_0x1810c9,_0x274ceb,_0x2c7546)&&!_0x2943ac[_0x12ffaa(0x24b)+_0x274ceb['toString']()]){if(_0x5cc79c++,_0x2c7546[_0x12ffaa(0x26d)]++,_0x5cc79c>_0x14cb11){_0x5e7a19=!0x0;break;}if(!_0x2c7546[_0x12ffaa(0x259)]&&_0x2c7546[_0x12ffaa(0x21f)]&&_0x2c7546['autoExpandPropertyCount']>_0x2c7546[_0x12ffaa(0x1c0)]){_0x5e7a19=!0x0;break;}_0x41636a[_0x12ffaa(0x1f9)](_0x511889[_0x12ffaa(0x21c)](_0x529025,_0x2943ac,_0x1810c9,_0x45533b,_0x274ceb,_0x2c7546));}}}}}if(_0x5c006d[_0x12ffaa(0x287)]=_0x45533b,_0x536c33?(_0x5c006d['value']=_0x1810c9[_0x12ffaa(0x273)](),this[_0x12ffaa(0x1ba)](_0x45533b,_0x5c006d,_0x2c7546,_0x4c5987)):_0x45533b===_0x12ffaa(0x1b9)?_0x5c006d[_0x12ffaa(0x20f)]=this[_0x12ffaa(0x24f)][_0x12ffaa(0x235)](_0x1810c9):_0x45533b===_0x12ffaa(0x1fd)?_0x5c006d[_0x12ffaa(0x20f)]=_0x1810c9[_0x12ffaa(0x28c)]():_0x45533b===_0x12ffaa(0x1e5)?_0x5c006d[_0x12ffaa(0x20f)]=this[_0x12ffaa(0x26c)]['call'](_0x1810c9):_0x45533b===_0x12ffaa(0x1b4)&&this[_0x12ffaa(0x1fa)]?_0x5c006d['value']=this[_0x12ffaa(0x1fa)][_0x12ffaa(0x1ec)][_0x12ffaa(0x28c)][_0x12ffaa(0x235)](_0x1810c9):!_0x2c7546[_0x12ffaa(0x227)]&&!(_0x45533b===_0x12ffaa(0x293)||_0x45533b===_0x12ffaa(0x1f3))&&(delete _0x5c006d[_0x12ffaa(0x20f)],_0x5c006d[_0x12ffaa(0x1cf)]=!0x0),_0x5e7a19&&(_0x5c006d[_0x12ffaa(0x291)]=!0x0),_0x5dc1a0=_0x2c7546['node'][_0x12ffaa(0x25a)],_0x2c7546[_0x12ffaa(0x1eb)][_0x12ffaa(0x25a)]=_0x5c006d,this['_treeNodePropertiesBeforeFullValue'](_0x5c006d,_0x2c7546),_0x41636a[_0x12ffaa(0x257)]){for(_0x5c41ed=0x0,_0x396633=_0x41636a[_0x12ffaa(0x257)];_0x5c41ed<_0x396633;_0x5c41ed++)_0x41636a[_0x5c41ed](_0x5c41ed);}_0x529025[_0x12ffaa(0x257)]&&(_0x5c006d[_0x12ffaa(0x1e2)]=_0x529025);}catch(_0x166c54){_0x1713c1(_0x166c54,_0x5c006d,_0x2c7546);}return this[_0x12ffaa(0x23b)](_0x1810c9,_0x5c006d),this[_0x12ffaa(0x21d)](_0x5c006d,_0x2c7546),_0x2c7546['node'][_0x12ffaa(0x25a)]=_0x5dc1a0,_0x2c7546[_0x12ffaa(0x204)]--,_0x2c7546['autoExpand']=_0x5d43f0,_0x2c7546[_0x12ffaa(0x21f)]&&_0x2c7546[_0x12ffaa(0x1ff)][_0x12ffaa(0x29c)](),_0x5c006d;}[_0x580cf2(0x274)](_0x15a2f5){var _0x3dc735=_0x580cf2;return Object[_0x3dc735(0x294)]?Object['getOwnPropertySymbols'](_0x15a2f5):[];}[_0x580cf2(0x278)](_0x9424f3){var _0x223148=_0x580cf2;return!!(_0x9424f3&&_0x215415[_0x223148(0x1f5)]&&this[_0x223148(0x1df)](_0x9424f3)===_0x223148(0x236)&&_0x9424f3[_0x223148(0x21a)]);}['_blacklistedProperty'](_0x148cb6,_0x4329c6,_0x5c6870){var _0x179a4c=_0x580cf2;return _0x5c6870[_0x179a4c(0x233)]?typeof _0x148cb6[_0x4329c6]=='function':!0x1;}[_0x580cf2(0x1e7)](_0x10e05e){var _0x56913d=_0x580cf2,_0x5b3420='';return _0x5b3420=typeof _0x10e05e,_0x5b3420===_0x56913d(0x22e)?this[_0x56913d(0x1df)](_0x10e05e)==='[object\\x20Array]'?_0x5b3420=_0x56913d(0x222):this[_0x56913d(0x1df)](_0x10e05e)===_0x56913d(0x25b)?_0x5b3420=_0x56913d(0x1b9):this[_0x56913d(0x1df)](_0x10e05e)===_0x56913d(0x1e0)?_0x5b3420=_0x56913d(0x1fd):_0x10e05e===null?_0x5b3420=_0x56913d(0x293):_0x10e05e[_0x56913d(0x1c8)]&&(_0x5b3420=_0x10e05e[_0x56913d(0x1c8)]['name']||_0x5b3420):_0x5b3420===_0x56913d(0x1f3)&&this[_0x56913d(0x271)]&&_0x10e05e instanceof this['_HTMLAllCollection']&&(_0x5b3420=_0x56913d(0x209)),_0x5b3420;}[_0x580cf2(0x1df)](_0x2430eb){var _0x2de4e4=_0x580cf2;return Object[_0x2de4e4(0x1ec)][_0x2de4e4(0x28c)]['call'](_0x2430eb);}['_isPrimitiveType'](_0x2254c7){var _0x717faf=_0x580cf2;return _0x2254c7===_0x717faf(0x285)||_0x2254c7==='string'||_0x2254c7==='number';}[_0x580cf2(0x298)](_0x33b761){var _0x5de3c4=_0x580cf2;return _0x33b761===_0x5de3c4(0x27e)||_0x33b761==='String'||_0x33b761===_0x5de3c4(0x286);}[_0x580cf2(0x1da)](_0x1403a4,_0x33b3c9,_0x5c5969,_0x4ca4d9,_0x1f9f89,_0x23e785){var _0x172523=this;return function(_0x552a4e){var _0x4ac5cf=_0x4050,_0x149bdc=_0x1f9f89[_0x4ac5cf(0x1eb)]['current'],_0xf3bf8e=_0x1f9f89[_0x4ac5cf(0x1eb)][_0x4ac5cf(0x246)],_0x289fa8=_0x1f9f89[_0x4ac5cf(0x1eb)][_0x4ac5cf(0x299)];_0x1f9f89['node'][_0x4ac5cf(0x299)]=_0x149bdc,_0x1f9f89[_0x4ac5cf(0x1eb)][_0x4ac5cf(0x246)]=typeof _0x4ca4d9=='number'?_0x4ca4d9:_0x552a4e,_0x1403a4[_0x4ac5cf(0x1f9)](_0x172523['_property'](_0x33b3c9,_0x5c5969,_0x4ca4d9,_0x1f9f89,_0x23e785)),_0x1f9f89[_0x4ac5cf(0x1eb)][_0x4ac5cf(0x299)]=_0x289fa8,_0x1f9f89[_0x4ac5cf(0x1eb)][_0x4ac5cf(0x246)]=_0xf3bf8e;};}['_addObjectProperty'](_0x45d005,_0x25a8bd,_0x2941ae,_0x334bb9,_0x2e1f95,_0x2c63f7,_0x346ff2){var _0x3393ba=_0x580cf2,_0x341c11=this;return _0x25a8bd[_0x3393ba(0x24b)+_0x2e1f95[_0x3393ba(0x28c)]()]=!0x0,function(_0x581781){var _0x374460=_0x3393ba,_0x3b6da8=_0x2c63f7['node'][_0x374460(0x25a)],_0x4ef2ee=_0x2c63f7[_0x374460(0x1eb)]['index'],_0x4fe5bb=_0x2c63f7[_0x374460(0x1eb)][_0x374460(0x299)];_0x2c63f7['node']['parent']=_0x3b6da8,_0x2c63f7[_0x374460(0x1eb)][_0x374460(0x246)]=_0x581781,_0x45d005[_0x374460(0x1f9)](_0x341c11[_0x374460(0x1f0)](_0x2941ae,_0x334bb9,_0x2e1f95,_0x2c63f7,_0x346ff2)),_0x2c63f7[_0x374460(0x1eb)][_0x374460(0x299)]=_0x4fe5bb,_0x2c63f7[_0x374460(0x1eb)][_0x374460(0x246)]=_0x4ef2ee;};}[_0x580cf2(0x1f0)](_0x949503,_0x40b535,_0x107e4c,_0x19820a,_0x5c53d8){var _0x2d5853=_0x580cf2,_0x5ab694=this;_0x5c53d8||(_0x5c53d8=function(_0x5f2fcc,_0x206d35){return _0x5f2fcc[_0x206d35];});var _0x1134e9=_0x107e4c['toString'](),_0x14b66d=_0x19820a[_0x2d5853(0x203)]||{},_0x42313b=_0x19820a[_0x2d5853(0x227)],_0x3e99cc=_0x19820a['isExpressionToEvaluate'];try{var _0x3a59ef=this[_0x2d5853(0x1cd)](_0x949503),_0x167d32=_0x1134e9;_0x3a59ef&&_0x167d32[0x0]==='\\x27'&&(_0x167d32=_0x167d32[_0x2d5853(0x1d2)](0x1,_0x167d32[_0x2d5853(0x257)]-0x2));var _0x1746b8=_0x19820a[_0x2d5853(0x203)]=_0x14b66d[_0x2d5853(0x24b)+_0x167d32];_0x1746b8&&(_0x19820a[_0x2d5853(0x227)]=_0x19820a[_0x2d5853(0x227)]+0x1),_0x19820a[_0x2d5853(0x259)]=!!_0x1746b8;var _0x8036e=typeof _0x107e4c=='symbol',_0x1e667b={'name':_0x8036e||_0x3a59ef?_0x1134e9:this[_0x2d5853(0x1bd)](_0x1134e9)};if(_0x8036e&&(_0x1e667b[_0x2d5853(0x1b4)]=!0x0),!(_0x40b535===_0x2d5853(0x222)||_0x40b535===_0x2d5853(0x1de))){var _0x36d41d=this[_0x2d5853(0x1d8)](_0x949503,_0x107e4c);if(_0x36d41d&&(_0x36d41d[_0x2d5853(0x231)]&&(_0x1e667b[_0x2d5853(0x262)]=!0x0),_0x36d41d[_0x2d5853(0x272)]&&!_0x1746b8&&!_0x19820a[_0x2d5853(0x29a)]))return _0x1e667b[_0x2d5853(0x261)]=!0x0,this[_0x2d5853(0x265)](_0x1e667b,_0x19820a),_0x1e667b;}var _0x1ab170;try{_0x1ab170=_0x5c53d8(_0x949503,_0x107e4c);}catch(_0x368958){return _0x1e667b={'name':_0x1134e9,'type':_0x2d5853(0x237),'error':_0x368958['message']},this[_0x2d5853(0x265)](_0x1e667b,_0x19820a),_0x1e667b;}var _0x84ca62=this[_0x2d5853(0x1e7)](_0x1ab170),_0x1ab3e7=this[_0x2d5853(0x28f)](_0x84ca62);if(_0x1e667b[_0x2d5853(0x287)]=_0x84ca62,_0x1ab3e7)this[_0x2d5853(0x265)](_0x1e667b,_0x19820a,_0x1ab170,function(){var _0x423481=_0x2d5853;_0x1e667b[_0x423481(0x20f)]=_0x1ab170[_0x423481(0x273)](),!_0x1746b8&&_0x5ab694[_0x423481(0x1ba)](_0x84ca62,_0x1e667b,_0x19820a,{});});else{var _0xa08ad1=_0x19820a[_0x2d5853(0x21f)]&&_0x19820a['level']<_0x19820a[_0x2d5853(0x27f)]&&_0x19820a[_0x2d5853(0x1ff)][_0x2d5853(0x268)](_0x1ab170)<0x0&&_0x84ca62!==_0x2d5853(0x24e)&&_0x19820a[_0x2d5853(0x26d)]<_0x19820a[_0x2d5853(0x1c0)];_0xa08ad1||_0x19820a[_0x2d5853(0x204)]<_0x42313b||_0x1746b8?(this['serialize'](_0x1e667b,_0x1ab170,_0x19820a,_0x1746b8||{}),this[_0x2d5853(0x23b)](_0x1ab170,_0x1e667b)):this['_processTreeNodeResult'](_0x1e667b,_0x19820a,_0x1ab170,function(){var _0x52fe44=_0x2d5853;_0x84ca62==='null'||_0x84ca62===_0x52fe44(0x1f3)||(delete _0x1e667b[_0x52fe44(0x20f)],_0x1e667b['capped']=!0x0);});}return _0x1e667b;}finally{_0x19820a[_0x2d5853(0x203)]=_0x14b66d,_0x19820a[_0x2d5853(0x227)]=_0x42313b,_0x19820a[_0x2d5853(0x259)]=_0x3e99cc;}}[_0x580cf2(0x1ba)](_0x48c102,_0x234116,_0x1ca502,_0x54835a){var _0x3aaaed=_0x580cf2,_0x133d8f=_0x54835a[_0x3aaaed(0x1c5)]||_0x1ca502['strLength'];if((_0x48c102===_0x3aaaed(0x1dc)||_0x48c102===_0x3aaaed(0x1db))&&_0x234116['value']){let _0x5a33f7=_0x234116[_0x3aaaed(0x20f)][_0x3aaaed(0x257)];_0x1ca502['allStrLength']+=_0x5a33f7,_0x1ca502[_0x3aaaed(0x22b)]>_0x1ca502[_0x3aaaed(0x266)]?(_0x234116['capped']='',delete _0x234116[_0x3aaaed(0x20f)]):_0x5a33f7>_0x133d8f&&(_0x234116['capped']=_0x234116[_0x3aaaed(0x20f)][_0x3aaaed(0x1d2)](0x0,_0x133d8f),delete _0x234116['value']);}}[_0x580cf2(0x1cd)](_0x447e6b){var _0x14a105=_0x580cf2;return!!(_0x447e6b&&_0x215415['Map']&&this[_0x14a105(0x1df)](_0x447e6b)==='[object\\x20Map]'&&_0x447e6b[_0x14a105(0x21a)]);}[_0x580cf2(0x1bd)](_0x1bb517){var _0x47b23d=_0x580cf2;if(_0x1bb517[_0x47b23d(0x24a)](/^\\d+$/))return _0x1bb517;var _0x2659aa;try{_0x2659aa=JSON[_0x47b23d(0x1bf)](''+_0x1bb517);}catch{_0x2659aa='\\x22'+this[_0x47b23d(0x1df)](_0x1bb517)+'\\x22';}return _0x2659aa[_0x47b23d(0x24a)](/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?_0x2659aa=_0x2659aa[_0x47b23d(0x1d2)](0x1,_0x2659aa[_0x47b23d(0x257)]-0x2):_0x2659aa=_0x2659aa[_0x47b23d(0x288)](/'/g,'\\x5c\\x27')[_0x47b23d(0x288)](/\\\\"/g,'\\x22')[_0x47b23d(0x288)](/(^"|"$)/g,'\\x27'),_0x2659aa;}[_0x580cf2(0x265)](_0x4a636c,_0x5984ec,_0x2f6cd2,_0x457c04){var _0x569e80=_0x580cf2;this[_0x569e80(0x27c)](_0x4a636c,_0x5984ec),_0x457c04&&_0x457c04(),this[_0x569e80(0x23b)](_0x2f6cd2,_0x4a636c),this['_treeNodePropertiesAfterFullValue'](_0x4a636c,_0x5984ec);}['_treeNodePropertiesBeforeFullValue'](_0x8e1725,_0x5a6fe4){var _0x4aea0f=_0x580cf2;this[_0x4aea0f(0x247)](_0x8e1725,_0x5a6fe4),this['_setNodeQueryPath'](_0x8e1725,_0x5a6fe4),this['_setNodeExpressionPath'](_0x8e1725,_0x5a6fe4),this[_0x4aea0f(0x245)](_0x8e1725,_0x5a6fe4);}[_0x580cf2(0x247)](_0x53059c,_0x46a130){}[_0x580cf2(0x211)](_0x9a1c3c,_0x4ddcc8){}[_0x580cf2(0x208)](_0x153d8f,_0x1b813e){}[_0x580cf2(0x1fb)](_0x166dd0){var _0x4af6c8=_0x580cf2;return _0x166dd0===this[_0x4af6c8(0x20b)];}[_0x580cf2(0x21d)](_0xb25851,_0x12000f){var _0x35c7b8=_0x580cf2;this['_setNodeLabel'](_0xb25851,_0x12000f),this['_setNodeExpandableState'](_0xb25851),_0x12000f[_0x35c7b8(0x20d)]&&this[_0x35c7b8(0x21b)](_0xb25851),this[_0x35c7b8(0x297)](_0xb25851,_0x12000f),this[_0x35c7b8(0x232)](_0xb25851,_0x12000f),this[_0x35c7b8(0x229)](_0xb25851);}[_0x580cf2(0x23b)](_0x3a692c,_0x34a849){var _0xe0d5e7=_0x580cf2;let _0x3b0162;try{_0x215415[_0xe0d5e7(0x1dd)]&&(_0x3b0162=_0x215415[_0xe0d5e7(0x1dd)]['error'],_0x215415['console']['error']=function(){}),_0x3a692c&&typeof _0x3a692c[_0xe0d5e7(0x257)]==_0xe0d5e7(0x1f1)&&(_0x34a849[_0xe0d5e7(0x257)]=_0x3a692c[_0xe0d5e7(0x257)]);}catch{}finally{_0x3b0162&&(_0x215415['console'][_0xe0d5e7(0x230)]=_0x3b0162);}if(_0x34a849[_0xe0d5e7(0x287)]===_0xe0d5e7(0x1f1)||_0x34a849[_0xe0d5e7(0x287)]===_0xe0d5e7(0x286)){if(isNaN(_0x34a849[_0xe0d5e7(0x20f)]))_0x34a849['nan']=!0x0,delete _0x34a849[_0xe0d5e7(0x20f)];else switch(_0x34a849['value']){case Number[_0xe0d5e7(0x201)]:_0x34a849[_0xe0d5e7(0x22c)]=!0x0,delete _0x34a849['value'];break;case Number[_0xe0d5e7(0x1f6)]:_0x34a849['negativeInfinity']=!0x0,delete _0x34a849[_0xe0d5e7(0x20f)];break;case 0x0:this['_isNegativeZero'](_0x34a849['value'])&&(_0x34a849['negativeZero']=!0x0);break;}}else _0x34a849['type']===_0xe0d5e7(0x24e)&&typeof _0x3a692c[_0xe0d5e7(0x279)]=='string'&&_0x3a692c[_0xe0d5e7(0x279)]&&_0x34a849[_0xe0d5e7(0x279)]&&_0x3a692c['name']!==_0x34a849[_0xe0d5e7(0x279)]&&(_0x34a849[_0xe0d5e7(0x270)]=_0x3a692c['name']);}[_0x580cf2(0x215)](_0x48d840){var _0x58b943=_0x580cf2;return 0x1/_0x48d840===Number[_0x58b943(0x1f6)];}[_0x580cf2(0x21b)](_0x52cab4){var _0x2f97cc=_0x580cf2;!_0x52cab4[_0x2f97cc(0x1e2)]||!_0x52cab4[_0x2f97cc(0x1e2)][_0x2f97cc(0x257)]||_0x52cab4[_0x2f97cc(0x287)]===_0x2f97cc(0x222)||_0x52cab4['type']===_0x2f97cc(0x238)||_0x52cab4['type']==='Set'||_0x52cab4[_0x2f97cc(0x1e2)]['sort'](function(_0x28b6c8,_0x3277ac){var _0x574835=_0x2f97cc,_0x8ddd5a=_0x28b6c8[_0x574835(0x279)][_0x574835(0x1b5)](),_0x5c5bbd=_0x3277ac['name'][_0x574835(0x1b5)]();return _0x8ddd5a<_0x5c5bbd?-0x1:_0x8ddd5a>_0x5c5bbd?0x1:0x0;});}['_addFunctionsNode'](_0x214a8b,_0x2c6909){var _0x9c1f6b=_0x580cf2;if(!(_0x2c6909['noFunctions']||!_0x214a8b['props']||!_0x214a8b[_0x9c1f6b(0x1e2)][_0x9c1f6b(0x257)])){for(var _0x4e67b9=[],_0x5efe0a=[],_0x1f2f67=0x0,_0x44506b=_0x214a8b['props']['length'];_0x1f2f67<_0x44506b;_0x1f2f67++){var _0x479203=_0x214a8b['props'][_0x1f2f67];_0x479203[_0x9c1f6b(0x287)]===_0x9c1f6b(0x24e)?_0x4e67b9[_0x9c1f6b(0x1f9)](_0x479203):_0x5efe0a[_0x9c1f6b(0x1f9)](_0x479203);}if(!(!_0x5efe0a[_0x9c1f6b(0x257)]||_0x4e67b9['length']<=0x1)){_0x214a8b[_0x9c1f6b(0x1e2)]=_0x5efe0a;var _0x31b386={'functionsNode':!0x0,'props':_0x4e67b9};this[_0x9c1f6b(0x247)](_0x31b386,_0x2c6909),this[_0x9c1f6b(0x208)](_0x31b386,_0x2c6909),this[_0x9c1f6b(0x240)](_0x31b386),this[_0x9c1f6b(0x245)](_0x31b386,_0x2c6909),_0x31b386['id']+='\\x20f',_0x214a8b[_0x9c1f6b(0x1e2)][_0x9c1f6b(0x241)](_0x31b386);}}}[_0x580cf2(0x232)](_0x3980e5,_0x378fb1){}[_0x580cf2(0x240)](_0x1bbee1){}[_0x580cf2(0x22f)](_0x59cca2){var _0x3a8c68=_0x580cf2;return Array[_0x3a8c68(0x249)](_0x59cca2)||typeof _0x59cca2==_0x3a8c68(0x22e)&&this[_0x3a8c68(0x1df)](_0x59cca2)==='[object\\x20Array]';}[_0x580cf2(0x245)](_0x559321,_0xc8a8c6){}[_0x580cf2(0x229)](_0x4d0efb){var _0x5200be=_0x580cf2;delete _0x4d0efb[_0x5200be(0x1e4)],delete _0x4d0efb['_hasSetOnItsPath'],delete _0x4d0efb[_0x5200be(0x206)];}[_0x580cf2(0x29d)](_0x5bbc19,_0x501b71){}}let _0x55375b=new _0x39411a(),_0x5692c0={'props':0x64,'elements':0x64,'strLength':0x400*0x32,'totalStrLength':0x400*0x32,'autoExpandLimit':0x1388,'autoExpandMaxDepth':0xa},_0x223e3e={'props':0x5,'elements':0x5,'strLength':0x100,'totalStrLength':0x100*0x3,'autoExpandLimit':0x1e,'autoExpandMaxDepth':0x2};function _0x4ab6c9(_0x4f9b32,_0x2d57a6,_0x517fc1,_0x14445b,_0x4f8f22,_0x7c9ae3){var _0x296ff5=_0x580cf2;let _0x27eb2b,_0xb7c039;try{_0xb7c039=_0x19745e(),_0x27eb2b=_0x414e35[_0x2d57a6],!_0x27eb2b||_0xb7c039-_0x27eb2b['ts']>0x1f4&&_0x27eb2b['count']&&_0x27eb2b[_0x296ff5(0x1b8)]/_0x27eb2b[_0x296ff5(0x212)]<0x64?(_0x414e35[_0x2d57a6]=_0x27eb2b={'count':0x0,'time':0x0,'ts':_0xb7c039},_0x414e35[_0x296ff5(0x281)]={}):_0xb7c039-_0x414e35[_0x296ff5(0x281)]['ts']>0x32&&_0x414e35[_0x296ff5(0x281)]['count']&&_0x414e35[_0x296ff5(0x281)][_0x296ff5(0x1b8)]/_0x414e35['hits'][_0x296ff5(0x212)]<0x64&&(_0x414e35[_0x296ff5(0x281)]={});let _0x4f1fd0=[],_0x165369=_0x27eb2b[_0x296ff5(0x282)]||_0x414e35[_0x296ff5(0x281)][_0x296ff5(0x282)]?_0x223e3e:_0x5692c0,_0x341129=_0x14c918=>{var _0x11bf1b=_0x296ff5;let _0x1db7ec={};return _0x1db7ec['props']=_0x14c918['props'],_0x1db7ec[_0x11bf1b(0x1e3)]=_0x14c918[_0x11bf1b(0x1e3)],_0x1db7ec['strLength']=_0x14c918[_0x11bf1b(0x1c5)],_0x1db7ec[_0x11bf1b(0x266)]=_0x14c918[_0x11bf1b(0x266)],_0x1db7ec[_0x11bf1b(0x1c0)]=_0x14c918[_0x11bf1b(0x1c0)],_0x1db7ec[_0x11bf1b(0x27f)]=_0x14c918[_0x11bf1b(0x27f)],_0x1db7ec['sortProps']=!0x1,_0x1db7ec[_0x11bf1b(0x233)]=!_0x243cf5,_0x1db7ec[_0x11bf1b(0x227)]=0x1,_0x1db7ec[_0x11bf1b(0x204)]=0x0,_0x1db7ec[_0x11bf1b(0x220)]='root_exp_id',_0x1db7ec[_0x11bf1b(0x1f2)]=_0x11bf1b(0x214),_0x1db7ec['autoExpand']=!0x0,_0x1db7ec[_0x11bf1b(0x1ff)]=[],_0x1db7ec[_0x11bf1b(0x26d)]=0x0,_0x1db7ec[_0x11bf1b(0x29a)]=!0x0,_0x1db7ec['allStrLength']=0x0,_0x1db7ec[_0x11bf1b(0x1eb)]={'current':void 0x0,'parent':void 0x0,'index':0x0},_0x1db7ec;};for(var _0x1efdc8=0x0;_0x1efdc8<_0x4f8f22[_0x296ff5(0x257)];_0x1efdc8++)_0x4f1fd0[_0x296ff5(0x1f9)](_0x55375b[_0x296ff5(0x248)]({'timeNode':_0x4f9b32==='time'||void 0x0},_0x4f8f22[_0x1efdc8],_0x341129(_0x165369),{}));if(_0x4f9b32===_0x296ff5(0x1bb)){let _0x1692d3=Error[_0x296ff5(0x244)];try{Error['stackTraceLimit']=0x1/0x0,_0x4f1fd0[_0x296ff5(0x1f9)](_0x55375b['serialize']({'stackNode':!0x0},new Error()[_0x296ff5(0x252)],_0x341129(_0x165369),{'strLength':0x1/0x0}));}finally{Error[_0x296ff5(0x244)]=_0x1692d3;}}return{'method':_0x296ff5(0x25f),'version':_0x12e098,'args':[{'ts':_0x517fc1,'session':_0x14445b,'args':_0x4f1fd0,'id':_0x2d57a6,'context':_0x7c9ae3}]};}catch(_0x315eb1){return{'method':_0x296ff5(0x25f),'version':_0x12e098,'args':[{'ts':_0x517fc1,'session':_0x14445b,'args':[{'type':_0x296ff5(0x237),'error':_0x315eb1&&_0x315eb1[_0x296ff5(0x295)]}],'id':_0x2d57a6,'context':_0x7c9ae3}]};}finally{try{if(_0x27eb2b&&_0xb7c039){let _0xe9e58d=_0x19745e();_0x27eb2b[_0x296ff5(0x212)]++,_0x27eb2b[_0x296ff5(0x1b8)]+=_0x1e922d(_0xb7c039,_0xe9e58d),_0x27eb2b['ts']=_0xe9e58d,_0x414e35['hits'][_0x296ff5(0x212)]++,_0x414e35[_0x296ff5(0x281)]['time']+=_0x1e922d(_0xb7c039,_0xe9e58d),_0x414e35[_0x296ff5(0x281)]['ts']=_0xe9e58d,(_0x27eb2b['count']>0x32||_0x27eb2b[_0x296ff5(0x1b8)]>0x64)&&(_0x27eb2b[_0x296ff5(0x282)]=!0x0),(_0x414e35[_0x296ff5(0x281)]['count']>0x3e8||_0x414e35[_0x296ff5(0x281)][_0x296ff5(0x1b8)]>0x12c)&&(_0x414e35[_0x296ff5(0x281)][_0x296ff5(0x282)]=!0x0);}}catch{}}}return _0x4ab6c9;}function _0x3ba1(){var _0x3cb73c=['set','_addLoadNode','noFunctions','1206340CLTvMI','call','[object\\x20Set]','unknown','Map','4195960EqFetw','','_additionalMetadata','timeEnd','_connecting','NEXT_RUNTIME','getWebSocketClass','_setNodeExpandableState','unshift','_reconnectTimeout','2487450WbCORR','stackTraceLimit','_setNodePermissions','index','_setNodeId','serialize','isArray','match','_p_','_sendErrorMessage','now','function','_dateToString','dockerizedApp','join','stack','hasOwnProperty','getOwnPropertyNames','956202PGyymO','disabledTrace','length','_connected','isExpressionToEvaluate','current','[object\\x20Date]','60394','pathToFileURL','close','log','26929djpwuv','getter','setter','location','\\x20server','_processTreeNodeResult','totalStrLength','slice','indexOf','getPrototypeOf','127.0.0.1','_console_ninja','_regExpToString','autoExpandPropertyCount','data','url','funcName','_HTMLAllCollection','get','valueOf','_getOwnPropertySymbols','1.0.0','next.js','timeStamp','_isSet','name','Buffer','coverage','_treeNodePropertiesBeforeFullValue','parse','Boolean','autoExpandMaxDepth','_inBrowser','hits','reduceLimits','path','26QMRMjI','boolean','Number','type','replace','angular','_consoleNinjaAllowedToStart','split','toString','global','logger\\x20websocket\\x20error','_isPrimitiveType','_WebSocketClass','cappedProps','_p_length','null','getOwnPropertySymbols','message','create','_addFunctionsNode','_isPrimitiveWrapperType','parent','resolveGetters','map','pop','_setNodeExpressionPath','method','getOwnPropertyDescriptor','21533868gqWHvM','onopen','symbol','toLowerCase','','reload','time','date','_capIfString','trace','defineProperty','_propertyName','host','stringify','autoExpandLimit','env','_blacklistedProperty','_connectAttemptCount','warn','strLength',':logPointId:','failed\\x20to\\x20find\\x20and\\x20load\\x20WebSocket','constructor','_maxConnectAttemptCount','https://tinyurl.com/37x8b79t','_WebSocket','1712667053518','_isMap','bind','capped','versions','\\x20browser','substr','_connectToHostNow','astro','2696crpfQW','enumerable','concat','_getOwnPropertyDescriptor','edge','_addProperty','String','string','console','Error','_objectToString','[object\\x20BigInt]','_ws','props','elements','_hasSymbolPropertyOnItsPath','RegExp','...','_type','disabledLog','_inNextEdge','_socket','node','prototype','angular','_allowedToSend','_console_ninja_session','_property','number','rootExpression','undefined','process','Set','NEGATIVE_INFINITY','nodeModules','Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20restarting\\x20the\\x20process\\x20may\\x20help;\\x20also\\x20see\\x20','push','_Symbol','_isUndefined','catch','bigint','onerror','autoExpandPreviousObjects','ws://','POSITIVE_INFINITY','port','expressionsToEvaluate','level','hrtime','_hasMapOnItsPath','unref','_setNodeLabel','HTMLAllCollection',["localhost","127.0.0.1","example.cypress.io","LAPTOP-1V5HLGOD","172.27.80.1","192.168.56.1","10.0.0.19"],'_undefined','_p_name','sortProps','elapsed','value','74603ihYVjm','_setNodeQueryPath','count','_attemptToReconnectShortly','root_exp','_isNegativeZero','readyState','_allowedToConnectOnSend','hostname','send','forEach','_sortProps','_addObjectProperty','_treeNodePropertiesAfterFullValue','__es'+'Module','autoExpand','expId','then','array','default','performance','perf_hooks','_getOwnPropertyNames','depth','WebSocket','_cleanNode','onclose','allStrLength','positiveInfinity','ws/index.js','object','_isArray','error'];_0x3ba1=function(){return _0x3cb73c;};return _0x3ba1();}function _0x4050(_0x1c8374,_0x5de145){var _0x3ba176=_0x3ba1();return _0x4050=function(_0x4050b6,_0x21c3f2){_0x4050b6=_0x4050b6-0x1b2;var _0x778d89=_0x3ba176[_0x4050b6];return _0x778d89;},_0x4050(_0x1c8374,_0x5de145);}((_0x487bd,_0x5c4a99,_0x4c2d22,_0x10b48f,_0x227054,_0x4f59aa,_0x4c070f,_0x4250b1,_0x4da373,_0x1553fd)=>{var _0x226a79=_0x3e00e0;if(_0x487bd[_0x226a79(0x26b)])return _0x487bd[_0x226a79(0x26b)];if(!J(_0x487bd,_0x4250b1,_0x227054))return _0x487bd[_0x226a79(0x26b)]={'consoleLog':()=>{},'consoleTrace':()=>{},'consoleTime':()=>{},'consoleTimeEnd':()=>{},'autoLog':()=>{},'autoLogMany':()=>{},'autoTraceMany':()=>{},'coverage':()=>{},'autoTrace':()=>{},'autoTime':()=>{},'autoTimeEnd':()=>{}},_0x487bd[_0x226a79(0x26b)];let _0x103977=W(_0x487bd),_0x287de0=_0x103977[_0x226a79(0x20e)],_0x42af2b=_0x103977['timeStamp'],_0x49bbf3=_0x103977['now'],_0xe07dc4={'hits':{},'ts':{}},_0x4bdb46=Y(_0x487bd,_0x4da373,_0xe07dc4,_0x4f59aa),_0x5b442d=_0x51c231=>{_0xe07dc4['ts'][_0x51c231]=_0x42af2b();},_0x1fa9ee=(_0x2bf05a,_0x3b55dd)=>{var _0x50ccc1=_0x226a79;let _0x26b57d=_0xe07dc4['ts'][_0x3b55dd];if(delete _0xe07dc4['ts'][_0x3b55dd],_0x26b57d){let _0x2d3478=_0x287de0(_0x26b57d,_0x42af2b());_0x20f993(_0x4bdb46(_0x50ccc1(0x1b8),_0x2bf05a,_0x49bbf3(),_0x4acb65,[_0x2d3478],_0x3b55dd));}},_0x842b9b=_0x272ce1=>_0x185cc5=>{var _0x38e8e3=_0x226a79;try{_0x5b442d(_0x185cc5),_0x272ce1(_0x185cc5);}finally{_0x487bd[_0x38e8e3(0x1dd)]['time']=_0x272ce1;}},_0x2d0550=_0x54edb2=>_0x4db119=>{var _0x5b39c3=_0x226a79;try{let [_0x33c90b,_0x3198b1]=_0x4db119[_0x5b39c3(0x28b)](_0x5b39c3(0x1c6));_0x1fa9ee(_0x3198b1,_0x33c90b),_0x54edb2(_0x33c90b);}finally{_0x487bd['console'][_0x5b39c3(0x23c)]=_0x54edb2;}};_0x487bd[_0x226a79(0x26b)]={'consoleLog':(_0x2a467d,_0x10253c)=>{var _0xb052d=_0x226a79;_0x487bd['console']['log'][_0xb052d(0x279)]!==_0xb052d(0x1e8)&&_0x20f993(_0x4bdb46('log',_0x2a467d,_0x49bbf3(),_0x4acb65,_0x10253c));},'consoleTrace':(_0x20e2bb,_0x4de0d7)=>{var _0x28e452=_0x226a79;_0x487bd[_0x28e452(0x1dd)][_0x28e452(0x25f)][_0x28e452(0x279)]!==_0x28e452(0x256)&&_0x20f993(_0x4bdb46(_0x28e452(0x1bb),_0x20e2bb,_0x49bbf3(),_0x4acb65,_0x4de0d7));},'consoleTime':()=>{var _0x24e2e1=_0x226a79;_0x487bd['console'][_0x24e2e1(0x1b8)]=_0x842b9b(_0x487bd[_0x24e2e1(0x1dd)][_0x24e2e1(0x1b8)]);},'consoleTimeEnd':()=>{var _0x3c3822=_0x226a79;_0x487bd['console'][_0x3c3822(0x23c)]=_0x2d0550(_0x487bd[_0x3c3822(0x1dd)][_0x3c3822(0x23c)]);},'autoLog':(_0x39acfb,_0x3c947a)=>{var _0x53b01d=_0x226a79;_0x20f993(_0x4bdb46(_0x53b01d(0x25f),_0x3c947a,_0x49bbf3(),_0x4acb65,[_0x39acfb]));},'autoLogMany':(_0x5c0f7,_0xd934fd)=>{var _0x365320=_0x226a79;_0x20f993(_0x4bdb46(_0x365320(0x25f),_0x5c0f7,_0x49bbf3(),_0x4acb65,_0xd934fd));},'autoTrace':(_0x543ec0,_0x471149)=>{_0x20f993(_0x4bdb46('trace',_0x471149,_0x49bbf3(),_0x4acb65,[_0x543ec0]));},'autoTraceMany':(_0x7a10e6,_0x5bcec8)=>{var _0x512abc=_0x226a79;_0x20f993(_0x4bdb46(_0x512abc(0x1bb),_0x7a10e6,_0x49bbf3(),_0x4acb65,_0x5bcec8));},'autoTime':(_0x229ff6,_0x12be8f,_0x538b55)=>{_0x5b442d(_0x538b55);},'autoTimeEnd':(_0x12ab50,_0x1f3a17,_0x210e06)=>{_0x1fa9ee(_0x1f3a17,_0x210e06);},'coverage':_0x37d67d=>{var _0x6e1486=_0x226a79;_0x20f993({'method':_0x6e1486(0x27b),'version':_0x4f59aa,'args':[{'id':_0x37d67d}]});}};let _0x20f993=b(_0x487bd,_0x5c4a99,_0x4c2d22,_0x10b48f,_0x227054,_0x1553fd),_0x4acb65=_0x487bd[_0x226a79(0x1ef)];return _0x487bd[_0x226a79(0x26b)];})(globalThis,_0x3e00e0(0x26a),_0x3e00e0(0x25c),"c:\\\\Users\\\\gatit\\\\.vscode\\\\extensions\\\\wallabyjs.console-ninja-1.0.298\\\\node_modules",_0x3e00e0(0x1ed),_0x3e00e0(0x275),_0x3e00e0(0x1cc),_0x3e00e0(0x20a),_0x3e00e0(0x1b6),_0x3e00e0(0x23a));`)}catch{}}function HU(t,...e){try{$U().consoleLog(t,e)}catch{}return e}var zP=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(te(gr),te(Qn))},e.\u0275dir=pt({type:e});let t=e;return t})(),rm=(()=>{let e=class e extends zP{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=bi(e)))(s||e)}})(),e.\u0275dir=pt({type:e,features:[zr]});let t=e;return t})(),id=new O("");var GU={provide:id,useExisting:vi(()=>xc),multi:!0};function zU(){let t=mr()?mr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var WU=new O(""),xc=(()=>{let e=class e extends zP{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!zU())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(te(gr),te(Qn),te(WU,8))},e.\u0275dir=pt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Ie("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[aa([GU]),zr]});let t=e;return t})();var KU=new O(""),QU=new O("");function WP(t){return t!=null}function KP(t){return Ss(t)?xe(t):t}function QP(t){let e={};return t.forEach(n=>{e=n!=null?A(A({},e),n):e}),Object.keys(e).length===0?null:e}function YP(t,e){return e.map(n=>n(t))}function YU(t){return!t.validate}function ZP(t){return t.map(e=>YU(e)?e:n=>e.validate(n))}function ZU(t){if(!t)return null;let e=t.filter(WP);return e.length==0?null:function(n){return QP(YP(n,e))}}function XP(t){return t!=null?ZU(ZP(t)):null}function XU(t){if(!t)return null;let e=t.filter(WP);return e.length==0?null:function(n){let r=YP(n,e).map(KP);return E0(r).pipe(j(QP))}}function JP(t){return t!=null?XU(ZP(t)):null}function LP(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function JU(t){return t._rawValidators}function e$(t){return t._rawAsyncValidators}function IE(t){return t?Array.isArray(t)?t:[t]:[]}function tm(t,e){return Array.isArray(t)?t.includes(e):t===e}function jP(t,e){let n=IE(e);return IE(t).forEach(i=>{tm(n,i)||n.push(i)}),n}function BP(t,e){return IE(e).filter(n=>!tm(t,n))}var nm=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=XP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=JP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},CE=class extends nm{get formDirective(){return null}get path(){return null}},rd=class extends nm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},DE=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},t$={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Mne=ie(A({},t$),{"[class.ng-submitted]":"isSubmitted"}),yc=(()=>{let e=class e extends DE{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(te(rd,2))},e.\u0275dir=pt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&px("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[zr]});let t=e;return t})();var td="VALID",em="INVALID",_c="PENDING",nd="DISABLED";function n$(t){return(im(t)?t.validators:t)||null}function r$(t){return Array.isArray(t)?XP(t):t||null}function i$(t,e){return(im(e)?e.asyncValidators:t)||null}function s$(t){return Array.isArray(t)?JP(t):t||null}function im(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var TE=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===td}get invalid(){return this.status===em}get pending(){return this.status==_c}get disabled(){return this.status===nd}get enabled(){return this.status!==nd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(jP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(jP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(BP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(BP(e,this._rawAsyncValidators))}hasValidator(e){return tm(this._rawValidators,e)}hasAsyncValidator(e){return tm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=_c,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=nd,this.errors=null,this._forEachChild(r=>{r.disable(ie(A({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ie(A({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=td,this._forEachChild(r=>{r.enable(ie(A({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ie(A({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===td||this.status===_c)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?nd:td}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=_c,this._hasOwnPendingAsyncValidator=!0;let n=KP(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new dt,this.statusChanges=new dt}_calculateStatus(){return this._allControlsDisabled()?nd:this.errors?em:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_c)?_c:this._anyControlsHaveStatus(em)?em:td}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){im(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=r$(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=s$(this._rawAsyncValidators)}};var ek=new O("CallSetDisabledState",{providedIn:"root",factory:()=>SE}),SE="always";function o$(t,e){return[...e.path,t]}function a$(t,e,n=SE){l$(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),u$(t,e),h$(t,e),d$(t,e),c$(t,e)}function UP(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function c$(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function l$(t,e){let n=JU(t);e.validator!==null?t.setValidators(LP(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=e$(t);e.asyncValidator!==null?t.setAsyncValidators(LP(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();UP(e._rawValidators,i),UP(e._rawAsyncValidators,i)}function u$(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&tk(t,e)})}function d$(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&tk(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function tk(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function h$(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function f$(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function p$(t){return Object.getPrototypeOf(t.constructor)===rm}function g$(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===xc?n=s:p$(s)?r=s:i=s}),i||r||n||null}function $P(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function HP(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var m$=class extends TE{constructor(e=null,n,r){super(n$(n),i$(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),im(n)&&(n.nonNullable||n.initialValueIsDefault)&&(HP(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){$P(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){$P(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){HP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var _$={provide:rd,useExisting:vi(()=>mo)},qP=Promise.resolve(),mo=(()=>{let e=class e extends rd{constructor(r,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new m$,this._registered=!1,this.name="",this.update=new dt,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=g$(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),f$(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){a$(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){qP.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Ms(i);qP.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?o$(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(te(CE,9),te(KU,10),te(QU,10),te(id,10),te(As,8),te(ek,8))},e.\u0275dir=pt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Mt.None,"disabled","isDisabled"],model:[Mt.None,"ngModel","model"],options:[Mt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[aa([_$]),zr,Ds]});let t=e;return t})();var x$={provide:id,useExisting:vi(()=>sd),multi:!0},sd=(()=>{let e=class e extends rm{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=bi(e)))(s||e)}})(),e.\u0275dir=pt({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&Ie("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[aa([x$]),zr]});let t=e;return t})();var y$={provide:id,useExisting:vi(()=>vc),multi:!0};function nk(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function v$(t){return t.split(":")[0]}var vc=(()=>{let e=class e extends rm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),s=nk(i,r);this.setProperty("value",s)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=v$(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=bi(e)))(s||e)}})(),e.\u0275dir=pt({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,s){i&1&&Ie("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[aa([y$]),zr]});let t=e;return t})(),sm=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(nk(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(te(Qn),te(gr),te(vc,9))},e.\u0275dir=pt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),w$={provide:id,useExisting:vi(()=>rk),multi:!0};function GP(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function b$(t){return t.split(":")[0]}var rk=(()=>{let e=class e extends rm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let s=r.map(o=>this._getOptionId(o));i=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else i=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let s=[],o=i.selectedOptions;if(o!==void 0){let a=o;for(let c=0;c<a.length;c++){let l=a[c],u=this._getOptionValue(l.value);s.push(u)}}else{let a=i.options;for(let c=0;c<a.length;c++){let l=a[c];if(l.selected){let u=this._getOptionValue(l.value);s.push(u)}}}this.value=s,r(s)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=b$(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=bi(e)))(s||e)}})(),e.\u0275dir=pt({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,s){i&1&&Ie("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[aa([w$]),zr]});let t=e;return t})(),om=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(GP(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(GP(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(te(Qn),te(gr),te(rk,9))},e.\u0275dir=pt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var E$=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=tt({type:e}),e.\u0275inj=et({});let t=e;return t})();var ik=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:ek,useValue:r.callSetDisabledState??SE}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=tt({type:e}),e.\u0275inj=et({imports:[E$]});let t=e;return t})();var wc=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=tn({type:e,selectors:[["app-loader"]],decls:1,vars:0,consts:[[1,"loader"]],template:function(i,s){i&1&&on(0,"div",0)},styles:[".loader[_ngcontent-%COMP%]{width:120px;aspect-ratio:1;--_c:no-repeat radial-gradient(farthest-side,var(--yellow) 92%,#0000);background:var(--_c) top,var(--_c) left,var(--_c) right,var(--_c) bottom;background-size:27px 27px;animation:_ngcontent-%COMP%_l7 1s infinite;margin:3rem auto}@keyframes _ngcontent-%COMP%_l7{to{transform:rotate(.5turn)}}"]});let t=e;return t})();var od=t=>({invalid:t}),sk=t=>({disabled:t});function I$(t,e){t&1&&(v(0,"h2"),S(1,"A\xF1adir coche"),I())}function C$(t,e){t&1&&(v(0,"h2"),S(1,"Modificar coche"),I())}function D$(t,e){if(t&1){let n=qt();v(0,"div")(1,"button",15),Ie("click",function(){$t(n);let i=nt();return Ht(i.createCoche())}),S(2,"A\xF1adir"),I()()}if(t&2){let n=nt();q(),ye("ngClass",Ii(1,sk,!n.isCurrentCocheValid))}}function T$(t,e){if(t&1){let n=qt();v(0,"div")(1,"button",16),Ie("click",function(){$t(n);let i=nt();return Ht(i.updateCoche())}),S(2,"Modificar"),I()()}if(t&2){let n=nt();q(),ye("ngClass",Ii(1,sk,!n.isCurrentCocheValid))}}function S$(t,e){if(t&1){let n=qt();v(0,"div")(1,"button",17),Ie("click",function(){$t(n);let i=nt();return Ht(i.deleteCoche())}),S(2,"Eliminar"),I()()}}function A$(t,e){if(t&1){let n=qt();v(0,"div")(1,"button",18),Ie("click",function(){$t(n);let i=nt();return Ht(i.sellCoche())}),S(2,"Vender"),I()()}}function M$(t,e){if(t&1){let n=qt();v(0,"div")(1,"button",19),Ie("click",function(){$t(n);let i=nt();return Ht(i.resetCurrentCoche())}),S(2," A\xF1adir nuevo "),I()()}}function N$(t,e){if(t&1){let n=qt();v(0,"tr",22)(1,"td"),S(2),I(),v(3,"td"),S(4),I(),v(5,"td"),S(6),I(),v(7,"td"),S(8),I(),v(9,"td"),S(10),I(),v(11,"td"),S(12),I(),v(13,"td")(14,"button",23),Ie("click",function(){let i=$t(n).$implicit,s=nt(2);return Ht(s.setCurrentCoche(i))}),S(15," Seleccionar "),I()()()}if(t&2){let n=e.$implicit;Ts("id",n.id),q(2),Dt(n.marca),q(2),Dt(n.modelo),q(2),dl("",n.kilometros," KM"),q(2),Dt(n.transmision),q(2),dl("",n.precio," $"),q(2),Dt(n.vendido)}}function R$(t,e){if(t&1&&(v(0,"table",20)(1,"thead")(2,"tr")(3,"th"),S(4,"Marca"),I(),v(5,"th"),S(6,"Modelo"),I(),v(7,"th"),S(8,"Kilometros"),I(),v(9,"th"),S(10,"Transmision"),I(),v(11,"th"),S(12,"Precio"),I(),v(13,"th"),S(14,"Vendido"),I(),v(15,"th"),S(16,"Acciones"),I()()(),v(17,"tbody"),sn(18,N$,16,7,"tr",21),I()()),t&2){let n=nt();q(18),ye("ngForOf",n.coches)}}function P$(t,e){t&1&&on(0,"app-loader")}var ok=(()=>{let e=class e{constructor(r){this.cocheService=r,this.state=Yn.create,this.MODES=Yn,this.isLoading=!0,this.isMarcaValid=!1,this.isModeloValid=!1,this.isPrecioValid=!1,this.isKilometrosValid=!1,this.isTransmisionValid=!1,this.isCurrentCocheValid=!1,this.transmisiones=["manual","automatica"],this.coches=[],this.currentCoche=new wa({marca:"",modelo:"",precio:0,kilometros:0,vendido:!1,transmision:"",due\u00F1oActual:""})}ngOnInit(){this.updateCoches()}updateCoches(){return g(this,null,function*(){this.isLoading=!0,this.coches=yield this.cocheService.getCoches(),this.isLoading=!1})}createCoche(){return g(this,null,function*(){if(!this.validateCurrentCoche())return;let r=new wa(ie(A({},this.currentCoche),{vendido:!1,due\u00F1oActual:""}));yield this.cocheService.createCoche(r),yield this.updateCoches(),this.resetCurrentCoche()})}updateCoche(){return g(this,null,function*(){this.validateCurrentCoche()&&(yield this.cocheService.updateCoche(this.currentCoche),yield this.updateCoches(),this.resetCurrentCoche())})}deleteCoche(){return g(this,null,function*(){yield this.cocheService.deleteCoche(this.currentCoche.id),yield this.updateCoches(),this.resetCurrentCoche()})}setCurrentCoche(r){return g(this,null,function*(){this.currentCoche=r,this.state=Yn.select,this.setValidation(!0),this.validateCurrentCoche()})}resetCurrentCoche(){return g(this,null,function*(){this.currentCoche=new wa({marca:"",modelo:"",precio:0,kilometros:0,vendido:!1,transmision:"",due\u00F1oActual:""}),this.state=Yn.create,this.setValidation(!1),this.validateCurrentCoche(),yield this.updateCoches()})}sellCoche(){return g(this,null,function*(){let r=this.currentCoche;yield this.cocheService.sellCoche(r.id,"123123",r.precio,"efectivo"),this.resetCurrentCoche(),yield this.updateCoches()})}validateTransmision(){console.log(...O$("3969663811_119_4_119_34_4",this.currentCoche)),this.isTransmisionValid=this.currentCoche.transmision!==null||this.currentCoche.transmision!=="",this.validateCurrentCoche()}validateMarca(){this.isMarcaValid=w2(this.currentCoche.marca),this.validateCurrentCoche()}validateModelo(){this.isModeloValid=b2(this.currentCoche.modelo),this.validateCurrentCoche()}validatePrecio(){if(this.currentCoche.precio===null){this.isPrecioValid=!1;return}this.isPrecioValid=Dy(this.currentCoche.precio.toString()),this.validateCurrentCoche()}validateKilometros(){if(this.currentCoche.kilometros===null){this.isKilometrosValid=!1;return}this.isKilometrosValid=Dy(this.currentCoche.kilometros.toString()),this.validateCurrentCoche()}validateCurrentCoche(){return this.isCurrentCocheValid=this.isKilometrosValid&&this.isMarcaValid&&this.isModeloValid&&this.isPrecioValid&&this.isTransmisionValid,this.isCurrentCocheValid}setValidation(r){this.isMarcaValid=r,this.isModeloValid=r,this.isPrecioValid=r,this.isKilometrosValid=r,this.isTransmisionValid=r}};e.\u0275fac=function(i){return new(i||e)(te(VP))},e.\u0275cmp=tn({type:e,selectors:[["app-coches"]],decls:42,vars:29,consts:[[1,"page"],[1,"row"],[1,"input-column"],[1,"container-title"],[4,"ngIf"],[1,"container"],[1,"input-row"],["type","text",3,"ngModelChange","input","ngModel","ngClass"],["type","number",3,"ngModelChange","input","ngModel","ngClass"],[3,"ngModelChange","input","ngModel","ngClass"],["value","manual"],["value","automatica"],[1,"container","botones"],[1,"table-column"],["class","table",4,"ngIf"],[1,"btn","add",3,"click","ngClass"],[1,"btn","mod",3,"click","ngClass"],[1,"btn","del",3,"click"],[1,"btn","sell",3,"click"],[1,"btn","add",3,"click"],[1,"table"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],[1,"btn","btn-primary",3,"click"]],template:function(i,s){i&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),sn(4,I$,2,0,"h2",4)(5,C$,2,0,"h2",4),I(),v(6,"div",5)(7,"div",6)(8,"label"),S(9," Marca "),v(10,"input",7),cn("ngModelChange",function(a){return fn(s.currentCoche.marca,a)||(s.currentCoche.marca=a),a}),Ie("input",function(){return s.validateMarca()}),I()()(),v(11,"div",6)(12,"label"),S(13," Modelo "),v(14,"input",7),cn("ngModelChange",function(a){return fn(s.currentCoche.modelo,a)||(s.currentCoche.modelo=a),a}),Ie("input",function(){return s.validateModelo()}),I()()(),v(15,"div",6)(16,"label"),S(17," Kilometros "),v(18,"input",8),cn("ngModelChange",function(a){return fn(s.currentCoche.kilometros,a)||(s.currentCoche.kilometros=a),a}),Ie("input",function(){return s.validateKilometros()}),I()()(),v(19,"div",6)(20,"label"),S(21," Transmision "),v(22,"select",9),cn("ngModelChange",function(a){return fn(s.currentCoche.transmision,a)||(s.currentCoche.transmision=a),a}),Ie("input",function(){return s.validateTransmision()}),v(23,"option",10),S(24,"Manual"),I(),v(25,"option",11),S(26,"Automatica"),I()()()(),v(27,"div",6)(28,"label"),S(29," Precio "),v(30,"input",8),cn("ngModelChange",function(a){return fn(s.currentCoche.precio,a)||(s.currentCoche.precio=a),a}),Ie("input",function(){return s.validatePrecio()}),I()()()(),v(31,"div",12),sn(32,D$,3,3,"div",4)(33,T$,3,3,"div",4)(34,S$,3,0,"div",4)(35,A$,3,0,"div",4)(36,M$,3,0,"div",4),I()(),v(37,"div",13)(38,"h2"),S(39,"Coches"),I(),sn(40,R$,19,1,"table",14)(41,P$,1,0,"app-loader",4),I()()()),i&2&&(q(4),ye("ngIf",s.state===s.MODES.create),q(),ye("ngIf",s.state===s.MODES.select),q(5),an("ngModel",s.currentCoche.marca),ye("ngClass",Ii(19,od,!s.isMarcaValid)),q(4),an("ngModel",s.currentCoche.modelo),ye("ngClass",Ii(21,od,!s.isModeloValid)),q(4),an("ngModel",s.currentCoche.kilometros),ye("ngClass",Ii(23,od,!s.isKilometrosValid)),q(4),an("ngModel",s.currentCoche.transmision),ye("ngClass",Ii(25,od,!s.isTransmisionValid)),q(8),an("ngModel",s.currentCoche.precio),ye("ngClass",Ii(27,od,!s.isPrecioValid)),q(2),ye("ngIf",s.state===s.MODES.create),q(),ye("ngIf",s.state===s.MODES.select),q(),ye("ngIf",s.state===s.MODES.select),q(),ye("ngIf",s.state===s.MODES.select&&!s.currentCoche.vendido),q(),ye("ngIf",s.state===s.MODES.select),q(4),ye("ngIf",!s.isLoading),q(),ye("ngIf",s.isLoading))},dependencies:[xS,ua,da,sm,om,xc,sd,vc,yc,mo,wc]});let t=e;return t})();function k$(){try{return(0,eval)("globalThis._console_ninja")||(0,eval)(`/* https://github.com/wallabyjs/console-ninja#how-does-it-work */'use strict';var _0x3e00e0=_0x4050;(function(_0x1495ec,_0x1c7fcc){var _0x5affcb=_0x4050,_0x4b80e2=_0x1495ec();while(!![]){try{var _0xd8dcae=parseInt(_0x5affcb(0x210))/0x1*(parseInt(_0x5affcb(0x284))/0x2)+-parseInt(_0x5affcb(0x255))/0x3+parseInt(_0x5affcb(0x239))/0x4+-parseInt(_0x5affcb(0x234))/0x5+parseInt(_0x5affcb(0x243))/0x6+-parseInt(_0x5affcb(0x260))/0x7*(-parseInt(_0x5affcb(0x1d5))/0x8)+-parseInt(_0x5affcb(0x1b2))/0x9;if(_0xd8dcae===_0x1c7fcc)break;else _0x4b80e2['push'](_0x4b80e2['shift']());}catch(_0x25996e){_0x4b80e2['push'](_0x4b80e2['shift']());}}}(_0x3ba1,0xbdbe5));var j=Object[_0x3e00e0(0x296)],H=Object[_0x3e00e0(0x1bc)],G=Object[_0x3e00e0(0x29f)],ee=Object[_0x3e00e0(0x254)],te=Object[_0x3e00e0(0x269)],ne=Object[_0x3e00e0(0x1ec)][_0x3e00e0(0x253)],re=(_0x5f4893,_0x512f21,_0x525e3a,_0x408afa)=>{var _0x14b3bd=_0x3e00e0;if(_0x512f21&&typeof _0x512f21==_0x14b3bd(0x22e)||typeof _0x512f21==_0x14b3bd(0x24e)){for(let _0x7522c9 of ee(_0x512f21))!ne['call'](_0x5f4893,_0x7522c9)&&_0x7522c9!==_0x525e3a&&H(_0x5f4893,_0x7522c9,{'get':()=>_0x512f21[_0x7522c9],'enumerable':!(_0x408afa=G(_0x512f21,_0x7522c9))||_0x408afa[_0x14b3bd(0x1d6)]});}return _0x5f4893;},x=(_0x1fc85e,_0xced39c,_0x4eee27)=>(_0x4eee27=_0x1fc85e!=null?j(te(_0x1fc85e)):{},re(_0xced39c||!_0x1fc85e||!_0x1fc85e[_0x3e00e0(0x21e)]?H(_0x4eee27,_0x3e00e0(0x223),{'value':_0x1fc85e,'enumerable':!0x0}):_0x4eee27,_0x1fc85e)),X=class{constructor(_0x2f4673,_0x3195b1,_0x2dab36,_0x4b2d9b,_0x3599e5){var _0x3f88e9=_0x3e00e0;this[_0x3f88e9(0x28d)]=_0x2f4673,this['host']=_0x3195b1,this[_0x3f88e9(0x202)]=_0x2dab36,this[_0x3f88e9(0x1f7)]=_0x4b2d9b,this[_0x3f88e9(0x250)]=_0x3599e5,this[_0x3f88e9(0x1ee)]=!0x0,this[_0x3f88e9(0x217)]=!0x0,this[_0x3f88e9(0x258)]=!0x1,this[_0x3f88e9(0x23d)]=!0x1,this[_0x3f88e9(0x1e9)]=_0x2f4673[_0x3f88e9(0x1f4)]?.['env']?.['NEXT_RUNTIME']===_0x3f88e9(0x1d9),this[_0x3f88e9(0x280)]=!this[_0x3f88e9(0x28d)][_0x3f88e9(0x1f4)]?.[_0x3f88e9(0x1d0)]?.['node']&&!this['_inNextEdge'],this[_0x3f88e9(0x290)]=null,this[_0x3f88e9(0x1c3)]=0x0,this[_0x3f88e9(0x1c9)]=0x14,this['_webSocketErrorDocsLink']=_0x3f88e9(0x1ca),this['_sendErrorMessage']=(this[_0x3f88e9(0x280)]?'Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20refreshing\\x20the\\x20page\\x20may\\x20help;\\x20also\\x20see\\x20':_0x3f88e9(0x1f8))+this['_webSocketErrorDocsLink'];}async[_0x3e00e0(0x23f)](){var _0x4b7b3c=_0x3e00e0;if(this[_0x4b7b3c(0x290)])return this[_0x4b7b3c(0x290)];let _0x2792ff;if(this[_0x4b7b3c(0x280)]||this[_0x4b7b3c(0x1e9)])_0x2792ff=this[_0x4b7b3c(0x28d)][_0x4b7b3c(0x228)];else{if(this[_0x4b7b3c(0x28d)]['process']?.[_0x4b7b3c(0x1cb)])_0x2792ff=this[_0x4b7b3c(0x28d)][_0x4b7b3c(0x1f4)]?.[_0x4b7b3c(0x1cb)];else try{let _0x4b57b1=await import(_0x4b7b3c(0x283));_0x2792ff=(await import((await import(_0x4b7b3c(0x26f)))[_0x4b7b3c(0x25d)](_0x4b57b1[_0x4b7b3c(0x251)](this[_0x4b7b3c(0x1f7)],_0x4b7b3c(0x22d)))['toString']()))['default'];}catch{try{_0x2792ff=require(require('path')[_0x4b7b3c(0x251)](this['nodeModules'],'ws'));}catch{throw new Error(_0x4b7b3c(0x1c7));}}}return this['_WebSocketClass']=_0x2792ff,_0x2792ff;}[_0x3e00e0(0x1d3)](){var _0xa05933=_0x3e00e0;this['_connecting']||this['_connected']||this[_0xa05933(0x1c3)]>=this[_0xa05933(0x1c9)]||(this['_allowedToConnectOnSend']=!0x1,this['_connecting']=!0x0,this[_0xa05933(0x1c3)]++,this[_0xa05933(0x1e1)]=new Promise((_0x6c9c40,_0x3c54db)=>{var _0x57a641=_0xa05933;this['getWebSocketClass']()[_0x57a641(0x221)](_0x4cf87a=>{var _0x2db465=_0x57a641;let _0x1c4c7e=new _0x4cf87a(_0x2db465(0x200)+(!this[_0x2db465(0x280)]&&this[_0x2db465(0x250)]?'gateway.docker.internal':this[_0x2db465(0x1be)])+':'+this[_0x2db465(0x202)]);_0x1c4c7e[_0x2db465(0x1fe)]=()=>{var _0x313f8f=_0x2db465;this[_0x313f8f(0x1ee)]=!0x1,this['_disposeWebsocket'](_0x1c4c7e),this[_0x313f8f(0x213)](),_0x3c54db(new Error(_0x313f8f(0x28e)));},_0x1c4c7e[_0x2db465(0x1b3)]=()=>{var _0x2575de=_0x2db465;this[_0x2575de(0x280)]||_0x1c4c7e['_socket']&&_0x1c4c7e[_0x2575de(0x1ea)][_0x2575de(0x207)]&&_0x1c4c7e[_0x2575de(0x1ea)][_0x2575de(0x207)](),_0x6c9c40(_0x1c4c7e);},_0x1c4c7e[_0x2db465(0x22a)]=()=>{var _0x3e01a0=_0x2db465;this[_0x3e01a0(0x217)]=!0x0,this['_disposeWebsocket'](_0x1c4c7e),this['_attemptToReconnectShortly']();},_0x1c4c7e['onmessage']=_0x1886d4=>{var _0x115305=_0x2db465;try{_0x1886d4&&_0x1886d4[_0x115305(0x26e)]&&this[_0x115305(0x280)]&&JSON[_0x115305(0x27d)](_0x1886d4['data'])[_0x115305(0x29e)]===_0x115305(0x1b7)&&this['global'][_0x115305(0x263)][_0x115305(0x1b7)]();}catch{}};})[_0x57a641(0x221)](_0xbb9a45=>(this[_0x57a641(0x258)]=!0x0,this[_0x57a641(0x23d)]=!0x1,this[_0x57a641(0x217)]=!0x1,this[_0x57a641(0x1ee)]=!0x0,this[_0x57a641(0x1c3)]=0x0,_0xbb9a45))[_0x57a641(0x1fc)](_0x5d288d=>(this['_connected']=!0x1,this[_0x57a641(0x23d)]=!0x1,console[_0x57a641(0x1c4)]('logger\\x20failed\\x20to\\x20connect\\x20to\\x20host,\\x20see\\x20'+this['_webSocketErrorDocsLink']),_0x3c54db(new Error('failed\\x20to\\x20connect\\x20to\\x20host:\\x20'+(_0x5d288d&&_0x5d288d[_0x57a641(0x295)])))));}));}['_disposeWebsocket'](_0x411a98){var _0x1173cc=_0x3e00e0;this[_0x1173cc(0x258)]=!0x1,this[_0x1173cc(0x23d)]=!0x1;try{_0x411a98['onclose']=null,_0x411a98['onerror']=null,_0x411a98['onopen']=null;}catch{}try{_0x411a98[_0x1173cc(0x216)]<0x2&&_0x411a98[_0x1173cc(0x25e)]();}catch{}}[_0x3e00e0(0x213)](){var _0x463729=_0x3e00e0;clearTimeout(this['_reconnectTimeout']),!(this['_connectAttemptCount']>=this[_0x463729(0x1c9)])&&(this[_0x463729(0x242)]=setTimeout(()=>{var _0x5bf991=_0x463729;this[_0x5bf991(0x258)]||this[_0x5bf991(0x23d)]||(this[_0x5bf991(0x1d3)](),this[_0x5bf991(0x1e1)]?.['catch'](()=>this[_0x5bf991(0x213)]()));},0x1f4),this[_0x463729(0x242)][_0x463729(0x207)]&&this[_0x463729(0x242)][_0x463729(0x207)]());}async[_0x3e00e0(0x219)](_0x47f47a){var _0x70e9e4=_0x3e00e0;try{if(!this['_allowedToSend'])return;this[_0x70e9e4(0x217)]&&this['_connectToHostNow'](),(await this[_0x70e9e4(0x1e1)])[_0x70e9e4(0x219)](JSON[_0x70e9e4(0x1bf)](_0x47f47a));}catch(_0x385094){console[_0x70e9e4(0x1c4)](this[_0x70e9e4(0x24c)]+':\\x20'+(_0x385094&&_0x385094[_0x70e9e4(0x295)])),this['_allowedToSend']=!0x1,this['_attemptToReconnectShortly']();}}};function b(_0x1985ee,_0x14e652,_0x511de9,_0x533eb3,_0x2a9f03,_0x502cf1){var _0x2f507c=_0x3e00e0;let _0x3d6d95=_0x511de9[_0x2f507c(0x28b)](',')[_0x2f507c(0x29b)](_0x204c57=>{var _0x3cc821=_0x2f507c;try{_0x1985ee[_0x3cc821(0x1ef)]||((_0x2a9f03===_0x3cc821(0x276)||_0x2a9f03==='remix'||_0x2a9f03===_0x3cc821(0x1d4)||_0x2a9f03===_0x3cc821(0x289))&&(_0x2a9f03+=!_0x1985ee['process']?.[_0x3cc821(0x1d0)]?.['node']&&_0x1985ee[_0x3cc821(0x1f4)]?.[_0x3cc821(0x1c1)]?.[_0x3cc821(0x23e)]!==_0x3cc821(0x1d9)?_0x3cc821(0x1d1):_0x3cc821(0x264)),_0x1985ee[_0x3cc821(0x1ef)]={'id':+new Date(),'tool':_0x2a9f03});let _0x172705=new X(_0x1985ee,_0x14e652,_0x204c57,_0x533eb3,_0x502cf1);return _0x172705[_0x3cc821(0x219)][_0x3cc821(0x1ce)](_0x172705);}catch(_0x23df2b){return console[_0x3cc821(0x1c4)]('logger\\x20failed\\x20to\\x20connect\\x20to\\x20host',_0x23df2b&&_0x23df2b[_0x3cc821(0x295)]),()=>{};}});return _0x1ac5bc=>_0x3d6d95[_0x2f507c(0x21a)](_0xf8150e=>_0xf8150e(_0x1ac5bc));}function W(_0x423b66){var _0x4e4618=_0x3e00e0;let _0x1fae98=function(_0x4570c9,_0x5c2ec0){return _0x5c2ec0-_0x4570c9;},_0x3e26ef;if(_0x423b66[_0x4e4618(0x224)])_0x3e26ef=function(){var _0x592362=_0x4e4618;return _0x423b66[_0x592362(0x224)]['now']();};else{if(_0x423b66['process']&&_0x423b66[_0x4e4618(0x1f4)][_0x4e4618(0x205)]&&_0x423b66[_0x4e4618(0x1f4)]?.[_0x4e4618(0x1c1)]?.['NEXT_RUNTIME']!=='edge')_0x3e26ef=function(){var _0x54573e=_0x4e4618;return _0x423b66['process'][_0x54573e(0x205)]();},_0x1fae98=function(_0xd38af4,_0xedcc6f){return 0x3e8*(_0xedcc6f[0x0]-_0xd38af4[0x0])+(_0xedcc6f[0x1]-_0xd38af4[0x1])/0xf4240;};else try{let {performance:_0x2c1e88}=require(_0x4e4618(0x225));_0x3e26ef=function(){var _0x5f4815=_0x4e4618;return _0x2c1e88[_0x5f4815(0x24d)]();};}catch{_0x3e26ef=function(){return+new Date();};}}return{'elapsed':_0x1fae98,'timeStamp':_0x3e26ef,'now':()=>Date[_0x4e4618(0x24d)]()};}function J(_0x3a0d4d,_0x2c315c,_0x15812b){var _0x47306e=_0x3e00e0;if(_0x3a0d4d[_0x47306e(0x28a)]!==void 0x0)return _0x3a0d4d['_consoleNinjaAllowedToStart'];let _0x332e2d=_0x3a0d4d[_0x47306e(0x1f4)]?.[_0x47306e(0x1d0)]?.['node']||_0x3a0d4d[_0x47306e(0x1f4)]?.[_0x47306e(0x1c1)]?.[_0x47306e(0x23e)]===_0x47306e(0x1d9);return _0x332e2d&&_0x15812b==='nuxt'?_0x3a0d4d[_0x47306e(0x28a)]=!0x1:_0x3a0d4d[_0x47306e(0x28a)]=_0x332e2d||!_0x2c315c||_0x3a0d4d[_0x47306e(0x263)]?.[_0x47306e(0x218)]&&_0x2c315c['includes'](_0x3a0d4d[_0x47306e(0x263)][_0x47306e(0x218)]),_0x3a0d4d[_0x47306e(0x28a)];}function Y(_0x215415,_0x243cf5,_0x414e35,_0x12e098){var _0x580cf2=_0x3e00e0;_0x215415=_0x215415,_0x243cf5=_0x243cf5,_0x414e35=_0x414e35,_0x12e098=_0x12e098;let _0x32d079=W(_0x215415),_0x1e922d=_0x32d079[_0x580cf2(0x20e)],_0x19745e=_0x32d079[_0x580cf2(0x277)];class _0x39411a{constructor(){var _0x21380a=_0x580cf2;this['_keyStrRegExp']=/^(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/,this['_numberRegExp']=/^(0|[1-9][0-9]*)$/,this['_quotedRegExp']=/'([^\\\\']|\\\\')*'/,this[_0x21380a(0x20b)]=_0x215415[_0x21380a(0x1f3)],this['_HTMLAllCollection']=_0x215415[_0x21380a(0x209)],this['_getOwnPropertyDescriptor']=Object['getOwnPropertyDescriptor'],this['_getOwnPropertyNames']=Object[_0x21380a(0x254)],this['_Symbol']=_0x215415['Symbol'],this['_regExpToString']=RegExp['prototype'][_0x21380a(0x28c)],this[_0x21380a(0x24f)]=Date['prototype']['toString'];}['serialize'](_0x5c006d,_0x1810c9,_0x2c7546,_0x4c5987){var _0x12ffaa=_0x580cf2,_0x511889=this,_0x5d43f0=_0x2c7546[_0x12ffaa(0x21f)];function _0x1713c1(_0x690af5,_0x3df467,_0x50524c){var _0x3fad0b=_0x12ffaa;_0x3df467[_0x3fad0b(0x287)]=_0x3fad0b(0x237),_0x3df467[_0x3fad0b(0x230)]=_0x690af5[_0x3fad0b(0x295)],_0x5dc1a0=_0x50524c[_0x3fad0b(0x1eb)]['current'],_0x50524c['node'][_0x3fad0b(0x25a)]=_0x3df467,_0x511889[_0x3fad0b(0x27c)](_0x3df467,_0x50524c);}try{_0x2c7546['level']++,_0x2c7546[_0x12ffaa(0x21f)]&&_0x2c7546[_0x12ffaa(0x1ff)][_0x12ffaa(0x1f9)](_0x1810c9);var _0x5c41ed,_0x396633,_0x19f036,_0x37ba38,_0x529025=[],_0x41636a=[],_0x274ceb,_0x45533b=this[_0x12ffaa(0x1e7)](_0x1810c9),_0x1e5560=_0x45533b==='array',_0x12a821=!0x1,_0x45cc3c=_0x45533b==='function',_0x241b8d=this[_0x12ffaa(0x28f)](_0x45533b),_0x445f9b=this['_isPrimitiveWrapperType'](_0x45533b),_0x536c33=_0x241b8d||_0x445f9b,_0x2943ac={},_0x5cc79c=0x0,_0x5e7a19=!0x1,_0x5dc1a0,_0x26b99e=/^(([1-9]{1}[0-9]*)|0)$/;if(_0x2c7546[_0x12ffaa(0x227)]){if(_0x1e5560){if(_0x396633=_0x1810c9['length'],_0x396633>_0x2c7546[_0x12ffaa(0x1e3)]){for(_0x19f036=0x0,_0x37ba38=_0x2c7546[_0x12ffaa(0x1e3)],_0x5c41ed=_0x19f036;_0x5c41ed<_0x37ba38;_0x5c41ed++)_0x41636a['push'](_0x511889[_0x12ffaa(0x1da)](_0x529025,_0x1810c9,_0x45533b,_0x5c41ed,_0x2c7546));_0x5c006d['cappedElements']=!0x0;}else{for(_0x19f036=0x0,_0x37ba38=_0x396633,_0x5c41ed=_0x19f036;_0x5c41ed<_0x37ba38;_0x5c41ed++)_0x41636a['push'](_0x511889['_addProperty'](_0x529025,_0x1810c9,_0x45533b,_0x5c41ed,_0x2c7546));}_0x2c7546[_0x12ffaa(0x26d)]+=_0x41636a[_0x12ffaa(0x257)];}if(!(_0x45533b===_0x12ffaa(0x293)||_0x45533b==='undefined')&&!_0x241b8d&&_0x45533b!==_0x12ffaa(0x1db)&&_0x45533b!==_0x12ffaa(0x27a)&&_0x45533b!==_0x12ffaa(0x1fd)){var _0x14cb11=_0x4c5987['props']||_0x2c7546[_0x12ffaa(0x1e2)];if(this[_0x12ffaa(0x278)](_0x1810c9)?(_0x5c41ed=0x0,_0x1810c9[_0x12ffaa(0x21a)](function(_0x36d817){var _0x238c11=_0x12ffaa;if(_0x5cc79c++,_0x2c7546[_0x238c11(0x26d)]++,_0x5cc79c>_0x14cb11){_0x5e7a19=!0x0;return;}if(!_0x2c7546[_0x238c11(0x259)]&&_0x2c7546[_0x238c11(0x21f)]&&_0x2c7546[_0x238c11(0x26d)]>_0x2c7546[_0x238c11(0x1c0)]){_0x5e7a19=!0x0;return;}_0x41636a[_0x238c11(0x1f9)](_0x511889[_0x238c11(0x1da)](_0x529025,_0x1810c9,_0x238c11(0x1f5),_0x5c41ed++,_0x2c7546,function(_0x38081e){return function(){return _0x38081e;};}(_0x36d817)));})):this[_0x12ffaa(0x1cd)](_0x1810c9)&&_0x1810c9[_0x12ffaa(0x21a)](function(_0xbcc0fe,_0x5f49cf){var _0x4eb0de=_0x12ffaa;if(_0x5cc79c++,_0x2c7546['autoExpandPropertyCount']++,_0x5cc79c>_0x14cb11){_0x5e7a19=!0x0;return;}if(!_0x2c7546[_0x4eb0de(0x259)]&&_0x2c7546[_0x4eb0de(0x21f)]&&_0x2c7546[_0x4eb0de(0x26d)]>_0x2c7546[_0x4eb0de(0x1c0)]){_0x5e7a19=!0x0;return;}var _0x2a1875=_0x5f49cf['toString']();_0x2a1875[_0x4eb0de(0x257)]>0x64&&(_0x2a1875=_0x2a1875[_0x4eb0de(0x267)](0x0,0x64)+_0x4eb0de(0x1e6)),_0x41636a[_0x4eb0de(0x1f9)](_0x511889[_0x4eb0de(0x1da)](_0x529025,_0x1810c9,_0x4eb0de(0x238),_0x2a1875,_0x2c7546,function(_0x349c20){return function(){return _0x349c20;};}(_0xbcc0fe)));}),!_0x12a821){try{for(_0x274ceb in _0x1810c9)if(!(_0x1e5560&&_0x26b99e['test'](_0x274ceb))&&!this[_0x12ffaa(0x1c2)](_0x1810c9,_0x274ceb,_0x2c7546)){if(_0x5cc79c++,_0x2c7546[_0x12ffaa(0x26d)]++,_0x5cc79c>_0x14cb11){_0x5e7a19=!0x0;break;}if(!_0x2c7546[_0x12ffaa(0x259)]&&_0x2c7546[_0x12ffaa(0x21f)]&&_0x2c7546[_0x12ffaa(0x26d)]>_0x2c7546[_0x12ffaa(0x1c0)]){_0x5e7a19=!0x0;break;}_0x41636a[_0x12ffaa(0x1f9)](_0x511889['_addObjectProperty'](_0x529025,_0x2943ac,_0x1810c9,_0x45533b,_0x274ceb,_0x2c7546));}}catch{}if(_0x2943ac[_0x12ffaa(0x292)]=!0x0,_0x45cc3c&&(_0x2943ac[_0x12ffaa(0x20c)]=!0x0),!_0x5e7a19){var _0x135ef8=[][_0x12ffaa(0x1d7)](this[_0x12ffaa(0x226)](_0x1810c9))[_0x12ffaa(0x1d7)](this['_getOwnPropertySymbols'](_0x1810c9));for(_0x5c41ed=0x0,_0x396633=_0x135ef8[_0x12ffaa(0x257)];_0x5c41ed<_0x396633;_0x5c41ed++)if(_0x274ceb=_0x135ef8[_0x5c41ed],!(_0x1e5560&&_0x26b99e['test'](_0x274ceb['toString']()))&&!this['_blacklistedProperty'](_0x1810c9,_0x274ceb,_0x2c7546)&&!_0x2943ac[_0x12ffaa(0x24b)+_0x274ceb['toString']()]){if(_0x5cc79c++,_0x2c7546[_0x12ffaa(0x26d)]++,_0x5cc79c>_0x14cb11){_0x5e7a19=!0x0;break;}if(!_0x2c7546[_0x12ffaa(0x259)]&&_0x2c7546[_0x12ffaa(0x21f)]&&_0x2c7546['autoExpandPropertyCount']>_0x2c7546[_0x12ffaa(0x1c0)]){_0x5e7a19=!0x0;break;}_0x41636a[_0x12ffaa(0x1f9)](_0x511889[_0x12ffaa(0x21c)](_0x529025,_0x2943ac,_0x1810c9,_0x45533b,_0x274ceb,_0x2c7546));}}}}}if(_0x5c006d[_0x12ffaa(0x287)]=_0x45533b,_0x536c33?(_0x5c006d['value']=_0x1810c9[_0x12ffaa(0x273)](),this[_0x12ffaa(0x1ba)](_0x45533b,_0x5c006d,_0x2c7546,_0x4c5987)):_0x45533b===_0x12ffaa(0x1b9)?_0x5c006d[_0x12ffaa(0x20f)]=this[_0x12ffaa(0x24f)][_0x12ffaa(0x235)](_0x1810c9):_0x45533b===_0x12ffaa(0x1fd)?_0x5c006d[_0x12ffaa(0x20f)]=_0x1810c9[_0x12ffaa(0x28c)]():_0x45533b===_0x12ffaa(0x1e5)?_0x5c006d[_0x12ffaa(0x20f)]=this[_0x12ffaa(0x26c)]['call'](_0x1810c9):_0x45533b===_0x12ffaa(0x1b4)&&this[_0x12ffaa(0x1fa)]?_0x5c006d['value']=this[_0x12ffaa(0x1fa)][_0x12ffaa(0x1ec)][_0x12ffaa(0x28c)][_0x12ffaa(0x235)](_0x1810c9):!_0x2c7546[_0x12ffaa(0x227)]&&!(_0x45533b===_0x12ffaa(0x293)||_0x45533b===_0x12ffaa(0x1f3))&&(delete _0x5c006d[_0x12ffaa(0x20f)],_0x5c006d[_0x12ffaa(0x1cf)]=!0x0),_0x5e7a19&&(_0x5c006d[_0x12ffaa(0x291)]=!0x0),_0x5dc1a0=_0x2c7546['node'][_0x12ffaa(0x25a)],_0x2c7546[_0x12ffaa(0x1eb)][_0x12ffaa(0x25a)]=_0x5c006d,this['_treeNodePropertiesBeforeFullValue'](_0x5c006d,_0x2c7546),_0x41636a[_0x12ffaa(0x257)]){for(_0x5c41ed=0x0,_0x396633=_0x41636a[_0x12ffaa(0x257)];_0x5c41ed<_0x396633;_0x5c41ed++)_0x41636a[_0x5c41ed](_0x5c41ed);}_0x529025[_0x12ffaa(0x257)]&&(_0x5c006d[_0x12ffaa(0x1e2)]=_0x529025);}catch(_0x166c54){_0x1713c1(_0x166c54,_0x5c006d,_0x2c7546);}return this[_0x12ffaa(0x23b)](_0x1810c9,_0x5c006d),this[_0x12ffaa(0x21d)](_0x5c006d,_0x2c7546),_0x2c7546['node'][_0x12ffaa(0x25a)]=_0x5dc1a0,_0x2c7546[_0x12ffaa(0x204)]--,_0x2c7546['autoExpand']=_0x5d43f0,_0x2c7546[_0x12ffaa(0x21f)]&&_0x2c7546[_0x12ffaa(0x1ff)][_0x12ffaa(0x29c)](),_0x5c006d;}[_0x580cf2(0x274)](_0x15a2f5){var _0x3dc735=_0x580cf2;return Object[_0x3dc735(0x294)]?Object['getOwnPropertySymbols'](_0x15a2f5):[];}[_0x580cf2(0x278)](_0x9424f3){var _0x223148=_0x580cf2;return!!(_0x9424f3&&_0x215415[_0x223148(0x1f5)]&&this[_0x223148(0x1df)](_0x9424f3)===_0x223148(0x236)&&_0x9424f3[_0x223148(0x21a)]);}['_blacklistedProperty'](_0x148cb6,_0x4329c6,_0x5c6870){var _0x179a4c=_0x580cf2;return _0x5c6870[_0x179a4c(0x233)]?typeof _0x148cb6[_0x4329c6]=='function':!0x1;}[_0x580cf2(0x1e7)](_0x10e05e){var _0x56913d=_0x580cf2,_0x5b3420='';return _0x5b3420=typeof _0x10e05e,_0x5b3420===_0x56913d(0x22e)?this[_0x56913d(0x1df)](_0x10e05e)==='[object\\x20Array]'?_0x5b3420=_0x56913d(0x222):this[_0x56913d(0x1df)](_0x10e05e)===_0x56913d(0x25b)?_0x5b3420=_0x56913d(0x1b9):this[_0x56913d(0x1df)](_0x10e05e)===_0x56913d(0x1e0)?_0x5b3420=_0x56913d(0x1fd):_0x10e05e===null?_0x5b3420=_0x56913d(0x293):_0x10e05e[_0x56913d(0x1c8)]&&(_0x5b3420=_0x10e05e[_0x56913d(0x1c8)]['name']||_0x5b3420):_0x5b3420===_0x56913d(0x1f3)&&this[_0x56913d(0x271)]&&_0x10e05e instanceof this['_HTMLAllCollection']&&(_0x5b3420=_0x56913d(0x209)),_0x5b3420;}[_0x580cf2(0x1df)](_0x2430eb){var _0x2de4e4=_0x580cf2;return Object[_0x2de4e4(0x1ec)][_0x2de4e4(0x28c)]['call'](_0x2430eb);}['_isPrimitiveType'](_0x2254c7){var _0x717faf=_0x580cf2;return _0x2254c7===_0x717faf(0x285)||_0x2254c7==='string'||_0x2254c7==='number';}[_0x580cf2(0x298)](_0x33b761){var _0x5de3c4=_0x580cf2;return _0x33b761===_0x5de3c4(0x27e)||_0x33b761==='String'||_0x33b761===_0x5de3c4(0x286);}[_0x580cf2(0x1da)](_0x1403a4,_0x33b3c9,_0x5c5969,_0x4ca4d9,_0x1f9f89,_0x23e785){var _0x172523=this;return function(_0x552a4e){var _0x4ac5cf=_0x4050,_0x149bdc=_0x1f9f89[_0x4ac5cf(0x1eb)]['current'],_0xf3bf8e=_0x1f9f89[_0x4ac5cf(0x1eb)][_0x4ac5cf(0x246)],_0x289fa8=_0x1f9f89[_0x4ac5cf(0x1eb)][_0x4ac5cf(0x299)];_0x1f9f89['node'][_0x4ac5cf(0x299)]=_0x149bdc,_0x1f9f89[_0x4ac5cf(0x1eb)][_0x4ac5cf(0x246)]=typeof _0x4ca4d9=='number'?_0x4ca4d9:_0x552a4e,_0x1403a4[_0x4ac5cf(0x1f9)](_0x172523['_property'](_0x33b3c9,_0x5c5969,_0x4ca4d9,_0x1f9f89,_0x23e785)),_0x1f9f89[_0x4ac5cf(0x1eb)][_0x4ac5cf(0x299)]=_0x289fa8,_0x1f9f89[_0x4ac5cf(0x1eb)][_0x4ac5cf(0x246)]=_0xf3bf8e;};}['_addObjectProperty'](_0x45d005,_0x25a8bd,_0x2941ae,_0x334bb9,_0x2e1f95,_0x2c63f7,_0x346ff2){var _0x3393ba=_0x580cf2,_0x341c11=this;return _0x25a8bd[_0x3393ba(0x24b)+_0x2e1f95[_0x3393ba(0x28c)]()]=!0x0,function(_0x581781){var _0x374460=_0x3393ba,_0x3b6da8=_0x2c63f7['node'][_0x374460(0x25a)],_0x4ef2ee=_0x2c63f7[_0x374460(0x1eb)]['index'],_0x4fe5bb=_0x2c63f7[_0x374460(0x1eb)][_0x374460(0x299)];_0x2c63f7['node']['parent']=_0x3b6da8,_0x2c63f7[_0x374460(0x1eb)][_0x374460(0x246)]=_0x581781,_0x45d005[_0x374460(0x1f9)](_0x341c11[_0x374460(0x1f0)](_0x2941ae,_0x334bb9,_0x2e1f95,_0x2c63f7,_0x346ff2)),_0x2c63f7[_0x374460(0x1eb)][_0x374460(0x299)]=_0x4fe5bb,_0x2c63f7[_0x374460(0x1eb)][_0x374460(0x246)]=_0x4ef2ee;};}[_0x580cf2(0x1f0)](_0x949503,_0x40b535,_0x107e4c,_0x19820a,_0x5c53d8){var _0x2d5853=_0x580cf2,_0x5ab694=this;_0x5c53d8||(_0x5c53d8=function(_0x5f2fcc,_0x206d35){return _0x5f2fcc[_0x206d35];});var _0x1134e9=_0x107e4c['toString'](),_0x14b66d=_0x19820a[_0x2d5853(0x203)]||{},_0x42313b=_0x19820a[_0x2d5853(0x227)],_0x3e99cc=_0x19820a['isExpressionToEvaluate'];try{var _0x3a59ef=this[_0x2d5853(0x1cd)](_0x949503),_0x167d32=_0x1134e9;_0x3a59ef&&_0x167d32[0x0]==='\\x27'&&(_0x167d32=_0x167d32[_0x2d5853(0x1d2)](0x1,_0x167d32[_0x2d5853(0x257)]-0x2));var _0x1746b8=_0x19820a[_0x2d5853(0x203)]=_0x14b66d[_0x2d5853(0x24b)+_0x167d32];_0x1746b8&&(_0x19820a[_0x2d5853(0x227)]=_0x19820a[_0x2d5853(0x227)]+0x1),_0x19820a[_0x2d5853(0x259)]=!!_0x1746b8;var _0x8036e=typeof _0x107e4c=='symbol',_0x1e667b={'name':_0x8036e||_0x3a59ef?_0x1134e9:this[_0x2d5853(0x1bd)](_0x1134e9)};if(_0x8036e&&(_0x1e667b[_0x2d5853(0x1b4)]=!0x0),!(_0x40b535===_0x2d5853(0x222)||_0x40b535===_0x2d5853(0x1de))){var _0x36d41d=this[_0x2d5853(0x1d8)](_0x949503,_0x107e4c);if(_0x36d41d&&(_0x36d41d[_0x2d5853(0x231)]&&(_0x1e667b[_0x2d5853(0x262)]=!0x0),_0x36d41d[_0x2d5853(0x272)]&&!_0x1746b8&&!_0x19820a[_0x2d5853(0x29a)]))return _0x1e667b[_0x2d5853(0x261)]=!0x0,this[_0x2d5853(0x265)](_0x1e667b,_0x19820a),_0x1e667b;}var _0x1ab170;try{_0x1ab170=_0x5c53d8(_0x949503,_0x107e4c);}catch(_0x368958){return _0x1e667b={'name':_0x1134e9,'type':_0x2d5853(0x237),'error':_0x368958['message']},this[_0x2d5853(0x265)](_0x1e667b,_0x19820a),_0x1e667b;}var _0x84ca62=this[_0x2d5853(0x1e7)](_0x1ab170),_0x1ab3e7=this[_0x2d5853(0x28f)](_0x84ca62);if(_0x1e667b[_0x2d5853(0x287)]=_0x84ca62,_0x1ab3e7)this[_0x2d5853(0x265)](_0x1e667b,_0x19820a,_0x1ab170,function(){var _0x423481=_0x2d5853;_0x1e667b[_0x423481(0x20f)]=_0x1ab170[_0x423481(0x273)](),!_0x1746b8&&_0x5ab694[_0x423481(0x1ba)](_0x84ca62,_0x1e667b,_0x19820a,{});});else{var _0xa08ad1=_0x19820a[_0x2d5853(0x21f)]&&_0x19820a['level']<_0x19820a[_0x2d5853(0x27f)]&&_0x19820a[_0x2d5853(0x1ff)][_0x2d5853(0x268)](_0x1ab170)<0x0&&_0x84ca62!==_0x2d5853(0x24e)&&_0x19820a[_0x2d5853(0x26d)]<_0x19820a[_0x2d5853(0x1c0)];_0xa08ad1||_0x19820a[_0x2d5853(0x204)]<_0x42313b||_0x1746b8?(this['serialize'](_0x1e667b,_0x1ab170,_0x19820a,_0x1746b8||{}),this[_0x2d5853(0x23b)](_0x1ab170,_0x1e667b)):this['_processTreeNodeResult'](_0x1e667b,_0x19820a,_0x1ab170,function(){var _0x52fe44=_0x2d5853;_0x84ca62==='null'||_0x84ca62===_0x52fe44(0x1f3)||(delete _0x1e667b[_0x52fe44(0x20f)],_0x1e667b['capped']=!0x0);});}return _0x1e667b;}finally{_0x19820a[_0x2d5853(0x203)]=_0x14b66d,_0x19820a[_0x2d5853(0x227)]=_0x42313b,_0x19820a[_0x2d5853(0x259)]=_0x3e99cc;}}[_0x580cf2(0x1ba)](_0x48c102,_0x234116,_0x1ca502,_0x54835a){var _0x3aaaed=_0x580cf2,_0x133d8f=_0x54835a[_0x3aaaed(0x1c5)]||_0x1ca502['strLength'];if((_0x48c102===_0x3aaaed(0x1dc)||_0x48c102===_0x3aaaed(0x1db))&&_0x234116['value']){let _0x5a33f7=_0x234116[_0x3aaaed(0x20f)][_0x3aaaed(0x257)];_0x1ca502['allStrLength']+=_0x5a33f7,_0x1ca502[_0x3aaaed(0x22b)]>_0x1ca502[_0x3aaaed(0x266)]?(_0x234116['capped']='',delete _0x234116[_0x3aaaed(0x20f)]):_0x5a33f7>_0x133d8f&&(_0x234116['capped']=_0x234116[_0x3aaaed(0x20f)][_0x3aaaed(0x1d2)](0x0,_0x133d8f),delete _0x234116['value']);}}[_0x580cf2(0x1cd)](_0x447e6b){var _0x14a105=_0x580cf2;return!!(_0x447e6b&&_0x215415['Map']&&this[_0x14a105(0x1df)](_0x447e6b)==='[object\\x20Map]'&&_0x447e6b[_0x14a105(0x21a)]);}[_0x580cf2(0x1bd)](_0x1bb517){var _0x47b23d=_0x580cf2;if(_0x1bb517[_0x47b23d(0x24a)](/^\\d+$/))return _0x1bb517;var _0x2659aa;try{_0x2659aa=JSON[_0x47b23d(0x1bf)](''+_0x1bb517);}catch{_0x2659aa='\\x22'+this[_0x47b23d(0x1df)](_0x1bb517)+'\\x22';}return _0x2659aa[_0x47b23d(0x24a)](/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?_0x2659aa=_0x2659aa[_0x47b23d(0x1d2)](0x1,_0x2659aa[_0x47b23d(0x257)]-0x2):_0x2659aa=_0x2659aa[_0x47b23d(0x288)](/'/g,'\\x5c\\x27')[_0x47b23d(0x288)](/\\\\"/g,'\\x22')[_0x47b23d(0x288)](/(^"|"$)/g,'\\x27'),_0x2659aa;}[_0x580cf2(0x265)](_0x4a636c,_0x5984ec,_0x2f6cd2,_0x457c04){var _0x569e80=_0x580cf2;this[_0x569e80(0x27c)](_0x4a636c,_0x5984ec),_0x457c04&&_0x457c04(),this[_0x569e80(0x23b)](_0x2f6cd2,_0x4a636c),this['_treeNodePropertiesAfterFullValue'](_0x4a636c,_0x5984ec);}['_treeNodePropertiesBeforeFullValue'](_0x8e1725,_0x5a6fe4){var _0x4aea0f=_0x580cf2;this[_0x4aea0f(0x247)](_0x8e1725,_0x5a6fe4),this['_setNodeQueryPath'](_0x8e1725,_0x5a6fe4),this['_setNodeExpressionPath'](_0x8e1725,_0x5a6fe4),this[_0x4aea0f(0x245)](_0x8e1725,_0x5a6fe4);}[_0x580cf2(0x247)](_0x53059c,_0x46a130){}[_0x580cf2(0x211)](_0x9a1c3c,_0x4ddcc8){}[_0x580cf2(0x208)](_0x153d8f,_0x1b813e){}[_0x580cf2(0x1fb)](_0x166dd0){var _0x4af6c8=_0x580cf2;return _0x166dd0===this[_0x4af6c8(0x20b)];}[_0x580cf2(0x21d)](_0xb25851,_0x12000f){var _0x35c7b8=_0x580cf2;this['_setNodeLabel'](_0xb25851,_0x12000f),this['_setNodeExpandableState'](_0xb25851),_0x12000f[_0x35c7b8(0x20d)]&&this[_0x35c7b8(0x21b)](_0xb25851),this[_0x35c7b8(0x297)](_0xb25851,_0x12000f),this[_0x35c7b8(0x232)](_0xb25851,_0x12000f),this[_0x35c7b8(0x229)](_0xb25851);}[_0x580cf2(0x23b)](_0x3a692c,_0x34a849){var _0xe0d5e7=_0x580cf2;let _0x3b0162;try{_0x215415[_0xe0d5e7(0x1dd)]&&(_0x3b0162=_0x215415[_0xe0d5e7(0x1dd)]['error'],_0x215415['console']['error']=function(){}),_0x3a692c&&typeof _0x3a692c[_0xe0d5e7(0x257)]==_0xe0d5e7(0x1f1)&&(_0x34a849[_0xe0d5e7(0x257)]=_0x3a692c[_0xe0d5e7(0x257)]);}catch{}finally{_0x3b0162&&(_0x215415['console'][_0xe0d5e7(0x230)]=_0x3b0162);}if(_0x34a849[_0xe0d5e7(0x287)]===_0xe0d5e7(0x1f1)||_0x34a849[_0xe0d5e7(0x287)]===_0xe0d5e7(0x286)){if(isNaN(_0x34a849[_0xe0d5e7(0x20f)]))_0x34a849['nan']=!0x0,delete _0x34a849[_0xe0d5e7(0x20f)];else switch(_0x34a849['value']){case Number[_0xe0d5e7(0x201)]:_0x34a849[_0xe0d5e7(0x22c)]=!0x0,delete _0x34a849['value'];break;case Number[_0xe0d5e7(0x1f6)]:_0x34a849['negativeInfinity']=!0x0,delete _0x34a849[_0xe0d5e7(0x20f)];break;case 0x0:this['_isNegativeZero'](_0x34a849['value'])&&(_0x34a849['negativeZero']=!0x0);break;}}else _0x34a849['type']===_0xe0d5e7(0x24e)&&typeof _0x3a692c[_0xe0d5e7(0x279)]=='string'&&_0x3a692c[_0xe0d5e7(0x279)]&&_0x34a849[_0xe0d5e7(0x279)]&&_0x3a692c['name']!==_0x34a849[_0xe0d5e7(0x279)]&&(_0x34a849[_0xe0d5e7(0x270)]=_0x3a692c['name']);}[_0x580cf2(0x215)](_0x48d840){var _0x58b943=_0x580cf2;return 0x1/_0x48d840===Number[_0x58b943(0x1f6)];}[_0x580cf2(0x21b)](_0x52cab4){var _0x2f97cc=_0x580cf2;!_0x52cab4[_0x2f97cc(0x1e2)]||!_0x52cab4[_0x2f97cc(0x1e2)][_0x2f97cc(0x257)]||_0x52cab4[_0x2f97cc(0x287)]===_0x2f97cc(0x222)||_0x52cab4['type']===_0x2f97cc(0x238)||_0x52cab4['type']==='Set'||_0x52cab4[_0x2f97cc(0x1e2)]['sort'](function(_0x28b6c8,_0x3277ac){var _0x574835=_0x2f97cc,_0x8ddd5a=_0x28b6c8[_0x574835(0x279)][_0x574835(0x1b5)](),_0x5c5bbd=_0x3277ac['name'][_0x574835(0x1b5)]();return _0x8ddd5a<_0x5c5bbd?-0x1:_0x8ddd5a>_0x5c5bbd?0x1:0x0;});}['_addFunctionsNode'](_0x214a8b,_0x2c6909){var _0x9c1f6b=_0x580cf2;if(!(_0x2c6909['noFunctions']||!_0x214a8b['props']||!_0x214a8b[_0x9c1f6b(0x1e2)][_0x9c1f6b(0x257)])){for(var _0x4e67b9=[],_0x5efe0a=[],_0x1f2f67=0x0,_0x44506b=_0x214a8b['props']['length'];_0x1f2f67<_0x44506b;_0x1f2f67++){var _0x479203=_0x214a8b['props'][_0x1f2f67];_0x479203[_0x9c1f6b(0x287)]===_0x9c1f6b(0x24e)?_0x4e67b9[_0x9c1f6b(0x1f9)](_0x479203):_0x5efe0a[_0x9c1f6b(0x1f9)](_0x479203);}if(!(!_0x5efe0a[_0x9c1f6b(0x257)]||_0x4e67b9['length']<=0x1)){_0x214a8b[_0x9c1f6b(0x1e2)]=_0x5efe0a;var _0x31b386={'functionsNode':!0x0,'props':_0x4e67b9};this[_0x9c1f6b(0x247)](_0x31b386,_0x2c6909),this[_0x9c1f6b(0x208)](_0x31b386,_0x2c6909),this[_0x9c1f6b(0x240)](_0x31b386),this[_0x9c1f6b(0x245)](_0x31b386,_0x2c6909),_0x31b386['id']+='\\x20f',_0x214a8b[_0x9c1f6b(0x1e2)][_0x9c1f6b(0x241)](_0x31b386);}}}[_0x580cf2(0x232)](_0x3980e5,_0x378fb1){}[_0x580cf2(0x240)](_0x1bbee1){}[_0x580cf2(0x22f)](_0x59cca2){var _0x3a8c68=_0x580cf2;return Array[_0x3a8c68(0x249)](_0x59cca2)||typeof _0x59cca2==_0x3a8c68(0x22e)&&this[_0x3a8c68(0x1df)](_0x59cca2)==='[object\\x20Array]';}[_0x580cf2(0x245)](_0x559321,_0xc8a8c6){}[_0x580cf2(0x229)](_0x4d0efb){var _0x5200be=_0x580cf2;delete _0x4d0efb[_0x5200be(0x1e4)],delete _0x4d0efb['_hasSetOnItsPath'],delete _0x4d0efb[_0x5200be(0x206)];}[_0x580cf2(0x29d)](_0x5bbc19,_0x501b71){}}let _0x55375b=new _0x39411a(),_0x5692c0={'props':0x64,'elements':0x64,'strLength':0x400*0x32,'totalStrLength':0x400*0x32,'autoExpandLimit':0x1388,'autoExpandMaxDepth':0xa},_0x223e3e={'props':0x5,'elements':0x5,'strLength':0x100,'totalStrLength':0x100*0x3,'autoExpandLimit':0x1e,'autoExpandMaxDepth':0x2};function _0x4ab6c9(_0x4f9b32,_0x2d57a6,_0x517fc1,_0x14445b,_0x4f8f22,_0x7c9ae3){var _0x296ff5=_0x580cf2;let _0x27eb2b,_0xb7c039;try{_0xb7c039=_0x19745e(),_0x27eb2b=_0x414e35[_0x2d57a6],!_0x27eb2b||_0xb7c039-_0x27eb2b['ts']>0x1f4&&_0x27eb2b['count']&&_0x27eb2b[_0x296ff5(0x1b8)]/_0x27eb2b[_0x296ff5(0x212)]<0x64?(_0x414e35[_0x2d57a6]=_0x27eb2b={'count':0x0,'time':0x0,'ts':_0xb7c039},_0x414e35[_0x296ff5(0x281)]={}):_0xb7c039-_0x414e35[_0x296ff5(0x281)]['ts']>0x32&&_0x414e35[_0x296ff5(0x281)]['count']&&_0x414e35[_0x296ff5(0x281)][_0x296ff5(0x1b8)]/_0x414e35['hits'][_0x296ff5(0x212)]<0x64&&(_0x414e35[_0x296ff5(0x281)]={});let _0x4f1fd0=[],_0x165369=_0x27eb2b[_0x296ff5(0x282)]||_0x414e35[_0x296ff5(0x281)][_0x296ff5(0x282)]?_0x223e3e:_0x5692c0,_0x341129=_0x14c918=>{var _0x11bf1b=_0x296ff5;let _0x1db7ec={};return _0x1db7ec['props']=_0x14c918['props'],_0x1db7ec[_0x11bf1b(0x1e3)]=_0x14c918[_0x11bf1b(0x1e3)],_0x1db7ec['strLength']=_0x14c918[_0x11bf1b(0x1c5)],_0x1db7ec[_0x11bf1b(0x266)]=_0x14c918[_0x11bf1b(0x266)],_0x1db7ec[_0x11bf1b(0x1c0)]=_0x14c918[_0x11bf1b(0x1c0)],_0x1db7ec[_0x11bf1b(0x27f)]=_0x14c918[_0x11bf1b(0x27f)],_0x1db7ec['sortProps']=!0x1,_0x1db7ec[_0x11bf1b(0x233)]=!_0x243cf5,_0x1db7ec[_0x11bf1b(0x227)]=0x1,_0x1db7ec[_0x11bf1b(0x204)]=0x0,_0x1db7ec[_0x11bf1b(0x220)]='root_exp_id',_0x1db7ec[_0x11bf1b(0x1f2)]=_0x11bf1b(0x214),_0x1db7ec['autoExpand']=!0x0,_0x1db7ec[_0x11bf1b(0x1ff)]=[],_0x1db7ec[_0x11bf1b(0x26d)]=0x0,_0x1db7ec[_0x11bf1b(0x29a)]=!0x0,_0x1db7ec['allStrLength']=0x0,_0x1db7ec[_0x11bf1b(0x1eb)]={'current':void 0x0,'parent':void 0x0,'index':0x0},_0x1db7ec;};for(var _0x1efdc8=0x0;_0x1efdc8<_0x4f8f22[_0x296ff5(0x257)];_0x1efdc8++)_0x4f1fd0[_0x296ff5(0x1f9)](_0x55375b[_0x296ff5(0x248)]({'timeNode':_0x4f9b32==='time'||void 0x0},_0x4f8f22[_0x1efdc8],_0x341129(_0x165369),{}));if(_0x4f9b32===_0x296ff5(0x1bb)){let _0x1692d3=Error[_0x296ff5(0x244)];try{Error['stackTraceLimit']=0x1/0x0,_0x4f1fd0[_0x296ff5(0x1f9)](_0x55375b['serialize']({'stackNode':!0x0},new Error()[_0x296ff5(0x252)],_0x341129(_0x165369),{'strLength':0x1/0x0}));}finally{Error[_0x296ff5(0x244)]=_0x1692d3;}}return{'method':_0x296ff5(0x25f),'version':_0x12e098,'args':[{'ts':_0x517fc1,'session':_0x14445b,'args':_0x4f1fd0,'id':_0x2d57a6,'context':_0x7c9ae3}]};}catch(_0x315eb1){return{'method':_0x296ff5(0x25f),'version':_0x12e098,'args':[{'ts':_0x517fc1,'session':_0x14445b,'args':[{'type':_0x296ff5(0x237),'error':_0x315eb1&&_0x315eb1[_0x296ff5(0x295)]}],'id':_0x2d57a6,'context':_0x7c9ae3}]};}finally{try{if(_0x27eb2b&&_0xb7c039){let _0xe9e58d=_0x19745e();_0x27eb2b[_0x296ff5(0x212)]++,_0x27eb2b[_0x296ff5(0x1b8)]+=_0x1e922d(_0xb7c039,_0xe9e58d),_0x27eb2b['ts']=_0xe9e58d,_0x414e35['hits'][_0x296ff5(0x212)]++,_0x414e35[_0x296ff5(0x281)]['time']+=_0x1e922d(_0xb7c039,_0xe9e58d),_0x414e35[_0x296ff5(0x281)]['ts']=_0xe9e58d,(_0x27eb2b['count']>0x32||_0x27eb2b[_0x296ff5(0x1b8)]>0x64)&&(_0x27eb2b[_0x296ff5(0x282)]=!0x0),(_0x414e35[_0x296ff5(0x281)]['count']>0x3e8||_0x414e35[_0x296ff5(0x281)][_0x296ff5(0x1b8)]>0x12c)&&(_0x414e35[_0x296ff5(0x281)][_0x296ff5(0x282)]=!0x0);}}catch{}}}return _0x4ab6c9;}function _0x3ba1(){var _0x3cb73c=['set','_addLoadNode','noFunctions','1206340CLTvMI','call','[object\\x20Set]','unknown','Map','4195960EqFetw','','_additionalMetadata','timeEnd','_connecting','NEXT_RUNTIME','getWebSocketClass','_setNodeExpandableState','unshift','_reconnectTimeout','2487450WbCORR','stackTraceLimit','_setNodePermissions','index','_setNodeId','serialize','isArray','match','_p_','_sendErrorMessage','now','function','_dateToString','dockerizedApp','join','stack','hasOwnProperty','getOwnPropertyNames','956202PGyymO','disabledTrace','length','_connected','isExpressionToEvaluate','current','[object\\x20Date]','60394','pathToFileURL','close','log','26929djpwuv','getter','setter','location','\\x20server','_processTreeNodeResult','totalStrLength','slice','indexOf','getPrototypeOf','127.0.0.1','_console_ninja','_regExpToString','autoExpandPropertyCount','data','url','funcName','_HTMLAllCollection','get','valueOf','_getOwnPropertySymbols','1.0.0','next.js','timeStamp','_isSet','name','Buffer','coverage','_treeNodePropertiesBeforeFullValue','parse','Boolean','autoExpandMaxDepth','_inBrowser','hits','reduceLimits','path','26QMRMjI','boolean','Number','type','replace','angular','_consoleNinjaAllowedToStart','split','toString','global','logger\\x20websocket\\x20error','_isPrimitiveType','_WebSocketClass','cappedProps','_p_length','null','getOwnPropertySymbols','message','create','_addFunctionsNode','_isPrimitiveWrapperType','parent','resolveGetters','map','pop','_setNodeExpressionPath','method','getOwnPropertyDescriptor','21533868gqWHvM','onopen','symbol','toLowerCase','','reload','time','date','_capIfString','trace','defineProperty','_propertyName','host','stringify','autoExpandLimit','env','_blacklistedProperty','_connectAttemptCount','warn','strLength',':logPointId:','failed\\x20to\\x20find\\x20and\\x20load\\x20WebSocket','constructor','_maxConnectAttemptCount','https://tinyurl.com/37x8b79t','_WebSocket','1712667053518','_isMap','bind','capped','versions','\\x20browser','substr','_connectToHostNow','astro','2696crpfQW','enumerable','concat','_getOwnPropertyDescriptor','edge','_addProperty','String','string','console','Error','_objectToString','[object\\x20BigInt]','_ws','props','elements','_hasSymbolPropertyOnItsPath','RegExp','...','_type','disabledLog','_inNextEdge','_socket','node','prototype','angular','_allowedToSend','_console_ninja_session','_property','number','rootExpression','undefined','process','Set','NEGATIVE_INFINITY','nodeModules','Console\\x20Ninja\\x20failed\\x20to\\x20send\\x20logs,\\x20restarting\\x20the\\x20process\\x20may\\x20help;\\x20also\\x20see\\x20','push','_Symbol','_isUndefined','catch','bigint','onerror','autoExpandPreviousObjects','ws://','POSITIVE_INFINITY','port','expressionsToEvaluate','level','hrtime','_hasMapOnItsPath','unref','_setNodeLabel','HTMLAllCollection',["localhost","127.0.0.1","example.cypress.io","LAPTOP-1V5HLGOD","172.27.80.1","192.168.56.1","10.0.0.19"],'_undefined','_p_name','sortProps','elapsed','value','74603ihYVjm','_setNodeQueryPath','count','_attemptToReconnectShortly','root_exp','_isNegativeZero','readyState','_allowedToConnectOnSend','hostname','send','forEach','_sortProps','_addObjectProperty','_treeNodePropertiesAfterFullValue','__es'+'Module','autoExpand','expId','then','array','default','performance','perf_hooks','_getOwnPropertyNames','depth','WebSocket','_cleanNode','onclose','allStrLength','positiveInfinity','ws/index.js','object','_isArray','error'];_0x3ba1=function(){return _0x3cb73c;};return _0x3ba1();}function _0x4050(_0x1c8374,_0x5de145){var _0x3ba176=_0x3ba1();return _0x4050=function(_0x4050b6,_0x21c3f2){_0x4050b6=_0x4050b6-0x1b2;var _0x778d89=_0x3ba176[_0x4050b6];return _0x778d89;},_0x4050(_0x1c8374,_0x5de145);}((_0x487bd,_0x5c4a99,_0x4c2d22,_0x10b48f,_0x227054,_0x4f59aa,_0x4c070f,_0x4250b1,_0x4da373,_0x1553fd)=>{var _0x226a79=_0x3e00e0;if(_0x487bd[_0x226a79(0x26b)])return _0x487bd[_0x226a79(0x26b)];if(!J(_0x487bd,_0x4250b1,_0x227054))return _0x487bd[_0x226a79(0x26b)]={'consoleLog':()=>{},'consoleTrace':()=>{},'consoleTime':()=>{},'consoleTimeEnd':()=>{},'autoLog':()=>{},'autoLogMany':()=>{},'autoTraceMany':()=>{},'coverage':()=>{},'autoTrace':()=>{},'autoTime':()=>{},'autoTimeEnd':()=>{}},_0x487bd[_0x226a79(0x26b)];let _0x103977=W(_0x487bd),_0x287de0=_0x103977[_0x226a79(0x20e)],_0x42af2b=_0x103977['timeStamp'],_0x49bbf3=_0x103977['now'],_0xe07dc4={'hits':{},'ts':{}},_0x4bdb46=Y(_0x487bd,_0x4da373,_0xe07dc4,_0x4f59aa),_0x5b442d=_0x51c231=>{_0xe07dc4['ts'][_0x51c231]=_0x42af2b();},_0x1fa9ee=(_0x2bf05a,_0x3b55dd)=>{var _0x50ccc1=_0x226a79;let _0x26b57d=_0xe07dc4['ts'][_0x3b55dd];if(delete _0xe07dc4['ts'][_0x3b55dd],_0x26b57d){let _0x2d3478=_0x287de0(_0x26b57d,_0x42af2b());_0x20f993(_0x4bdb46(_0x50ccc1(0x1b8),_0x2bf05a,_0x49bbf3(),_0x4acb65,[_0x2d3478],_0x3b55dd));}},_0x842b9b=_0x272ce1=>_0x185cc5=>{var _0x38e8e3=_0x226a79;try{_0x5b442d(_0x185cc5),_0x272ce1(_0x185cc5);}finally{_0x487bd[_0x38e8e3(0x1dd)]['time']=_0x272ce1;}},_0x2d0550=_0x54edb2=>_0x4db119=>{var _0x5b39c3=_0x226a79;try{let [_0x33c90b,_0x3198b1]=_0x4db119[_0x5b39c3(0x28b)](_0x5b39c3(0x1c6));_0x1fa9ee(_0x3198b1,_0x33c90b),_0x54edb2(_0x33c90b);}finally{_0x487bd['console'][_0x5b39c3(0x23c)]=_0x54edb2;}};_0x487bd[_0x226a79(0x26b)]={'consoleLog':(_0x2a467d,_0x10253c)=>{var _0xb052d=_0x226a79;_0x487bd['console']['log'][_0xb052d(0x279)]!==_0xb052d(0x1e8)&&_0x20f993(_0x4bdb46('log',_0x2a467d,_0x49bbf3(),_0x4acb65,_0x10253c));},'consoleTrace':(_0x20e2bb,_0x4de0d7)=>{var _0x28e452=_0x226a79;_0x487bd[_0x28e452(0x1dd)][_0x28e452(0x25f)][_0x28e452(0x279)]!==_0x28e452(0x256)&&_0x20f993(_0x4bdb46(_0x28e452(0x1bb),_0x20e2bb,_0x49bbf3(),_0x4acb65,_0x4de0d7));},'consoleTime':()=>{var _0x24e2e1=_0x226a79;_0x487bd['console'][_0x24e2e1(0x1b8)]=_0x842b9b(_0x487bd[_0x24e2e1(0x1dd)][_0x24e2e1(0x1b8)]);},'consoleTimeEnd':()=>{var _0x3c3822=_0x226a79;_0x487bd['console'][_0x3c3822(0x23c)]=_0x2d0550(_0x487bd[_0x3c3822(0x1dd)][_0x3c3822(0x23c)]);},'autoLog':(_0x39acfb,_0x3c947a)=>{var _0x53b01d=_0x226a79;_0x20f993(_0x4bdb46(_0x53b01d(0x25f),_0x3c947a,_0x49bbf3(),_0x4acb65,[_0x39acfb]));},'autoLogMany':(_0x5c0f7,_0xd934fd)=>{var _0x365320=_0x226a79;_0x20f993(_0x4bdb46(_0x365320(0x25f),_0x5c0f7,_0x49bbf3(),_0x4acb65,_0xd934fd));},'autoTrace':(_0x543ec0,_0x471149)=>{_0x20f993(_0x4bdb46('trace',_0x471149,_0x49bbf3(),_0x4acb65,[_0x543ec0]));},'autoTraceMany':(_0x7a10e6,_0x5bcec8)=>{var _0x512abc=_0x226a79;_0x20f993(_0x4bdb46(_0x512abc(0x1bb),_0x7a10e6,_0x49bbf3(),_0x4acb65,_0x5bcec8));},'autoTime':(_0x229ff6,_0x12be8f,_0x538b55)=>{_0x5b442d(_0x538b55);},'autoTimeEnd':(_0x12ab50,_0x1f3a17,_0x210e06)=>{_0x1fa9ee(_0x1f3a17,_0x210e06);},'coverage':_0x37d67d=>{var _0x6e1486=_0x226a79;_0x20f993({'method':_0x6e1486(0x27b),'version':_0x4f59aa,'args':[{'id':_0x37d67d}]});}};let _0x20f993=b(_0x487bd,_0x5c4a99,_0x4c2d22,_0x10b48f,_0x227054,_0x1553fd),_0x4acb65=_0x487bd[_0x226a79(0x1ef)];return _0x487bd[_0x226a79(0x26b)];})(globalThis,_0x3e00e0(0x26a),_0x3e00e0(0x25c),"c:\\\\Users\\\\gatit\\\\.vscode\\\\extensions\\\\wallabyjs.console-ninja-1.0.298\\\\node_modules",_0x3e00e0(0x1ed),_0x3e00e0(0x275),_0x3e00e0(0x1cc),_0x3e00e0(0x20a),_0x3e00e0(0x1b6),_0x3e00e0(0x23a));`)}catch{}}function O$(t,...e){try{k$().consoleLog(t,e)}catch{}return e}function F$(t,e){if(t&1){let n=qt();v(0,"tr",14)(1,"td"),S(2),I(),v(3,"td"),S(4),I(),v(5,"td"),S(6),I(),v(7,"td"),S(8),I(),v(9,"td"),S(10),I(),v(11,"td")(12,"button",15),Ie("click",function(){let i=$t(n).$implicit,s=nt(2);return Ht(s.setCurrentTransaccion(i))}),S(13,"Seleccionar"),I()()()}if(t&2){let n=e.$implicit;Ts("id",n.id),q(2),Dt(n.fecha),q(2),Dt(n.precio),q(2),Dt(n.metodoPago),q(2),Dt(n.coche),q(2),Dt(n.cliente)}}function V$(t,e){if(t&1&&(v(0,"table",12)(1,"thead")(2,"tr")(3,"th"),S(4,"Fecha"),I(),v(5,"th"),S(6,"Precio"),I(),v(7,"th"),S(8,"Metodo de Pago"),I(),v(9,"th"),S(10,"Coche"),I(),v(11,"th"),S(12,"Cliente"),I()()(),v(13,"tbody"),sn(14,F$,14,6,"tr",13),I()()),t&2){let n=nt();q(14),ye("ngForOf",n.transacciones)}}function L$(t,e){t&1&&on(0,"app-loader")}var ak=(()=>{let e=class e{constructor(r){this.transaccionService=r,this.isLoading=!0,this.transacciones=[],this.currentTransaccion=new Os({fecha:new Date().toLocaleString(),precio:0,metodoPago:"",coche:"",cliente:"",tipo:""})}ngOnInit(){this.updateTransacciones()}updateTransacciones(){return g(this,null,function*(){this.isLoading=!0,this.transacciones=yield this.transaccionService.getTransacciones(),this.isLoading=!1})}updateTransaccion(){return g(this,null,function*(){yield this.transaccionService.updateTransaccion(this.currentTransaccion),this.resetCurrentTransaccion(),yield this.updateTransacciones()})}setCurrentTransaccion(r){this.currentTransaccion=r}resetCurrentTransaccion(){this.currentTransaccion=new Os({fecha:new Date().toLocaleString(),precio:0,metodoPago:"",coche:"",cliente:"",tipo:""})}};e.\u0275fac=function(i){return new(i||e)(te(Jg))},e.\u0275cmp=tn({type:e,selectors:[["app-transacciones"]],decls:23,vars:3,consts:[[1,"page"],[1,"row","reverse"],[1,"input-column"],[1,"input-row"],[3,"ngModelChange","ngModel"],["value","efectivo"],["value","credito"],["value","debito"],[1,"btn","upd",3,"click"],[1,"table-column"],["class","table",4,"ngIf"],[4,"ngIf"],[1,"table"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],[1,"btn","btn-primary",3,"click"]],template:function(i,s){i&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),S(4,"Actualizar transaccion"),I(),v(5,"div",3)(6,"label"),S(7," M\xE9todo de pago "),v(8,"select",4),cn("ngModelChange",function(a){return fn(s.currentTransaccion.metodoPago,a)||(s.currentTransaccion.metodoPago=a),a}),v(9,"option",5),S(10,"Efectivo"),I(),v(11,"option",6),S(12,"Credito"),I(),v(13,"option",7),S(14,"Debito"),I()()()(),v(15,"div")(16,"button",8),Ie("click",function(){return s.updateTransaccion()}),S(17,"Actualizar"),I()()(),v(18,"div",9)(19,"h2"),S(20,"Transacciones"),I(),sn(21,V$,15,1,"table",10)(22,L$,1,0,"app-loader",11),I()()()),i&2&&(q(8),an("ngModel",s.currentTransaccion.metodoPago),q(13),ye("ngIf",!s.isLoading),q(),ye("ngIf",s.isLoading))},dependencies:[ua,da,sm,om,vc,yc,mo,wc]});let t=e;return t})();var ad=class{constructor(e){this.id="",this.nombre="",this.apellidos="",this.email="",this.telefono="",this.coches=[],this.transacciones=[],this.nombre=e.nombre,this.apellidos=e.apellidos,this.email=e.email,this.telefono=e.telefono}};var ck=(()=>{let e=class e{constructor(r){this.firestore=r}getClientes(){return g(this,null,function*(){return yield this.parseData(this.firestore.collection("clientes").snapshotChanges())})}getClienteById(r){return g(this,null,function*(){return(yield this.parseData(this.firestore.collection("clientes",s=>s.where("id","==",r)).snapshotChanges()))[0]})}parseData(r){let i=[];return new Promise(s=>{r.subscribe(o=>{i=o.map(a=>ie(A({},a.payload.doc.data()),{id:a.payload.doc.id})),s(i)})})}createCliente(r){return g(this,null,function*(){return yield this.firestore.collection("clientes").add(Object.assign({},r))})}updateCliente(r){return g(this,null,function*(){yield this.firestore.doc("clientes/"+r.id).update(r)})}deleteCliente(r){return g(this,null,function*(){yield this.firestore.doc("clientes/"+r).delete()})}addCoche(r,i){return g(this,null,function*(){let s=yield this.getClienteById(r);s.coches.push(i),yield this.updateCliente(s)})}removeCoche(r,i){return g(this,null,function*(){let s=yield this.getClienteById(r);s.coches=s.coches.filter(o=>o!==i),yield this.updateCliente(s)})}addTransaccion(r,i){return g(this,null,function*(){let s=yield this.getClienteById(r);s.transacciones.push(i),yield this.updateCliente(s)})}};e.\u0275fac=function(i){return new(i||e)(b(mc))},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function B$(t,e){t&1&&(v(0,"h2"),S(1,"A\xF1adir cliente"),I())}function U$(t,e){t&1&&(v(0,"h2"),S(1,"Modificar cliente"),I())}function $$(t,e){if(t&1){let n=qt();v(0,"div")(1,"button",12),Ie("click",function(){$t(n);let i=nt();return Ht(i.createCliente())}),S(2,"A\xF1adir"),I()()}}function H$(t,e){if(t&1){let n=qt();v(0,"div")(1,"button",13),Ie("click",function(){$t(n);let i=nt();return Ht(i.updateCliente())}),S(2," Modificar "),I()()}}function q$(t,e){if(t&1){let n=qt();v(0,"div")(1,"button",14),Ie("click",function(){$t(n);let i=nt();return Ht(i.deleteCliente())}),S(2," Eliminar "),I()()}}function G$(t,e){if(t&1){let n=qt();v(0,"div")(1,"button",12),Ie("click",function(){$t(n);let i=nt();return Ht(i.resetCurrentCliente())}),S(2," A\xF1adir nuevo "),I()()}}function z$(t,e){if(t&1){let n=qt();v(0,"tr",17)(1,"td"),S(2),I(),v(3,"td"),S(4),I(),v(5,"td"),S(6),I(),v(7,"td"),S(8),I(),v(9,"td")(10,"button",18),Ie("click",function(){let i=$t(n).$implicit,s=nt(2);return Ht(s.setCurrentCliente(i))}),S(11," Editar "),I()()()}if(t&2){let n=e.$implicit;Ts("id",n.id),q(2),Dt(n.nombre),q(2),Dt(n.apellidos),q(2),Dt(n.email),q(2),Dt(n.telefono)}}function W$(t,e){if(t&1&&(v(0,"table",15)(1,"thead")(2,"tr")(3,"th"),S(4,"Nombre"),I(),v(5,"th"),S(6,"Apellidos"),I(),v(7,"th"),S(8,"Email"),I(),v(9,"th"),S(10,"Telefono"),I(),v(11,"th"),S(12,"Acciones"),I()()(),v(13,"tbody"),sn(14,z$,12,5,"tr",16),I()()),t&2){let n=nt();q(14),ye("ngForOf",n.clientes)}}function K$(t,e){t&1&&on(0,"app-loader")}var lk=(()=>{let e=class e{constructor(r){this.clienteService=r,this.isLoading=!0,this.state=Yn.create,this.MODES=Yn,this.clientes=[],this.currentCliente=new ad({nombre:"",apellidos:"",email:"",telefono:""})}ngOnInit(){this.updateClientes()}updateClientes(){return g(this,null,function*(){this.isLoading=!0,this.clientes=yield this.clienteService.getClientes(),this.isLoading=!1})}createCliente(){return g(this,null,function*(){yield this.clienteService.createCliente(this.currentCliente),this.resetCurrentCliente(),yield this.updateClientes()})}updateCliente(){return g(this,null,function*(){yield this.clienteService.updateCliente(this.currentCliente),this.resetCurrentCliente(),yield this.updateClientes()})}deleteCliente(){return g(this,null,function*(){yield this.clienteService.deleteCliente(this.currentCliente.id),yield this.updateClientes()})}setCurrentCliente(r){this.currentCliente=r,this.state=Yn.select}resetCurrentCliente(){this.currentCliente=new ad({nombre:"",apellidos:"",email:"",telefono:""}),this.state=Yn.create}};e.\u0275fac=function(i){return new(i||e)(te(ck))},e.\u0275cmp=tn({type:e,selectors:[["app-clientes"]],decls:33,vars:12,consts:[[1,"page"],[1,"row"],[1,"input-column"],[1,"container-title"],[4,"ngIf"],[1,"container"],[1,"input-row"],["type","text",3,"ngModelChange","ngModel"],["type","number",3,"ngModelChange","ngModel"],[1,"container","botones"],[1,"table-column"],["class","table",4,"ngIf"],[1,"btn","add",3,"click"],[1,"btn","mod",3,"click"],[1,"btn","del",3,"click"],[1,"table"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],[1,"btn","btn-primary",3,"click"]],template:function(i,s){i&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),sn(4,B$,2,0,"h2",4)(5,U$,2,0,"h2",4),I(),v(6,"div",5)(7,"div",6)(8,"label"),S(9," Nombre "),v(10,"input",7),cn("ngModelChange",function(a){return fn(s.currentCliente.nombre,a)||(s.currentCliente.nombre=a),a}),I()()(),v(11,"div",6)(12,"label"),S(13," Apellidos "),v(14,"input",7),cn("ngModelChange",function(a){return fn(s.currentCliente.apellidos,a)||(s.currentCliente.apellidos=a),a}),I()()(),v(15,"div",6)(16,"label"),S(17," Email "),v(18,"input",7),cn("ngModelChange",function(a){return fn(s.currentCliente.email,a)||(s.currentCliente.email=a),a}),I()()(),v(19,"div",6)(20,"label"),S(21," Telefono "),v(22,"input",8),cn("ngModelChange",function(a){return fn(s.currentCliente.telefono,a)||(s.currentCliente.telefono=a),a}),I()()(),v(23,"div",9),sn(24,$$,3,0,"div",4)(25,H$,3,0,"div",4)(26,q$,3,0,"div",4)(27,G$,3,0,"div",4),I()()(),v(28,"div",10)(29,"h2"),S(30,"Clientes"),I(),sn(31,W$,15,1,"table",11)(32,K$,1,0,"app-loader",4),I()()()),i&2&&(q(4),ye("ngIf",s.state===s.MODES.create),q(),ye("ngIf",s.state===s.MODES.select),q(5),an("ngModel",s.currentCliente.nombre),q(4),an("ngModel",s.currentCliente.apellidos),q(4),an("ngModel",s.currentCliente.email),q(4),an("ngModel",s.currentCliente.telefono),q(2),ye("ngIf",s.state===s.MODES.create),q(),ye("ngIf",s.state===s.MODES.select),q(),ye("ngIf",s.state===s.MODES.select),q(),ye("ngIf",s.state===s.MODES.select),q(4),ye("ngIf",!s.isLoading),q(),ye("ngIf",s.isLoading))},dependencies:[ua,da,xc,sd,yc,mo,wc]});let t=e;return t})();var Q$=[{path:"home",component:Cy},{path:"coches",component:ok},{path:"transacciones",component:ak},{path:"clientes",component:lk},{path:"**",component:Cy}],uk=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=tt({type:e}),e.\u0275inj=et({imports:[Iy.forRoot(Q$),Iy]});let t=e;return t})();var dk={production:!1,firebaseConfig:{apiKey:"AIzaSyAMKh_kgg0H6tNsbFMzG6bnrUO_GXcEPZU",authDomain:"car-b8820.firebaseapp.com",projectId:"car-b8820",storageBucket:"car-b8820.appspot.com",messagingSenderId:"312572004386",appId:"1:312572004386:web:78a5bf3d16d316157b227b"}};var hk="@firebase/database",fk="1.0.4";var $I="";function HI(t){$I=t}var LE=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ze(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:zd(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var jE=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return En(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var qk=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new LE(e)}}catch{}return new jE},xo=qk("localStorage"),BE=qk("sessionStorage");var Cc=new ui("@firebase/database"),Gk=function(){let t=1;return function(){return t++}}(),zk=function(t){let e=VC(t),n=new FC;n.update(e);let r=n.digest();return Hd.encodeByteArray(r)},Nd=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Nd.apply(null,r):typeof r=="object"?e+=Ze(r):e+=r,e+=" "}return e},yo=null,pk=!0,Wk=function(t,e){D(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Cc.logLevel=In.VERBOSE,yo=Cc.log.bind(Cc),e&&BE.set("logging_enabled",!0)):typeof t=="function"?yo=t:(yo=null,BE.remove("logging_enabled"))},vt=function(...t){if(pk===!0&&(pk=!1,yo===null&&BE.get("logging_enabled")===!0&&Wk(!0)),yo){let e=Nd.apply(null,t);yo(e)}},Rd=function(t){return function(...e){vt(t,...e)}},UE=function(...t){let e="FIREBASE INTERNAL ERROR: "+Nd(...t);Cc.error(e)},Or=function(...t){let e=`FIREBASE FATAL ERROR: ${Nd(...t)}`;throw Cc.error(e),new Error(e)},Vt=function(...t){let e="FIREBASE WARNING: "+Nd(...t);Cc.warn(e)},Y$=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Vt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},km=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Z$=function(t){if(or()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},rs="[MIN_NAME]",ai="[MAX_NAME]",wo=function(t,e){if(t===e)return 0;if(t===rs||e===ai)return-1;if(e===rs||t===ai)return 1;{let n=gk(t),r=gk(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},X$=function(t,e){return t===e?0:t<e?-1:1},cd=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ze(e))},qI=function(t){if(typeof t!="object"||t===null)return Ze(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Ze(e[r]),n+=":",n+=qI(t[e[r]]);return n+="}",n},Kk=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function wt(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var Qk=function(t){D(!km(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},J$=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},eH=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function tH(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var nH=new RegExp("^-?(0*)\\d{1,10}$"),rH=-2147483648,iH=2147483647,gk=function(t){if(nH.test(t)){let e=Number(t);if(e>=rH&&e<=iH)return e}return null},kc=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Vt("Exception was thrown by user callback.",n),e},Math.floor(0))}},sH=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},hd=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var $E=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Vt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var HE=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(vt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Vt(e)}},fd=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),cm="5",Yk="v",Zk="s",Xk="r",Jk="f",eO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tO="ls",nO="p",qE="ac",rO="websocket",iO="long_polling";var lm=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=xo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&xo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function oH(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function sO(t,e,n){D(typeof e=="string","typeof type must == string"),D(typeof n=="object","typeof params must == object");let r;if(e===rO)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===iO)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);oH(t)&&(n.ns=t.namespace);let i=[];return wt(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var GE=class{constructor(){this.counters_={}}incrementCounter(e,n=1){En(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return AC(this.counters_)}};var NE={},RE={};function GI(t){let e=t.toString();return NE[e]||(NE[e]=new GE),NE[e]}function aH(t,e){let n=t.toString();return RE[n]||(RE[n]=e()),RE[n]}var zE=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&kc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var mk="start",cH="close",lH="pLPCommand",uH="pRTLPCB",oO="id",aO="pw",cO="ser",dH="cb",hH="seg",fH="ts",pH="d",gH="dframe",lO=1870,uO=30,mH=lO-uO,_H=25e3,xH=3e4,_d=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Rd(e),this.stats_=GI(n),this.urlFn=c=>(this.appCheckToken&&(c[qE]=this.appCheckToken),sO(n,iO,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new zE(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(xH)),Z$(()=>{if(this.isClosed_)return;this.scriptTagHolder=new WE((...s)=>{let[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===mk)this.id=a,this.password=c;else if(o===cH)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[mk]="t",r[cO]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[dH]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Yk]=cm,this.transportSessionId&&(r[Zk]=this.transportSessionId),this.lastSessionId&&(r[tO]=this.lastSessionId),this.applicationId&&(r[nO]=this.applicationId),this.appCheckToken&&(r[qE]=this.appCheckToken),typeof location<"u"&&location.hostname&&eO.test(location.hostname)&&(r[Xk]=Jk);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return or()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!J$()&&!eH()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=Ze(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=SC(n),i=Kk(r,mH);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(or())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[gH]="t",r[oO]=e,r[aO]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=Ze(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},WE=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,or())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Gk(),window[lH+this.uniqueCallbackIdentifier]=e,window[uH+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){vt("frame writing exception"),a.stack&&vt(a.stack),vt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||vt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[oO]=this.myID,e[aO]=this.myPW,e[cO]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+uO+r.length<=lO;){let o=this.pendingSegs.shift();r=r+"&"+hH+i+"="+o.seg+"&"+fH+i+"="+o.ts+"&"+pH+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(_H)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){or()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{vt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var yH=16384,vH=45e3,um=null;typeof MozWebSocket<"u"?um=MozWebSocket:typeof WebSocket<"u"&&(um=WebSocket);var Ec=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Rd(this.connId),this.stats_=GI(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[Yk]=cm,!or()&&typeof location<"u"&&location.hostname&&eO.test(location.hostname)&&(a[Xk]=Jk),r&&(a[Zk]=r),i&&(a[tO]=i),s&&(a[qE]=s),o&&(a[nO]=o),sO(n,rO,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,xo.set("previous_websocket_failure",!0);try{let i;if(or()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${cm}/${$I}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new um(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&um!==null&&!t.forceDisallow_}static previouslyFailed(){return xo.isInMemoryStorage||xo.get("previous_websocket_failure")===!0}markConnectionHealthy(){xo.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=zd(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(D(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=Ze(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=Kk(r,yH);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(vH))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),dO=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[_d,Ec]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Ec&&Ec.isAvailable(),i=r&&!Ec.previouslyFailed();if(n.webSocketOnly&&(r||Vt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ec];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),wH=6e4,bH=5e3,EH=10*1024,IH=100*1024,PE="t",_k="d",CH="s",xk="r",DH="e",yk="o",vk="a",wk="n",bk="p",TH="h",KE=class{constructor(e,n,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Rd("c:"+this.id+":"),this.transportManager_=new dO(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=hd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>IH?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>EH?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(PE in e){let n=e[PE];n===vk?this.upgradeIfSecondaryHealthy_():n===xk?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===yk&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=cd("t",e),r=cd("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:bk,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:vk,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:wk,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=cd("t",e),r=cd("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=cd(PE,e);if(_k in e){let r=e[_k];if(n===TH){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===wk){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===CH?this.onConnectionShutdown_(r):n===xk?this.onReset_(r):n===DH?UE("Server Error: "+r):n===yk?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):UE("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),cm!==r&&Vt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),hd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(wH))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):hd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(bH))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:bk,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(xo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var dm=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var hm=class{constructor(e){this.allowedEvents_=e,this.listeners_={},D(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){D(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var fm=class t extends hm{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!t0()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return D(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var Ek=32,Ik=768,we=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function ve(){return new we("")}function oe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function is(t){return t.pieces_.length-t.pieceNum_}function Re(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new we(t.pieces_,e)}function zI(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function SH(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function xd(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function hO(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new we(e,0)}function je(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof we)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new we(n,0)}function ae(t){return t.pieceNum_>=t.pieces_.length}function Qt(t,e){let n=oe(t),r=oe(e);if(n===null)return e;if(n===r)return Qt(Re(t),Re(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function AH(t,e){let n=xd(t,0),r=xd(e,0);for(let i=0;i<n.length&&i<r.length;i++){let s=wo(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function WI(t,e){if(is(t)!==is(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Vn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(is(t)>is(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var QE=class{constructor(e,n){this.errorPrefix_=n,this.parts_=xd(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Uc(this.parts_[r]);fO(this)}};function MH(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Uc(e),fO(t)}function NH(t){let e=t.parts_.pop();t.byteLength_-=Uc(e),t.parts_.length>0&&(t.byteLength_-=1)}function fO(t){if(t.byteLength_>Ik)throw new Error(t.errorPrefix_+"has a key path longer than "+Ik+" bytes ("+t.byteLength_+").");if(t.parts_.length>Ek)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ek+") or object contains a cycle "+_o(t))}function _o(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var YE=class t extends hm{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return D(e==="visible","Unknown event type: "+e),[this.visible_]}};var ld=1e3,RH=60*5*1e3,Ck=30*1e3,PH=1.3,kH=3e4,OH="server_kill",Dk=3,KI=(()=>{class t extends dm{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=Rd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ld,this.maxReconnectDelay_=RH,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!or())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");YE.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&fm.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(Ze(o)),D(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new ft,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),D(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),D(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&En(n,"w")){let i=li(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Vt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||kC(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Ck)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=PC(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),D(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Ze(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):UE("Unrecognized action received from server: "+Ze(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){D(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ld,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=ld,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>kH&&(this.reconnectDelay_=ld),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*PH)}this.onConnectStatus_(!1)}establishConnection_(){return g(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(h){D(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?vt("getToken() completed but was canceled"):(vt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,c=new KE(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{Vt(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(OH)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&Vt(h),l())}}})}interrupt(n){vt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){vt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Wd(this.interruptReasons_)&&(this.reconnectDelay_=ld,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>qI(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new we(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){vt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Dk&&(this.reconnectDelay_=Ck,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){vt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Dk&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";or()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+$I.replace(/\./g,"-")]=1,t0()?n["framework.cordova"]=1:MC()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=fm.getInstance().currentlyOnline();return Wd(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),le=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Dc=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new le(rs,e),i=new le(rs,n);return this.compare(r,i)!==0}minPost(){return le.MIN}};var am,pm=class extends Dc{static get __EMPTY_NODE(){return am}static set __EMPTY_NODE(e){am=e}compare(e,n){return wo(e.name,n.name)}isDefinedOn(e){throw Do("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return le.MIN}maxPost(){return new le(ai,am)}makePost(e,n){return D(typeof e=="string","KeyIndex indexValue must always be a string."),new le(e,am)}toString(){return".key"}},kr=new pm;var Ic=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},ir=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??Ln.EMPTY_NODE,this.right=o??Ln.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ln.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Ln.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),ZE=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new ir(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Ln=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ir.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ir.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ic(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ic(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ic(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ic(this.root_,null,this.comparator_,!0,e)}};Ln.EMPTY_NODE=new ZE;function FH(t,e){return wo(t.name,e.name)}function QI(t,e){return wo(t,e)}var XE;function VH(t){XE=t}var pO=function(t){return typeof t=="number"?"number:"+Qk(t):"string:"+t},gO=function(t){if(t.isLeafNode()){let e=t.val();D(typeof e=="string"||typeof e=="number"||typeof e=="object"&&En(e,".sv"),"Priority must be a string or number.")}else D(t===XE||t.isEmpty(),"priority of unexpected type.");D(t===XE||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Tk,Tc=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,D(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),gO(this.priorityNode_)}static set __childrenNodeConstructor(n){Tk=n}static get __childrenNodeConstructor(){return Tk}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return ae(n)?this:oe(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=oe(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(D(i!==".priority"||is(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Re(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+pO(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=Qk(this.value_):n+=this.value_,this.lazyHash_=zk(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(D(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return D(s>=0,"Unknown leaf type: "+r),D(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),mO,_O;function LH(t){mO=t}function jH(t){_O=t}var JE=class extends Dc{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?wo(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return le.MIN}maxPost(){return new le(ai,new Tc("[PRIORITY-POST]",_O))}makePost(e,n){let r=mO(e);return new le(n,new Tc("[PRIORITY-POST]",r))}toString(){return".priority"}},ke=new JE;var BH=Math.log(2),eI=class{constructor(e){let n=s=>parseInt(Math.log(s)/BH,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},gm=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new ir(h,d.node,ir.BLACK,null,null);{let f=parseInt(u/2,10)+c,p=i(c,f),m=i(f+1,l);return d=t[f],h=n?n(d):d,new ir(h,d.node,ir.BLACK,p,m)}},s=function(c){let l=null,u=null,d=t.length,h=function(p,m){let y=d-p,C=d;d-=p;let F=i(y+1,C),T=t[y],H=n?n(T):T;f(new ir(H,T.node,m,null,F))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){let m=c.nextBitIsOne(),y=Math.pow(2,c.count-(p+1));m?h(y,ir.BLACK):(h(y,ir.BLACK),h(y,ir.RED))}return u},o=new eI(t.length),a=s(o);return new Ln(r||e,a)};var kE,bc={},Sc=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return D(bc&&ke,"ChildrenNode.ts has not been loaded"),kE=kE||new t({".priority":bc},{".priority":ke}),kE}get(e){let n=li(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ln?n:null}hasIndex(e){return En(this.indexSet_,e.toString())}addIndex(e,n){D(e!==kr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(le.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=gm(r,e.getCompare()):a=bc;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=Bc(this.indexes_,(i,s)=>{let o=li(this.indexSet_,s);if(D(o,"Missing index implementation for "+s),i===bc)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(le.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),gm(a,o.getCompare())}else return bc;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new le(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Bc(this.indexes_,i=>{if(i===bc)return i;{let s=n.get(e.name);return s?i.remove(new le(e.name,s)):i}});return new t(r,this.indexSet_)}};var ud,ee=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&gO(this.priorityNode_),this.children_.isEmpty()&&D(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ud||(ud=new t(new Ln(QI),null,Sc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ud}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?ud:r}}getChild(n){let r=oe(n);return r===null?this:this.getImmediateChild(r).getChild(Re(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(D(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new le(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?ud:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=oe(n);if(i===null)return r;{D(oe(n)!==".priority"||is(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Re(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(ke,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+pO(this.getPriority().val())+":"),this.forEachChild(ke,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":zk(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new le(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new le(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new le(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,le.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,le.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Pd?-1:0}withIndex(n){if(n===kr||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===kr||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(ke),s=r.getIterator(ke),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===kr?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),tI=class extends ee{constructor(){super(new Ln(QI),ee.EMPTY_NODE,Sc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ee.EMPTY_NODE}isEmpty(){return!1}},Pd=new tI;Object.defineProperties(le,{MIN:{value:new le(rs,ee.EMPTY_NODE)},MAX:{value:new le(ai,Pd)}});pm.__EMPTY_NODE=ee.EMPTY_NODE;Tc.__childrenNodeConstructor=ee;VH(Pd);jH(Pd);var UH=!0;function Ue(t,e=null){if(t===null)return ee.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),D(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Tc(n,Ue(e))}if(!(t instanceof Array)&&UH){let n=[],r=!1;if(wt(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=Ue(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new le(o,c)))}}),n.length===0)return ee.EMPTY_NODE;let s=gm(n,FH,o=>o.name,QI);if(r){let o=gm(n,ke.getCompare());return new ee(s,Ue(e),new Sc({".priority":o},{".priority":ke}))}else return new ee(s,Ue(e),Sc.Default)}else{let n=ee.EMPTY_NODE;return wt(t,(r,i)=>{if(En(t,r)&&r.substring(0,1)!=="."){let s=Ue(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Ue(e))}}LH(Ue);var yd=class extends Dc{constructor(e){super(),this.indexPath_=e,D(!ae(e)&&oe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?wo(e.name,n.name):s}makePost(e,n){let r=Ue(e),i=ee.EMPTY_NODE.updateChild(this.indexPath_,r);return new le(n,i)}maxPost(){let e=ee.EMPTY_NODE.updateChild(this.indexPath_,Pd);return new le(ai,e)}toString(){return xd(this.indexPath_,0).join("/")}};var nI=class extends Dc{compare(e,n){let r=e.node.compareTo(n.node);return r===0?wo(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return le.MIN}maxPost(){return le.MAX}makePost(e,n){let r=Ue(e);return new le(n,r)}toString(){return".value"}},YI=new nI;function xO(t){return{type:"value",snapshotNode:t}}function Ac(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function vd(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function wd(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function $H(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var bd=class{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){D(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(vd(n,a)):D(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Ac(n,r)):o.trackChildChange(wd(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ke,(i,s)=>{n.hasChild(i)||r.trackChildChange(vd(i,s))}),n.isLeafNode()||n.forEachChild(ke,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(wd(i,s,o))}else r.trackChildChange(Ac(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ee.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var mm=class t{constructor(e){this.indexedFilter_=new bd(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new le(n,r))||(r=ee.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=ee.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(ee.EMPTY_NODE);let s=this;return n.forEachChild(ke,(o,a)=>{s.matches(new le(o,a))||(i=i.updateImmediateChild(o,ee.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var rI=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new mm(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new le(n,r))||(r=ee.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=ee.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=ee.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(ee.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,ee.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){let d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();let a=e;D(a.numChildren()===this.limit_,"");let c=new le(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),h=i.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);let f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return s?.trackChildChange(wd(n,r,d)),a.updateImmediateChild(n,r);{s?.trackChildChange(vd(n,d));let m=a.updateImmediateChild(n,ee.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s?.trackChildChange(Ac(h.name,h.node)),m.updateImmediateChild(h.name,h.node)):m}}else return r.isEmpty()?e:u&&o(l,c)>=0?(s!=null&&(s.trackChildChange(vd(l.name,l.node)),s.trackChildChange(Ac(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,ee.EMPTY_NODE)):e}};var Ed=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ke}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return D(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return D(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:rs}hasEnd(){return this.endSet_}getIndexEndValue(){return D(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return D(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ai}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return D(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ke}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function HH(t){return t.loadsAllData()?new bd(t.getIndex()):t.hasLimit()?new rI(t):new mm(t)}function qH(t,e){let n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function GH(t,e){let n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function iI(t,e,n){let r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function zH(t,e,n){let r;return t.index_===kr||n?r=iI(t,e,n):r=iI(t,e,ai),r.startAfterSet_=!0,r}function sI(t,e,n){let r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function WH(t,e,n){let r;return t.index_===kr||n?r=sI(t,e,n):r=sI(t,e,rs),r.endBeforeSet_=!0,r}function Om(t,e){let n=t.copy();return n.index_=e,n}function Sk(t){let e={};if(t.isDefault())return e;let n;if(t.index_===ke?n="$priority":t.index_===YI?n="$value":t.index_===kr?n="$key":(D(t.index_ instanceof yd,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ze(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=Ze(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Ze(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Ze(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Ze(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Ak(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ke&&(e.i=t.index_.toString()),e}var oI=class t extends dm{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Rd("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(D(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=Sk(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,r),li(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",i(h,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=Sk(e._queryParams),r=e._path.toString(),i=new ft;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+OC(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=zd(a.responseText)}catch{Vt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Vt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var aI=class{constructor(){this.rootNode_=ee.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function _m(){return{value:null,children:new Map}}function Oc(t,e,n){if(ae(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=oe(e);t.children.has(r)||t.children.set(r,_m());let i=t.children.get(r);e=Re(e),Oc(i,e,n)}}function cI(t,e){if(ae(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{let n=t.value;return t.value=null,n.forEachChild(ke,(r,i)=>{Oc(t,new we(r),i)}),cI(t,e)}}else if(t.children.size>0){let n=oe(e);return e=Re(e),t.children.has(n)&&cI(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function lI(t,e,n){t.value!==null?n(e,t.value):KH(t,(r,i)=>{let s=new we(e.toString()+"/"+r);lI(i,s,n)})}function KH(t,e){t.children.forEach((n,r)=>{e(r,n)})}var uI=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&wt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var Mk=10*1e3,QH=30*1e3,YH=5*60*1e3,dI=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new uI(e);let r=Mk+(QH-Mk)*Math.random();hd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;wt(e,(i,s)=>{s>0&&En(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),hd(this.reportStats_.bind(this),Math.floor(Math.random()*2*YH))}};var Pr=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Pr||{});function ZI(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function XI(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function JI(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var hI=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Pr.ACK_USER_WRITE,this.source=ZI()}operationForChild(e){if(ae(this.path)){if(this.affectedTree.value!=null)return D(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new we(e));return new t(ve(),n,this.revert)}}else return D(oe(this.path)===e,"operationForChild called for unrelated child."),new t(Re(this.path),this.affectedTree,this.revert)}};var xm=class t{constructor(e,n){this.source=e,this.path=n,this.type=Pr.LISTEN_COMPLETE}operationForChild(e){return ae(this.path)?new t(this.source,ve()):new t(this.source,Re(this.path))}};var Mc=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Pr.OVERWRITE}operationForChild(e){return ae(this.path)?new t(this.source,ve(),this.snap.getImmediateChild(e)):new t(this.source,Re(this.path),this.snap)}};var Id=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Pr.MERGE}operationForChild(e){if(ae(this.path)){let n=this.children.subtree(new we(e));return n.isEmpty()?null:n.value?new Mc(this.source,ve(),n.value):new t(this.source,ve(),n)}else return D(oe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Re(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Fr=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ae(e))return this.isFullyInitialized()&&!this.filtered_;let n=oe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var fI=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function ZH(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push($H(o.childName,o.snapshotNode))}),dd(t,i,"child_removed",e,r,n),dd(t,i,"child_added",e,r,n),dd(t,i,"child_moved",s,r,n),dd(t,i,"child_changed",e,r,n),dd(t,i,"value",e,r,n),i}function dd(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>JH(t,a,c)),o.forEach(a=>{let c=XH(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function XH(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function JH(t,e,n){if(e.childName==null||n.childName==null)throw Do("Should only compare child_ events.");let r=new le(e.childName,e.snapshotNode),i=new le(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Fm(t,e){return{eventCache:t,serverCache:e}}function pd(t,e,n,r){return Fm(new Fr(e,n,r),t.serverCache)}function yO(t,e,n,r){return Fm(t.eventCache,new Fr(e,n,r))}function ym(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function vo(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var OE,eq=()=>(OE||(OE=new Ln(X$)),OE),Yt=class t{constructor(e,n=eq()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return wt(e,(r,i)=>{n=n.set(new we(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ve(),value:this.value};if(ae(e))return null;{let r=oe(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Re(e),n);return s!=null?{path:je(new we(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ae(e))return this;{let n=oe(e),r=this.children.get(n);return r!==null?r.subtree(Re(e)):new t(null)}}set(e,n){if(ae(e))return new t(n,this.children);{let r=oe(e),s=(this.children.get(r)||new t(null)).set(Re(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(ae(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=oe(e),r=this.children.get(n);if(r){let i=r.remove(Re(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(ae(e))return this.value;{let n=oe(e),r=this.children.get(n);return r?r.get(Re(e)):null}}setTree(e,n){if(ae(e))return n;{let r=oe(e),s=(this.children.get(r)||new t(null)).setTree(Re(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(ve(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(je(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ve(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(ae(e))return null;{let s=oe(e),o=this.children.get(s);return o?o.findOnPath_(Re(e),je(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ve(),n)}foreachOnPath_(e,n,r){if(ae(e))return this;{this.value&&r(n,this.value);let i=oe(e),s=this.children.get(i);return s?s.foreachOnPath_(Re(e),je(n,i),r):new t(null)}}foreach(e){this.foreach_(ve(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(je(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var sr=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Yt(null))}};function gd(t,e,n){if(ae(e))return new sr(new Yt(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=Qt(i,e);return s=s.updateChild(o,n),new sr(t.writeTree_.set(i,s))}else{let i=new Yt(n),s=t.writeTree_.setTree(e,i);return new sr(s)}}}function pI(t,e,n){let r=t;return wt(n,(i,s)=>{r=gd(r,je(e,i),s)}),r}function Nk(t,e){if(ae(e))return sr.empty();{let n=t.writeTree_.setTree(e,new Yt(null));return new sr(n)}}function gI(t,e){return bo(t,e)!=null}function bo(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Qt(n.path,e)):null}function Rk(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ke,(r,i)=>{e.push(new le(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new le(r,i.value))}),e}function ts(t,e){if(ae(e))return t;{let n=bo(t,e);return n!=null?new sr(new Yt(n)):new sr(t.writeTree_.subtree(e))}}function mI(t){return t.writeTree_.isEmpty()}function Nc(t,e){return vO(ve(),t.writeTree_,e)}function vO(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(D(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=vO(je(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(je(t,".priority"),r)),n}}function Vm(t,e){return IO(e,t)}function tq(t,e,n,r,i){D(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=gd(t.visibleWrites,e,n)),t.lastWriteId=r}function nq(t,e,n,r){D(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=pI(t.visibleWrites,e,n),t.lastWriteId=r}function rq(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function iq(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);D(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&sq(a,r.path)?i=!1:Vn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return oq(t),!0;if(r.snap)t.visibleWrites=Nk(t.visibleWrites,r.path);else{let a=r.children;wt(a,c=>{t.visibleWrites=Nk(t.visibleWrites,je(r.path,c))})}return!0}else return!1}function sq(t,e){if(t.snap)return Vn(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Vn(je(t.path,n),e))return!0;return!1}function oq(t){t.visibleWrites=wO(t.allWrites,aq,ve()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function aq(t){return t.visible}function wO(t,e,n){let r=sr.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)Vn(n,o)?(a=Qt(n,o),r=gd(r,a,s.snap)):Vn(o,n)&&(a=Qt(o,n),r=gd(r,ve(),s.snap.getChild(a)));else if(s.children){if(Vn(n,o))a=Qt(n,o),r=pI(r,a,s.children);else if(Vn(o,n))if(a=Qt(o,n),ae(a))r=pI(r,ve(),s.children);else{let c=li(s.children,oe(a));if(c){let l=c.getChild(Re(a));r=gd(r,ve(),l)}}}else throw Do("WriteRecord should have .snap or .children")}}return r}function bO(t,e,n,r,i){if(!r&&!i){let s=bo(t.visibleWrites,e);if(s!=null)return s;{let o=ts(t.visibleWrites,e);if(mI(o))return n;if(n==null&&!gI(o,ve()))return null;{let a=n||ee.EMPTY_NODE;return Nc(o,a)}}}else{let s=ts(t.visibleWrites,e);if(!i&&mI(s))return n;if(!i&&n==null&&!gI(s,ve()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Vn(l.path,e)||Vn(e,l.path))},a=wO(t.allWrites,o,e),c=n||ee.EMPTY_NODE;return Nc(a,c)}}}function cq(t,e,n){let r=ee.EMPTY_NODE,i=bo(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ke,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=ts(t.visibleWrites,e);return n.forEachChild(ke,(o,a)=>{let c=Nc(ts(s,new we(o)),a);r=r.updateImmediateChild(o,c)}),Rk(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=ts(t.visibleWrites,e);return Rk(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function lq(t,e,n,r,i){D(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=je(e,n);if(gI(t.visibleWrites,s))return null;{let o=ts(t.visibleWrites,s);return mI(o)?i.getChild(n):Nc(o,i.getChild(n))}}function uq(t,e,n,r){let i=je(e,n),s=bo(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=ts(t.visibleWrites,i);return Nc(o,r.getNode().getImmediateChild(n))}else return null}function dq(t,e){return bo(t.visibleWrites,e)}function hq(t,e,n,r,i,s,o){let a,c=ts(t.visibleWrites,e),l=bo(c,ve());if(l!=null)a=l;else if(n!=null)a=Nc(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),f=h.getNext();for(;f&&u.length<i;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function fq(){return{visibleWrites:sr.empty(),allWrites:[],lastWriteId:-1}}function vm(t,e,n,r){return bO(t.writeTree,t.treePath,e,n,r)}function eC(t,e){return cq(t.writeTree,t.treePath,e)}function Pk(t,e,n,r){return lq(t.writeTree,t.treePath,e,n,r)}function wm(t,e){return dq(t.writeTree,je(t.treePath,e))}function pq(t,e,n,r,i,s){return hq(t.writeTree,t.treePath,e,n,r,i,s)}function tC(t,e,n){return uq(t.writeTree,t.treePath,e,n)}function EO(t,e){return IO(je(t.treePath,e),t.writeTree)}function IO(t,e){return{treePath:t,writeTree:e}}var _I=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;D(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),D(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,wd(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,vd(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Ac(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,wd(r,e.snapshotNode,i.oldSnap));else throw Do("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var xI=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},CO=new xI,Cd=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Fr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return tC(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:vo(this.viewCache_),s=pq(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function gq(t){return{filter:t}}function mq(t,e){D(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),D(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function _q(t,e,n,r,i){let s=new _I,o,a;if(n.type===Pr.OVERWRITE){let l=n;l.source.fromUser?o=yI(t,e,l.path,l.snap,r,i,s):(D(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!ae(l.path),o=bm(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===Pr.MERGE){let l=n;l.source.fromUser?o=yq(t,e,l.path,l.children,r,i,s):(D(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=vI(t,e,l.path,l.children,r,i,a,s))}else if(n.type===Pr.ACK_USER_WRITE){let l=n;l.revert?o=bq(t,e,l.path,r,i,s):o=vq(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===Pr.LISTEN_COMPLETE)o=wq(t,e,n.path,r,s);else throw Do("Unknown operation type: "+n.type);let c=s.getChanges();return xq(e,o,c),{viewCache:o,changes:c}}function xq(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=ym(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(xO(ym(e)))}}function DO(t,e,n,r,i,s){let o=e.eventCache;if(wm(r,n)!=null)return e;{let a,c;if(ae(n))if(D(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=vo(e),u=l instanceof ee?l:ee.EMPTY_NODE,d=eC(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let l=vm(r,vo(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=oe(n);if(l===".priority"){D(is(n)===1,"Can't have a priority with additional path components");let u=o.getNode();c=e.serverCache.getNode();let d=Pk(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{let u=Re(n),d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let h=Pk(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=tC(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,i,s):a=o.getNode()}}return pd(e,a,o.isFullyInitialized()||ae(n),t.filter.filtersNodes())}}function bm(t,e,n,r,i,s,o,a){let c=e.serverCache,l,u=o?t.filter:t.filter.getIndexedFilter();if(ae(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{let f=oe(n);if(!c.isCompleteForPath(n)&&is(n)>1)return e;let p=Re(n),y=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),y):l=u.updateChild(c.getNode(),f,y,p,CO,null)}let d=yO(e,l,c.isFullyInitialized()||ae(n),u.filtersNodes()),h=new Cd(i,d,s);return DO(t,d,n,i,h,a)}function yI(t,e,n,r,i,s,o){let a=e.eventCache,c,l,u=new Cd(i,e,s);if(ae(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=pd(e,l,!0,t.filter.filtersNodes());else{let d=oe(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=pd(e,l,a.isFullyInitialized(),a.isFiltered());else{let h=Re(n),f=a.getNode().getImmediateChild(d),p;if(ae(h))p=r;else{let m=u.getCompleteChild(d);m!=null?zI(h)===".priority"&&m.getChild(hO(h)).isEmpty()?p=m:p=m.updateChild(h,r):p=ee.EMPTY_NODE}if(f.equals(p))c=e;else{let m=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=pd(e,m,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function kk(t,e){return t.eventCache.isCompleteForChild(e)}function yq(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{let u=je(n,c);kk(e,oe(u))&&(a=yI(t,a,u,l,i,s,o))}),r.foreach((c,l)=>{let u=je(n,c);kk(e,oe(u))||(a=yI(t,a,u,l,i,s,o))}),a}function Ok(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function vI(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;ae(n)?l=r:l=new Yt(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let f=e.serverCache.getNode().getImmediateChild(d),p=Ok(t,f,h);c=bm(t,c,new we(d),p,i,s,o,a)}}),l.children.inorderTraversal((d,h)=>{let f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){let p=e.serverCache.getNode().getImmediateChild(d),m=Ok(t,p,h);c=bm(t,c,new we(d),m,i,s,o,a)}}),c}function vq(t,e,n,r,i,s,o){if(wm(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(ae(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return bm(t,e,n,c.getNode().getChild(n),i,s,a,o);if(ae(n)){let l=new Yt(null);return c.getNode().forEachChild(kr,(u,d)=>{l=l.set(new we(u),d)}),vI(t,e,n,l,i,s,a,o)}else return e}else{let l=new Yt(null);return r.foreach((u,d)=>{let h=je(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),vI(t,e,n,l,i,s,a,o)}}function wq(t,e,n,r,i){let s=e.serverCache,o=yO(e,s.getNode(),s.isFullyInitialized()||ae(n),s.isFiltered());return DO(t,o,n,r,CO,i)}function bq(t,e,n,r,i,s){let o;if(wm(r,n)!=null)return e;{let a=new Cd(r,e,i),c=e.eventCache.getNode(),l;if(ae(n)||oe(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=vm(r,vo(e));else{let d=e.serverCache.getNode();D(d instanceof ee,"serverChildren would be complete if leaf node"),u=eC(r,d)}u=u,l=t.filter.updateFullNode(c,u,s)}else{let u=oe(n),d=tC(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,Re(n),a,s):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,ee.EMPTY_NODE,Re(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=vm(r,vo(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||wm(r,ve())!=null,pd(e,l,o,t.filter.filtersNodes())}}var wI=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new bd(r.getIndex()),s=HH(r);this.processor_=gq(s);let o=n.serverCache,a=n.eventCache,c=i.updateFullNode(ee.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(ee.EMPTY_NODE,a.getNode(),null),u=new Fr(c,o.isFullyInitialized(),i.filtersNodes()),d=new Fr(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Fm(d,u),this.eventGenerator_=new fI(this.query_)}get query(){return this.query_}};function Eq(t){return t.viewCache_.serverCache.getNode()}function Iq(t){return ym(t.viewCache_)}function Cq(t,e){let n=vo(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ae(e)&&!n.getImmediateChild(oe(e)).isEmpty())?n.getChild(e):null}function Fk(t){return t.eventRegistrations_.length===0}function Dq(t,e){t.eventRegistrations_.push(e)}function Vk(t,e,n){let r=[];if(n){D(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){let o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Lk(t,e,n,r){e.type===Pr.MERGE&&e.source.queryId!==null&&(D(vo(t.viewCache_),"We should always have a full cache before handling merges"),D(ym(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=_q(t.processor_,i,e,n,r);return mq(t.processor_,s.viewCache),D(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,TO(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Tq(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ke,(s,o)=>{r.push(Ac(s,o))}),n.isFullyInitialized()&&r.push(xO(n.getNode())),TO(t,r,n.getNode(),e)}function TO(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return ZH(t.eventGenerator_,e,n,i)}var Em,Im=class{constructor(){this.views=new Map}};function Sq(t){D(!Em,"__referenceConstructor has already been defined"),Em=t}function Aq(){return D(Em,"Reference.ts has not been loaded"),Em}function Mq(t){return t.views.size===0}function nC(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return D(s!=null,"SyncTree gave us an op for an invalid query."),Lk(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(Lk(o,e,n,r));return s}}function SO(t,e,n,r,i){let s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=vm(n,i?r:null),c=!1;a?c=!0:r instanceof ee?(a=eC(n,r),c=!1):(a=ee.EMPTY_NODE,c=!1);let l=Fm(new Fr(a,c,!1),new Fr(r,i,!1));return new wI(e,l)}return o}function Nq(t,e,n,r,i,s){let o=SO(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Dq(o,n),Tq(o,n)}function Rq(t,e,n,r){let i=e._queryIdentifier,s=[],o=[],a=ss(t);if(i==="default")for(let[c,l]of t.views.entries())o=o.concat(Vk(l,n,r)),Fk(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=t.views.get(i);c&&(o=o.concat(Vk(c,n,r)),Fk(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!ss(t)&&s.push(new(Aq())(e._repo,e._path)),{removed:s,events:o}}function AO(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function ns(t,e){let n=null;for(let r of t.views.values())n=n||Cq(r,e);return n}function MO(t,e){if(e._queryParams.loadsAllData())return Lm(t);{let r=e._queryIdentifier;return t.views.get(r)}}function NO(t,e){return MO(t,e)!=null}function ss(t){return Lm(t)!=null}function Lm(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Cm;function Pq(t){D(!Cm,"__referenceConstructor has already been defined"),Cm=t}function kq(){return D(Cm,"Reference.ts has not been loaded"),Cm}var Oq=1,Dm=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Yt(null),this.pendingWriteTree_=fq(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function rC(t,e,n,r,i){return tq(t.pendingWriteTree_,e,n,r,i),i?Fc(t,new Mc(ZI(),e,n)):[]}function Fq(t,e,n,r){nq(t.pendingWriteTree_,e,n,r);let i=Yt.fromObject(n);return Fc(t,new Id(ZI(),e,i))}function es(t,e,n=!1){let r=rq(t.pendingWriteTree_,e);if(iq(t.pendingWriteTree_,e)){let s=new Yt(null);return r.snap!=null?s=s.set(ve(),!0):wt(r.children,o=>{s=s.set(new we(o),!0)}),Fc(t,new hI(r.path,s,n))}else return[]}function kd(t,e,n){return Fc(t,new Mc(XI(),e,n))}function Vq(t,e,n){let r=Yt.fromObject(n);return Fc(t,new Id(XI(),e,r))}function Lq(t,e){return Fc(t,new xm(XI(),e))}function jq(t,e,n){let r=iC(t,n);if(r){let i=sC(r),s=i.path,o=i.queryId,a=Qt(s,e),c=new xm(JI(o),a);return oC(t,s,c)}else return[]}function Tm(t,e,n,r,i=!1){let s=e._path,o=t.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||NO(o,e))){let c=Rq(o,e,n,r);Mq(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(h,f)=>ss(f));if(u&&!d){let h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){let f=$q(h);for(let p=0;p<f.length;++p){let m=f[p],y=m.query,C=OO(t,m);t.listenProvider_.startListening(md(y),Dd(t,y),C.hashFn,C.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(md(e),null):l.forEach(h=>{let f=t.queryToTagMap.get(Bm(h));t.listenProvider_.stopListening(md(h),f)}))}Hq(t,l)}return a}function RO(t,e,n,r){let i=iC(t,r);if(i!=null){let s=sC(i),o=s.path,a=s.queryId,c=Qt(o,e),l=new Mc(JI(a),c,n);return oC(t,o,l)}else return[]}function Bq(t,e,n,r){let i=iC(t,r);if(i){let s=sC(i),o=s.path,a=s.queryId,c=Qt(o,e),l=Yt.fromObject(n),u=new Id(JI(a),c,l);return oC(t,o,u)}else return[]}function bI(t,e,n,r=!1){let i=e._path,s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,f)=>{let p=Qt(h,i);s=s||ns(f,p),o=o||ss(f)});let a=t.syncPointTree_.get(i);a?(o=o||ss(a),s=s||ns(a,ve())):(a=new Im,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=ee.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((f,p)=>{let m=ns(p,ve());m&&(s=s.updateImmediateChild(f,m))}));let l=NO(a,e);if(!l&&!e._queryParams.loadsAllData()){let h=Bm(e);D(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");let f=qq();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}let u=Vm(t.pendingWriteTree_,i),d=Nq(a,e,n,u,s,c);if(!l&&!o&&!r){let h=MO(a,e);d=d.concat(Gq(t,e,h))}return d}function jm(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=Qt(o,e),l=ns(a,c);if(l)return l});return bO(i,e,s,n,!0)}function Uq(t,e){let n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=Qt(l,n);r=r||ns(u,d)});let i=t.syncPointTree_.get(n);i?r=r||ns(i,ve()):(i=new Im,t.syncPointTree_=t.syncPointTree_.set(n,i));let s=r!=null,o=s?new Fr(r,!0,!1):null,a=Vm(t.pendingWriteTree_,e._path),c=SO(i,e,a,s?o.getNode():ee.EMPTY_NODE,s);return Iq(c)}function Fc(t,e){return PO(e,t.syncPointTree_,null,Vm(t.pendingWriteTree_,ve()))}function PO(t,e,n,r){if(ae(t.path))return kO(t,e,n,r);{let i=e.get(ve());n==null&&i!=null&&(n=ns(i,ve()));let s=[],o=oe(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,u=EO(r,o);s=s.concat(PO(a,c,l,u))}return i&&(s=s.concat(nC(i,t,r,n))),s}}function kO(t,e,n,r){let i=e.get(ve());n==null&&i!=null&&(n=ns(i,ve()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=EO(r,o),u=t.operationForChild(o);u&&(s=s.concat(kO(u,a,c,l)))}),i&&(s=s.concat(nC(i,t,r,n))),s}function OO(t,e){let n=e.query,r=Dd(t,n);return{hashFn:()=>(Eq(e)||ee.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?jq(t,n._path,r):Lq(t,n._path);{let s=tH(i,n);return Tm(t,n,null,s)}}}}function Dd(t,e){let n=Bm(e);return t.queryToTagMap.get(n)}function Bm(t){return t._path.toString()+"$"+t._queryIdentifier}function iC(t,e){return t.tagToQueryMap.get(e)}function sC(t){let e=t.indexOf("$");return D(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new we(t.substr(0,e))}}function oC(t,e,n){let r=t.syncPointTree_.get(e);D(r,"Missing sync point for query tag that we're tracking");let i=Vm(t.pendingWriteTree_,e);return nC(r,n,i,null)}function $q(t){return t.fold((e,n,r)=>{if(n&&ss(n))return[Lm(n)];{let i=[];return n&&(i=AO(n)),wt(r,(s,o)=>{i=i.concat(o)}),i}})}function md(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(kq())(t._repo,t._path):t}function Hq(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=Bm(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function qq(){return Oq++}function Gq(t,e,n){let r=e._path,i=Dd(t,e),s=OO(t,n),o=t.listenProvider_.startListening(md(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)D(!ss(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!ae(l)&&u&&ss(u))return[Lm(u).query];{let h=[];return u&&(h=h.concat(AO(u).map(f=>f.query))),wt(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){let u=c[l];t.listenProvider_.stopListening(md(u),Dd(t,u))}}return o}var EI=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},II=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=je(this.path_,e);return new t(this.syncTree_,n)}node(){return jm(this.syncTree_,this.path_)}},zq=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},jk=function(t,e,n){if(!t||typeof t!="object")return t;if(D(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Wq(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Kq(t[".sv"],e);D(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Wq=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:D(!1,"Unexpected server value: "+t)}},Kq=function(t,e,n){t.hasOwnProperty("increment")||D(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&D(!1,"Unexpected increment value: "+r);let i=e.node();if(D(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},FO=function(t,e,n,r){return cC(e,new II(n,t),r)},aC=function(t,e,n){return cC(t,new EI(e),n)};function cC(t,e,n){let r=t.getPriority().val(),i=jk(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=jk(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Tc(a,Ue(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Tc(i))),o.forEachChild(ke,(a,c)=>{let l=cC(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var Td=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function Um(t,e){let n=e instanceof we?e:new we(e),r=t,i=oe(n);for(;i!==null;){let s=li(r.node.children,i)||{children:{},childCount:0};r=new Td(i,r,s),n=Re(n),i=oe(n)}return r}function Eo(t){return t.node.value}function lC(t,e){t.node.value=e,CI(t)}function VO(t){return t.node.childCount>0}function Qq(t){return Eo(t)===void 0&&!VO(t)}function $m(t,e){wt(t.node.children,(n,r)=>{e(new Td(n,t,r))})}function LO(t,e,n,r){n&&!r&&e(t),$m(t,i=>{LO(i,e,!0,r)}),n&&r&&e(t)}function Yq(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Od(t){return new we(t.parent===null?t.name:Od(t.parent)+"/"+t.name)}function CI(t){t.parent!==null&&Zq(t.parent,t.name,t)}function Zq(t,e,n){let r=Qq(n),i=En(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,CI(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,CI(t))}var Xq=/[\[\].#$\/\u0000-\u001F\u007F]/,Jq=/[\[\].#$\u0000-\u001F\u007F]/,FE=10*1024*1024,Hm=function(t){return typeof t=="string"&&t.length!==0&&!Xq.test(t)},jO=function(t){return typeof t=="string"&&t.length!==0&&!Jq.test(t)},eG=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),jO(t)},Sd=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!km(t)||t&&typeof t=="object"&&En(t,".sv")},Vr=function(t,e,n,r){r&&e===void 0||Fd(Jt(t,"value"),e,n)},Fd=function(t,e,n){let r=n instanceof we?new QE(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+_o(r));if(typeof e=="function")throw new Error(t+"contains a function "+_o(r)+" with contents = "+e.toString());if(km(e))throw new Error(t+"contains "+e.toString()+" "+_o(r));if(typeof e=="string"&&e.length>FE/3&&Uc(e)>FE)throw new Error(t+"contains a string greater than "+FE+" utf8 bytes "+_o(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(wt(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Hm(o)))throw new Error(t+" contains an invalid key ("+o+") "+_o(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);MH(r,o),Fd(t,a,r),NH(r)}),i&&s)throw new Error(t+' contains ".value" child '+_o(r)+" in addition to actual children.")}},tG=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];let s=xd(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Hm(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(AH);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Vn(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},BO=function(t,e,n,r){if(r&&e===void 0)return;let i=Jt(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");let s=[];wt(e,(o,a)=>{let c=new we(o);if(Fd(i,a,je(n,c)),zI(c)===".priority"&&!Sd(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(c)}),tG(i,s)},uC=function(t,e,n){if(!(n&&e===void 0)){if(km(e))throw new Error(Jt(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Sd(e))throw new Error(Jt(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Vd=function(t,e,n,r){if(!(r&&n===void 0)&&!Hm(n))throw new Error(Jt(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Vc=function(t,e,n,r){if(!(r&&n===void 0)&&!jO(n))throw new Error(Jt(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},nG=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Vc(t,e,n,r)},yn=function(t,e){if(oe(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},UO=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Hm(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!eG(n))throw new Error(Jt(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var DI=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function qm(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!WI(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function $O(t,e,n){qm(t,n),HO(t,r=>WI(r,e))}function vn(t,e,n){qm(t,n),HO(t,r=>Vn(r,e)||Vn(e,r))}function HO(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(rG(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function rG(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();yo&&vt("event: "+n.toString()),kc(r)}}}var qO="repo_interrupt",iG=25,TI=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new DI,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=_m(),this.transactionQueueTree_=new Td,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function sG(t,e,n){if(t.stats_=GI(t.repoInfo_),t.forceRestClient_||sH())t.server_=new oI(t.repoInfo_,(r,i,s,o)=>{Bk(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Uk(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ze(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new KI(t.repoInfo_,e,(r,i,s,o)=>{Bk(t,r,i,s,o)},r=>{Uk(t,r)},r=>{oG(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=aH(t.repoInfo_,()=>new dI(t.stats_,t.server_)),t.infoData_=new aI,t.infoSyncTree_=new Dm({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=kd(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),dC(t,"connected",!1),t.serverSyncTree_=new Dm({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);vn(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function GO(t){let n=t.infoData_.getNode(new we(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Ld(t){return zq({timestamp:GO(t)})}function Bk(t,e,n,r,i){t.dataUpdateCount++;let s=new we(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=Bc(n,l=>Ue(l));o=Bq(t.serverSyncTree_,s,c,i)}else{let c=Ue(n);o=RO(t.serverSyncTree_,s,c,i)}else if(r){let c=Bc(n,l=>Ue(l));o=Vq(t.serverSyncTree_,s,c)}else{let c=Ue(n);o=kd(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Rc(t,s)),vn(t.eventQueue_,a,o)}function Uk(t,e){dC(t,"connected",e),e===!1&&lG(t)}function oG(t,e){wt(e,(n,r)=>{dC(t,n,r)})}function dC(t,e,n){let r=new we("/.info/"+e),i=Ue(n);t.infoData_.updateSnapshot(r,i);let s=kd(t.infoSyncTree_,r,i);vn(t.eventQueue_,r,s)}function Gm(t){return t.nextWriteId_++}function aG(t,e,n){let r=Uq(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{let s=Ue(i).withIndex(e._queryParams.getIndex());bI(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=kd(t.serverSyncTree_,e._path,s);else{let a=Dd(t.serverSyncTree_,e);o=RO(t.serverSyncTree_,e._path,s,a)}return vn(t.eventQueue_,e._path,o),Tm(t.serverSyncTree_,e,n,null,!0),s},i=>(Lc(t,"get for query "+Ze(e)+" failed: "+i),Promise.reject(new Error(i))))}function hC(t,e,n,r,i){Lc(t,"set",{path:e.toString(),value:n,priority:r});let s=Ld(t),o=Ue(n,r),a=jm(t.serverSyncTree_,e),c=aC(o,a,s),l=Gm(t),u=rC(t.serverSyncTree_,e,c,l,!0);qm(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{let p=h==="ok";p||Vt("set at "+e+" failed: "+h);let m=es(t.serverSyncTree_,l,!p);vn(t.eventQueue_,e,m),os(t,i,h,f)});let d=pC(t,e);Rc(t,d),vn(t.eventQueue_,d,[])}function cG(t,e,n,r){Lc(t,"update",{path:e.toString(),value:n});let i=!0,s=Ld(t),o={};if(wt(n,(a,c)=>{i=!1,o[a]=FO(je(e,a),Ue(c),t.serverSyncTree_,s)}),i)vt("update() called with empty data.  Don't do anything."),os(t,r,"ok",void 0);else{let a=Gm(t),c=Fq(t.serverSyncTree_,e,o,a);qm(t.eventQueue_,c),t.server_.merge(e.toString(),n,(l,u)=>{let d=l==="ok";d||Vt("update at "+e+" failed: "+l);let h=es(t.serverSyncTree_,a,!d),f=h.length>0?Rc(t,e):e;vn(t.eventQueue_,f,h),os(t,r,l,u)}),wt(n,l=>{let u=pC(t,je(e,l));Rc(t,u)}),vn(t.eventQueue_,e,[])}}function lG(t){Lc(t,"onDisconnectEvents");let e=Ld(t),n=_m();lI(t.onDisconnect_,ve(),(i,s)=>{let o=FO(i,s,t.serverSyncTree_,e);Oc(n,i,o)});let r=[];lI(n,ve(),(i,s)=>{r=r.concat(kd(t.serverSyncTree_,i,s));let o=pC(t,i);Rc(t,o)}),t.onDisconnect_=_m(),vn(t.eventQueue_,ve(),r)}function uG(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&cI(t.onDisconnect_,e),os(t,n,r,i)})}function $k(t,e,n,r){let i=Ue(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&Oc(t.onDisconnect_,e,i),os(t,r,s,o)})}function dG(t,e,n,r,i){let s=Ue(n,r);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&Oc(t.onDisconnect_,e,s),os(t,i,o,a)})}function hG(t,e,n,r){if(Wd(n)){vt("onDisconnect().update() called with empty data.  Don't do anything."),os(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,s)=>{i==="ok"&&wt(n,(o,a)=>{let c=Ue(a);Oc(t.onDisconnect_,je(e,o),c)}),os(t,r,i,s)})}function fG(t,e,n){let r;oe(e._path)===".info"?r=bI(t.infoSyncTree_,e,n):r=bI(t.serverSyncTree_,e,n),$O(t.eventQueue_,e._path,r)}function SI(t,e,n){let r;oe(e._path)===".info"?r=Tm(t.infoSyncTree_,e,n):r=Tm(t.serverSyncTree_,e,n),$O(t.eventQueue_,e._path,r)}function zO(t){t.persistentConnection_&&t.persistentConnection_.interrupt(qO)}function pG(t){t.persistentConnection_&&t.persistentConnection_.resume(qO)}function Lc(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),vt(n,...e)}function os(t,e,n,r){e&&kc(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function gG(t,e,n,r,i,s){Lc(t,"transaction on "+e);let o={path:e,update:n,onComplete:r,status:null,order:Gk(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=fC(t,e,void 0);o.currentInputSnapshot=a;let c=o.update(a.val());if(c===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Fd("transaction failed: Data returned ",c,o.path),o.status=0;let l=Um(t.transactionQueueTree_,e),u=Eo(l)||[];u.push(o),lC(l,u);let d;typeof c=="object"&&c!==null&&En(c,".priority")?(d=li(c,".priority"),D(Sd(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(jm(t.serverSyncTree_,e)||ee.EMPTY_NODE).getPriority().val();let h=Ld(t),f=Ue(c,d),p=aC(f,a,h);o.currentOutputSnapshotRaw=f,o.currentOutputSnapshotResolved=p,o.currentWriteId=Gm(t);let m=rC(t.serverSyncTree_,e,p,o.currentWriteId,o.applyLocally);vn(t.eventQueue_,e,m),zm(t,t.transactionQueueTree_)}}function fC(t,e,n){return jm(t.serverSyncTree_,e,n)||ee.EMPTY_NODE}function zm(t,e=t.transactionQueueTree_){if(e||Wm(t,e),Eo(e)){let n=KO(t,e);D(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&mG(t,Od(e),n)}else VO(e)&&$m(e,n=>{zm(t,n)})}function mG(t,e,n){let r=n.map(l=>l.currentWriteId),i=fC(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let u=n[l];D(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Qt(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{Lc(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(es(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Wm(t,Um(t.transactionQueueTree_,e)),zm(t,t.transactionQueueTree_),vn(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)kc(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Vt("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}Rc(t,e)}},o)}function Rc(t,e){let n=WO(t,e),r=Od(n),i=KO(t,n);return _G(t,i,r),r}function _G(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Qt(n,c.path),u=!1,d;if(D(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(es(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=iG)u=!0,d="maxretry",i=i.concat(es(t.serverSyncTree_,c.currentWriteId,!0));else{let h=fC(t,c.path,o);c.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){Fd("transaction failed: Data returned ",f,c.path);let p=Ue(f);typeof f=="object"&&f!=null&&En(f,".priority")||(p=p.updatePriority(h.getPriority()));let y=c.currentWriteId,C=Ld(t),F=aC(p,h,C);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=F,c.currentWriteId=Gm(t),o.splice(o.indexOf(y),1),i=i.concat(rC(t.serverSyncTree_,c.path,F,c.currentWriteId,c.applyLocally)),i=i.concat(es(t.serverSyncTree_,y,!0))}else u=!0,d="nodata",i=i.concat(es(t.serverSyncTree_,c.currentWriteId,!0))}vn(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Wm(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)kc(r[a]);zm(t,t.transactionQueueTree_)}function WO(t,e){let n,r=t.transactionQueueTree_;for(n=oe(e);n!==null&&Eo(r)===void 0;)r=Um(r,n),e=Re(e),n=oe(e);return r}function KO(t,e){let n=[];return QO(t,e,n),n.sort((r,i)=>r.order-i.order),n}function QO(t,e,n){let r=Eo(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);$m(e,i=>{QO(t,i,n)})}function Wm(t,e){let n=Eo(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,lC(e,n.length>0?n:void 0)}$m(e,r=>{Wm(t,r)})}function pC(t,e){let n=Od(WO(t,e)),r=Um(t.transactionQueueTree_,e);return Yq(r,i=>{VE(t,i)}),VE(t,r),LO(r,i=>{VE(t,i)}),n}function VE(t,e){let n=Eo(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(D(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(D(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(es(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?lC(e,void 0):n.length=s+1,vn(t.eventQueue_,Od(e),i);for(let o=0;o<r.length;o++)kc(r[o])}}function xG(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function yG(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Vt(`Invalid query segment '${n}' in query '${t}'`)}return e}var AI=function(t,e){let n=vG(t),r=n.namespace;n.domain==="firebase.com"&&Or(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Or("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Y$();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new lm(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new we(n.pathString)}},vG=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=xG(t.substring(u,d)));let h=yG(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var Hk="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",wG=function(){let t=0,e=[];return function(n){let r=n===t;t=n;let i,s=new Array(8);for(i=7;i>=0;i--)s[i]=Hk.charAt(n%64),n=Math.floor(n/64);D(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=Hk.charAt(e[i]);return D(o.length===20,"nextPushId: Length should be 20."),o}}();var Sm=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ze(this.snapshot.exportVal())}},Am=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Ad=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return D(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Mm=class{constructor(e,n){this._repo=e,this._path=n}cancel(){let e=new ft;return uG(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){yn("OnDisconnect.remove",this._path);let e=new ft;return $k(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){yn("OnDisconnect.set",this._path),Vr("OnDisconnect.set",e,this._path,!1);let n=new ft;return $k(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){yn("OnDisconnect.setWithPriority",this._path),Vr("OnDisconnect.setWithPriority",e,this._path,!1),uC("OnDisconnect.setWithPriority",n,!1);let r=new ft;return dG(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){yn("OnDisconnect.update",this._path),BO("OnDisconnect.update",e,this._path,!1);let n=new ft;return hG(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}};var Zt=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ae(this._path)?null:zI(this._path)}get ref(){return new wn(this._repo,this._path)}get _queryIdentifier(){let e=Ak(this._queryParams),n=qI(e);return n==="{}"?"default":n}get _queryObject(){return Ak(this._queryParams)}isEqual(e){if(e=ue(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=WI(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+SH(this._path)}};function Km(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function cs(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===kr){let r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==rs)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==ai)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===ke){if(e!=null&&!Sd(e)||n!=null&&!Sd(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(D(t.getIndex()instanceof yd||t.getIndex()===YI,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Qm(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var wn=class t extends Zt{constructor(e,n){super(e,n,new Ed,!1)}get parent(){let e=hO(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Pc=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new we(e),r=as(this.ref,e);return new t(this._node.getChild(n),r,ke)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,as(this.ref,r),ke)))}hasChild(e){let n=new we(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function gC(t,e){return t=ue(t),t._checkNotDeleted("ref"),e!==void 0?as(t._root,e):t._root}function mC(t,e){t=ue(t),t._checkNotDeleted("refFromURL");let n=AI(e,t._repo.repoInfo_.nodeAdmin);UO("refFromURL",n);let r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&Or("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),gC(t,n.path.toString())}function as(t,e){return t=ue(t),oe(t._path)===null?nG("child","path",e,!1):Vc("child","path",e,!1),new wn(t._repo,je(t._path,e))}function YO(t,e){t=ue(t),yn("push",t._path),Vr("push",e,t._path,!0);let n=GO(t._repo),r=wG(n),i=as(t,r),s=as(t,r),o;return e!=null?o=Ym(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function ZO(t){return yn("remove",t._path),Ym(t,null)}function Ym(t,e){t=ue(t),yn("set",t._path),Vr("set",e,t._path,!1);let n=new ft;return hC(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function XO(t,e){t=ue(t),yn("setPriority",t._path),uC("setPriority",e,!1);let n=new ft;return hC(t._repo,je(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function JO(t,e,n){if(yn("setWithPriority",t._path),Vr("setWithPriority",e,t._path,!1),uC("setWithPriority",n,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";let r=new ft;return hC(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}function eF(t,e){BO("update",e,t._path,!1);let n=new ft;return cG(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function tF(t){t=ue(t);let e=new Ad(()=>{}),n=new Md(e);return aG(t._repo,t,n).then(r=>new Pc(r,new wn(t._repo,t._path),t._queryParams.getIndex()))}var Md=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Sm("value",this,new Pc(e.snapshotNode,new wn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Am(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Nm=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Am(this,e,n):null}createEvent(e,n){D(e.childName!=null,"Child events should have a childName.");let r=as(new wn(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Sm(e.type,this,new Pc(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function jd(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{SI(t._repo,t,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let o=new Ad(n,s||void 0),a=e==="value"?new Md(o):new Nm(e,o);return fG(t._repo,t,a),()=>SI(t._repo,t,a)}function Zm(t,e,n,r){return jd(t,"value",e,n,r)}function _C(t,e,n,r){return jd(t,"child_added",e,n,r)}function xC(t,e,n,r){return jd(t,"child_changed",e,n,r)}function yC(t,e,n,r){return jd(t,"child_moved",e,n,r)}function vC(t,e,n,r){return jd(t,"child_removed",e,n,r)}function wC(t,e,n){let r=null,i=n?new Ad(n):null;e==="value"?r=new Md(i):e&&(r=new Nm(e,i)),SI(t._repo,t,r)}var bn=class{},Rm=class extends bn{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){Vr("endAt",this._value,e._path,!0);let n=sI(e._queryParams,this._value,this._key);if(Qm(n),cs(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Zt(e._repo,e._path,n,e._orderByCalled)}};function nF(t,e){return Vd("endAt","key",e,!0),new Rm(t,e)}var MI=class extends bn{constructor(e,n){super(),this._value=e,this._key=n,this.type="endBefore"}_apply(e){Vr("endBefore",this._value,e._path,!1);let n=WH(e._queryParams,this._value,this._key);if(Qm(n),cs(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Zt(e._repo,e._path,n,e._orderByCalled)}};function rF(t,e){return Vd("endBefore","key",e,!0),new MI(t,e)}var Pm=class extends bn{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){Vr("startAt",this._value,e._path,!0);let n=iI(e._queryParams,this._value,this._key);if(Qm(n),cs(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Zt(e._repo,e._path,n,e._orderByCalled)}};function iF(t=null,e){return Vd("startAt","key",e,!0),new Pm(t,e)}var NI=class extends bn{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){Vr("startAfter",this._value,e._path,!1);let n=zH(e._queryParams,this._value,this._key);if(Qm(n),cs(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Zt(e._repo,e._path,n,e._orderByCalled)}};function sF(t,e){return Vd("startAfter","key",e,!0),new NI(t,e)}var RI=class extends bn{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Zt(e._repo,e._path,qH(e._queryParams,this._limit),e._orderByCalled)}};function oF(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new RI(t)}var PI=class extends bn{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Zt(e._repo,e._path,GH(e._queryParams,this._limit),e._orderByCalled)}};function aF(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new PI(t)}var kI=class extends bn{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Km(e,"orderByChild");let n=new we(this._path);if(ae(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let r=new yd(n),i=Om(e._queryParams,r);return cs(i),new Zt(e._repo,e._path,i,!0)}};function cF(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vc("orderByChild","path",t,!1),new kI(t)}var OI=class extends bn{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){Km(e,"orderByKey");let n=Om(e._queryParams,kr);return cs(n),new Zt(e._repo,e._path,n,!0)}};function lF(){return new OI}var FI=class extends bn{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){Km(e,"orderByPriority");let n=Om(e._queryParams,ke);return cs(n),new Zt(e._repo,e._path,n,!0)}};function uF(){return new FI}var VI=class extends bn{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){Km(e,"orderByValue");let n=Om(e._queryParams,YI);return cs(n),new Zt(e._repo,e._path,n,!0)}};function dF(){return new VI}var LI=class extends bn{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(Vr("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Rm(this._value,this._key)._apply(new Pm(this._value,this._key)._apply(e))}};function hF(t,e){return Vd("equalTo","key",e,!0),new LI(t,e)}function jn(t,...e){let n=ue(t);for(let r of e)n=r._apply(n);return n}Sq(wn);Pq(wn);var bG="FIREBASE_DATABASE_EMULATOR_HOST",jI={},EG=!1;function IG(t,e,n,r){t.repoInfo_=new lm(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function bC(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Or("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),vt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=AI(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[bG]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=AI(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let u=i&&c?new fd(fd.OWNER):new HE(t.name,t.options,e);UO("Invalid Firebase Database URL",o),ae(o.path)||Or("Database URL must point to the root of a Firebase Database (not including a child path).");let d=DG(a,t,u,new $E(t.name,n));return new BI(d,t)}function CG(t,e){let n=jI[e];(!n||n[t.key]!==t)&&Or(`Database ${e}(${t.repoInfo_}) has already been deleted.`),zO(t),delete n[t.key]}function DG(t,e,n,r){let i=jI[e.name];i||(i={},jI[e.name]=i);let s=i[t.toURLString()];return s&&Or("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new TI(t,EG,n,r),i[t.toURLString()]=s,s}var BI=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(sG(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new wn(this._repo,ve())),this._rootInternal}_delete(){return this._rootInternal!==null&&(CG(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Or("Cannot call "+e+" on a deleted database.")}};function fF(){dO.IS_TRANSPORT_INITIALIZED&&Vt("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function pF(){fF(),_d.forceDisallow()}function gF(){fF(),Ec.forceDisallow(),_d.forceAllow()}function mF(t,e,n,r={}){t=ue(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Or("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Or('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new fd(fd.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:qd(r.mockUserToken,t.app.options.projectId);s=new fd(o)}IG(i,e,n,s)}function _F(t){t=ue(t),t._checkNotDeleted("goOffline"),zO(t._repo)}function xF(t){t=ue(t),t._checkNotDeleted("goOnline"),pG(t._repo)}function yF(t,e){Wk(t,e)}function TG(t){HI(Qd),ls(new dn("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return bC(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Bn(hk,fk,t),Bn(hk,fk,"esm2017")}var SG={".sv":"timestamp"};function vF(){return SG}function wF(t){return{".sv":{increment:t}}}var UI=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function bF(t,e,n){var r;if(t=ue(t),yn("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";let i=(r=n?.applyLocally)!==null&&r!==void 0?r:!0,s=new ft,o=(c,l,u)=>{let d=null;c?s.reject(c):(d=new Pc(u,new wn(t._repo,t._path),ke),s.resolve(new UI(l,d)))},a=Zm(t,()=>{});return gG(t._repo,t._path,e,o,a,i),s.promise}KI.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};KI.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};TG();var AG="@firebase/database-compat",MG="1.0.4";var NG=new ui("@firebase/database-compat"),EF=function(t){let e="FIREBASE WARNING: "+t;NG.warn(e)};var RG=function(t,e,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(Jt(t,e)+"must be a boolean.")},PG=function(t,e,n){if(!(n&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Jt(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var EC=class{constructor(e){this._delegate=e}cancel(e){G("OnDisconnect.cancel",0,1,arguments.length),lt("OnDisconnect.cancel","onComplete",e,!0);let n=this._delegate.cancel();return e&&n.then(()=>e(null),r=>e(r)),n}remove(e){G("OnDisconnect.remove",0,1,arguments.length),lt("OnDisconnect.remove","onComplete",e,!0);let n=this._delegate.remove();return e&&n.then(()=>e(null),r=>e(r)),n}set(e,n){G("OnDisconnect.set",1,2,arguments.length),lt("OnDisconnect.set","onComplete",n,!0);let r=this._delegate.set(e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){G("OnDisconnect.setWithPriority",2,3,arguments.length),lt("OnDisconnect.setWithPriority","onComplete",r,!0);let i=this._delegate.setWithPriority(e,n);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,n){if(G("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){let i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,EF("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}lt("OnDisconnect.update","onComplete",n,!0);let r=this._delegate.update(e);return n&&r.then(()=>n(null),i=>n(i)),r}};var IC=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return G("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var Io=class t{constructor(e,n){this._database=e,this._delegate=n}val(){return G("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return G("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return G("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return G("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return G("DataSnapshot.child",0,1,arguments.length),e=String(e),Vc("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))}hasChild(e){return G("DataSnapshot.hasChild",1,1,arguments.length),Vc("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return G("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return G("DataSnapshot.forEach",1,1,arguments.length),lt("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new t(this._database,n)))}hasChildren(){return G("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return G("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return G("DataSnapshot.ref",0,0,arguments.length),new ci(this._database,this._delegate.ref)}get ref(){return this.getRef()}},Xm=class t{constructor(e,n){this.database=e,this._delegate=n}on(e,n,r,i){var s;G("Query.on",2,4,arguments.length),lt("Query.on","callback",n,!1);let o=t.getCancelAndContextArgs_("Query.on",r,i),a=(l,u)=>{n.call(o.context,new Io(this.database,l),u)};a.userCallback=n,a.context=o.context;let c=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(e){case"value":return Zm(this._delegate,a,c),n;case"child_added":return _C(this._delegate,a,c),n;case"child_removed":return vC(this._delegate,a,c),n;case"child_changed":return xC(this._delegate,a,c),n;case"child_moved":return yC(this._delegate,a,c),n;default:throw new Error(Jt("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,r){if(G("Query.off",0,3,arguments.length),PG("Query.off",e,!0),lt("Query.off","callback",n,!0),i0("Query.off","context",r,!0),n){let i=()=>{};i.userCallback=n,i.context=r,wC(this._delegate,e,i)}else wC(this._delegate,e)}get(){return tF(this._delegate).then(e=>new Io(this.database,e))}once(e,n,r,i){G("Query.once",1,4,arguments.length),lt("Query.once","callback",n,!0);let s=t.getCancelAndContextArgs_("Query.once",r,i),o=new ft,a=(l,u)=>{let d=new Io(this.database,l);n&&n.call(s.context,d,u),o.resolve(d)};a.userCallback=n,a.context=s.context;let c=l=>{s.cancel&&s.cancel.call(s.context,l),o.reject(l)};switch(e){case"value":Zm(this._delegate,a,c,{onlyOnce:!0});break;case"child_added":_C(this._delegate,a,c,{onlyOnce:!0});break;case"child_removed":vC(this._delegate,a,c,{onlyOnce:!0});break;case"child_changed":xC(this._delegate,a,c,{onlyOnce:!0});break;case"child_moved":yC(this._delegate,a,c,{onlyOnce:!0});break;default:throw new Error(Jt("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return G("Query.limitToFirst",1,1,arguments.length),new t(this.database,jn(this._delegate,oF(e)))}limitToLast(e){return G("Query.limitToLast",1,1,arguments.length),new t(this.database,jn(this._delegate,aF(e)))}orderByChild(e){return G("Query.orderByChild",1,1,arguments.length),new t(this.database,jn(this._delegate,cF(e)))}orderByKey(){return G("Query.orderByKey",0,0,arguments.length),new t(this.database,jn(this._delegate,lF()))}orderByPriority(){return G("Query.orderByPriority",0,0,arguments.length),new t(this.database,jn(this._delegate,uF()))}orderByValue(){return G("Query.orderByValue",0,0,arguments.length),new t(this.database,jn(this._delegate,dF()))}startAt(e=null,n){return G("Query.startAt",0,2,arguments.length),new t(this.database,jn(this._delegate,iF(e,n)))}startAfter(e=null,n){return G("Query.startAfter",0,2,arguments.length),new t(this.database,jn(this._delegate,sF(e,n)))}endAt(e=null,n){return G("Query.endAt",0,2,arguments.length),new t(this.database,jn(this._delegate,nF(e,n)))}endBefore(e=null,n){return G("Query.endBefore",0,2,arguments.length),new t(this.database,jn(this._delegate,rF(e,n)))}equalTo(e,n){return G("Query.equalTo",1,2,arguments.length),new t(this.database,jn(this._delegate,hF(e,n)))}toString(){return G("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return G("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(G("Query.isEqual",1,1,arguments.length),!(e instanceof t)){let n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,r){let i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,lt(e,"cancel",i.cancel,!0),i.context=r,i0(e,"context",i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(Jt(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new ci(this.database,new wn(this._delegate._repo,this._delegate._path))}},ci=class t extends Xm{constructor(e,n){super(e,new Zt(n._repo,n._path,new Ed,!1)),this.database=e,this._delegate=n}getKey(){return G("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return G("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new t(this.database,as(this._delegate,e))}getParent(){G("Reference.parent",0,0,arguments.length);let e=this._delegate.parent;return e?new t(this.database,e):null}getRoot(){return G("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)}set(e,n){G("Reference.set",1,2,arguments.length),lt("Reference.set","onComplete",n,!0);let r=Ym(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}update(e,n){if(G("Reference.update",1,2,arguments.length),Array.isArray(e)){let i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,EF("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}yn("Reference.update",this._delegate._path),lt("Reference.update","onComplete",n,!0);let r=eF(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){G("Reference.setWithPriority",2,3,arguments.length),lt("Reference.setWithPriority","onComplete",r,!0);let i=JO(this._delegate,e,n);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){G("Reference.remove",0,1,arguments.length),lt("Reference.remove","onComplete",e,!0);let n=ZO(this._delegate);return e&&n.then(()=>e(null),r=>e(r)),n}transaction(e,n,r){G("Reference.transaction",1,3,arguments.length),lt("Reference.transaction","transactionUpdate",e,!1),lt("Reference.transaction","onComplete",n,!0),RG("Reference.transaction","applyLocally",r,!0);let i=bF(this._delegate,e,{applyLocally:r}).then(s=>new IC(s.committed,new Io(this.database,s.snapshot)));return n&&i.then(s=>n(null,s.committed,s.snapshot),s=>n(s,!1,null)),i}setPriority(e,n){G("Reference.setPriority",1,2,arguments.length),lt("Reference.setPriority","onComplete",n,!0);let r=XO(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}push(e,n){G("Reference.push",0,2,arguments.length),lt("Reference.push","onComplete",n,!0);let r=YO(this._delegate,e),i=r.then(o=>new t(this.database,o));n&&i.then(()=>n(null),o=>n(o));let s=new t(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return yn("Reference.onDisconnect",this._delegate._path),new EC(new Mm(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var Co=class{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:pF,forceLongPolling:gF}}useEmulator(e,n,r={}){mF(this._delegate,e,n,r)}ref(e){if(G("database.ref",0,1,arguments.length),e instanceof ci){let n=mC(this._delegate,e.toString());return new ci(this,n)}else{let n=gC(this._delegate,e);return new ci(this,n)}}refFromURL(e){G("database.refFromURL",1,1,arguments.length);let r=mC(this._delegate,e);return new ci(this,r)}goOffline(){return G("database.goOffline",0,0,arguments.length),_F(this._delegate)}goOnline(){return G("database.goOnline",0,0,arguments.length),xF(this._delegate)}};Co.ServerValue={TIMESTAMP:vF(),increment:t=>wF(t)};function kG({app:t,url:e,version:n,customAuthImpl:r,customAppCheckImpl:i,namespace:s,nodeAdmin:o=!1}){HI(n);let a=new s0("database-standalone"),c=new Kd("auth-internal",a);c.setComponent(new dn("auth-internal",()=>r,"PRIVATE"));let l;return i&&(l=new Kd("app-check-internal",a),l.setComponent(new dn("app-check-internal",()=>i,"PRIVATE"))),{instance:new Co(bC(t,c,l,e,o),t),namespace:s}}var OG=Object.freeze({__proto__:null,initStandalone:kG});var FG=Co.ServerValue;function VG(t){t.INTERNAL.registerComponent(new dn("database-compat",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new Co(i,r)},"PUBLIC").setServiceProps({Reference:ci,Query:Xm,Database:Co,DataSnapshot:Io,enableLogging:yF,INTERNAL:OG,ServerValue:FG}).setMultipleInstances(!0)),t.registerVersion(AG,MG)}VG(bt);function Bd(t,e,n="on",r=ps){return new se(i=>{let s=null;return s=t[n](e,(o,a)=>{r.schedule(()=>{i.next({snapshot:o,prevKey:a})}),n==="once"&&r.schedule(()=>i.complete())},o=>{r.schedule(()=>i.error(o))}),n==="on"?{unsubscribe(){s!=null&&t.off(e,s)}}:{unsubscribe(){}}}).pipe(j(i=>{let{snapshot:s,prevKey:o}=i,a=null;return s.exists()&&(a=s.key),{type:e,payload:s,prevKey:o,key:a}}),Kc())}function LG(t){return typeof t=="string"}function jG(t){return typeof t.exportVal=="function"}function SF(t){return t==null}function AF(t){return typeof t.set=="function"}function IF(t,e){return AF(e)?e:t.ref(e)}function MF(t,e){if(LG(t))return e.stringCase();if(AF(t))return e.firebaseCase();if(jG(t))return e.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof t}`)}function NF(t){return(SF(t)||t.length===0)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function RF(t,e,n){e=NF(e);let r=e.map(i=>Bd(t,i,"on",n));return jo(...r)}function BG(t,e,n){let r=RF(t,e).pipe(cr((i,s)=>[...i,s],[]));return $G(t,r,n)}function UG(t,e){return Bd(t,"value","on",e).pipe(j(n=>{let r;return n.payload.forEach(i=>(r=i.key,!1)),{data:n,lastKeyToLoad:r}}))}function $G(t,e,n){return UG(t,n).pipe(A0(e),j(([i,s])=>{let o=i.lastKeyToLoad,a=s.map(c=>c.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),T0(i=>i.loadedKeys.indexOf(i.lastKeyToLoad)===-1),j(i=>i.actions))}function CF(t,e){return function(r,i){return MF(r,{stringCase:()=>t.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function HG(t){return function(n){return n?MF(n,{stringCase:()=>t.child(n).remove(),firebaseCase:()=>n.remove(),snapshotCase:()=>n.ref.remove()}):t.remove()}}function qG(t,e,n){return Bd(t,"value","once",n).pipe(Ve(r=>{let i=[B(r)];return e.forEach(s=>i.push(Bd(t,s,"on",n))),jo(...i).pipe(cr(zG,[]))}),Gc())}function PF(t,e){let n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function GG(t,e){if(SF(e))return 0;{let n=PF(t,e);return n===-1?t.length:n+1}}function zG(t,e){let{payload:n,prevKey:r,key:i}=e,s=PF(t,i),o=GG(t,r);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(c=>{let l={payload:c,type:"value",prevKey:a,key:c.key};return a=c.key,t=[...t,l],!1})}return t;case"child_added":if(s>-1)(t[s-1]?.key||null)!==r&&(t=t.filter(c=>c.payload.key!==n.key),t.splice(o,0,e));else{if(r==null)return[e,...t];t=t.slice(),t.splice(o,0,e)}return t;case"child_removed":return t.filter(a=>a.payload.key!==n.key);case"child_changed":return t.map(a=>a.payload.key===i?e:a);case"child_moved":if(s>-1){let a=t.splice(s,1)[0];return t=t.slice(),t.splice(o,0,a),t}return t;default:return t}}function DF(t,e,n){return e=NF(e),qG(t,e,n)}function WG(t,e){let n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:CF(r,"update"),set:CF(r,"set"),push:i=>r.push(i),remove:HG(r),snapshotChanges(i){return DF(t,i,n).pipe(We)},stateChanges(i){return RF(t,i,n).pipe(We)},auditTrail(i){return BG(t,i,n).pipe(We)},valueChanges(i,s){return DF(t,i,n).pipe(j(a=>a.map(c=>s&&s.idField?ie(A({},c.payload.val()),{[s.idField]:c.key}):c.payload.val())),We)}}}function TF(t,e){return function(){return Bd(t,"value","on",e)}}function KG(t,e){return{query:t,snapshotChanges(){return TF(t,e.schedulers.outsideAngular)().pipe(We)},update(n){return t.ref.update(n)},set(n){return t.ref.set(n)},remove(){return t.ref.remove()},valueChanges(){return TF(t,e.schedulers.outsideAngular)().pipe(We,j(r=>r.payload.exists()?r.payload.val():null))}}}var QG=new O("angularfire2.realtimeDatabaseURL"),YG=new O("angularfire2.database.use-emulator"),ZG=(()=>{class t{schedulers;database;constructor(n,r,i,s,o,a,c,l,u,d,h,f,p,m,y){this.schedulers=a;let C=c,F=Vs(n,o,r);l&&ql(F,o,u,h,f,p,d,m),this.database=Ea(`${F.name}.database.${i}`,"AngularFireDatabase",F.name,()=>{let T=o.runOutsideAngular(()=>F.database(i||void 0));return C&&T.useEmulator(...C),T},[C])}list(n,r){let i=this.schedulers.ngZone.runOutsideAngular(()=>IF(this.database,n)),s=i;return r&&(s=r(i)),WG(s,this)}object(n){let r=this.schedulers.ngZone.runOutsideAngular(()=>IF(this.database,n));return KG(r,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||t)(b(Ni),b(Ri,8),b(QG,8),b(Rt),b(he),b(ba),b(YG,8),b(np,8),b(Ll,8),b(jl,8),b(Bl,8),b(Ul,8),b($l,8),b(Hl,8),b(Qr,8))};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),kF=(()=>{class t{constructor(){bt.registerVersion("angularfire",Fs.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=tt({type:t});static \u0275inj=et({providers:[ZG]})}return t})();var OF=(()=>{let e=class e{constructor(){this.title="360Car"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=tn({type:e,selectors:[["app-root"]],decls:21,vars:0,consts:[[1,"navbar"],["routerLink","/home",1,"navbar-brand"],["src","./assets/images/OIG_WB_white.png","alt","logo",1,"logo"],["routerLink","/home"],["routerLink","/coches"],["routerLink","/transacciones"],["routerLink","/clientes"],[1,"container"]],template:function(i,s){i&1&&(v(0,"header")(1,"nav",0)(2,"a",1),on(3,"img",2),v(4,"span"),S(5,"360Car"),I()(),v(6,"ul")(7,"li")(8,"a",3),S(9,"Home"),I()(),v(10,"li")(11,"a",4),S(12,"Coches"),I()(),v(13,"li")(14,"a",5),S(15,"Transacciones"),I()(),v(16,"li")(17,"a",6),S(18,"Clientes"),I()()()()(),v(19,"div",7),on(20,"router-outlet"),I())},dependencies:[_y,_2],styles:[".navbar[_ngcontent-%COMP%]{padding:0 2rem;display:flex;justify-content:space-between;align-items:center;background-color:var(--black)}.navbar-brand[_ngcontent-%COMP%]{display:flex;align-items:center}img[_ngcontent-%COMP%]{height:6rem}ul[_ngcontent-%COMP%]{display:flex;flex-direction:row}li[_ngcontent-%COMP%]{list-style:none;list-style-type:none;margin-left:3rem}a[_ngcontent-%COMP%]{text-decoration:none;color:var(--white);font-weight:700;font-size:1rem;transition:color ease .6s;padding:1rem}a[_ngcontent-%COMP%]:hover{color:var(--yellow)}"]});let t=e;return t})();var FF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=tt({type:e,bootstrap:[OF]}),e.\u0275inj=et({imports:[AS,uk,ik,L2.initializeApp(dk.firebaseConfig),kF]});let t=e;return t})();SS().bootstrapModule(FF).catch(t=>console.error(t));
